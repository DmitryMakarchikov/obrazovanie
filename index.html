<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Основы алгоритмизации и программирования | Интерактивная платформа</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/cropperjs/dist/cropper.css">
    <style>
        /* ========== ГЛОБАЛЬНЫЕ СТИЛИ И ТЕМЫ ========== */
        :root {
            --primary-dark: #0a192f;
            --secondary-dark: #112240;
            --accent-blue: #64ffda;
            --accent-purple: #8892b0;
            --accent-red: #ff5555;
            --accent-green: #50fa7b;
            --accent-yellow: #f1fa8c;
            --accent-orange: #ffb86c;
            --accent-pink: #ff79c6;
            --text-primary: #e6f1ff;
            --text-secondary: #a8b2d1;
            --panel-bg: rgba(17, 34, 64, 0.95);
            --panel-border: rgba(100, 255, 218, 0.3);
            --glow-effect: 0 0 15px rgba(100, 255, 218, 0.5);
            --shadow-heavy: 0 10px 30px rgba(0, 0, 0, 0.3);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2);
            --gradient-blue: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-green: linear-gradient(135deg, #64ffda 0%, #50fa7b 100%);
            --gradient-orange: linear-gradient(135deg, #ffb86c 0%, #ff79c6 100%);
            --gradient-purple: linear-gradient(135deg, #bd93f9 0%, #6272a4 100%);
            --gradient-red: linear-gradient(135deg, #ff5555 0%, #ffb86c 100%);
        }

        :root[data-theme="light"] {
            --primary-dark: #f0f2f5;
            --secondary-dark: #ffffff;
            --accent-blue: #1890ff;
            --accent-purple: #595959;
            --accent-red: #f5222d;
            --accent-green: #52c41a;
            --accent-yellow: #faad14;
            --accent-orange: #fa8c16;
            --accent-pink: #eb2f96;
            --text-primary: #262626;
            --text-secondary: #595959;
            --panel-bg: rgba(255, 255, 255, 0.95);
            --panel-border: rgba(24, 144, 255, 0.3);
            --glow-effect: 0 0 15px rgba(24, 144, 255, 0.2);
            --shadow-heavy: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.05);
            --gradient-blue: linear-gradient(135deg, #1890ff 0%, #36cfc9 100%);
            --gradient-green: linear-gradient(135deg, #52c41a 0%, #73d13d 100%);
            --gradient-orange: linear-gradient(135deg, #fa8c16 0%, #ffa940 100%);
            --gradient-purple: linear-gradient(135deg, #722ed1 0%, #9254de 100%);
            --gradient-red: linear-gradient(135deg, #f5222d 0%, #ff7a45 100%);
        }

        :root[data-theme="blue"] {
            --primary-dark: #001529;
            --secondary-dark: #002140;
            --accent-blue: #1890ff;
            --accent-purple: #8c8c8c;
            --accent-red: #ff4d4f;
            --accent-green: #52c41a;
            --accent-yellow: #fadb14;
            --accent-orange: #fa8c16;
            --accent-pink: #eb2f96;
            --text-primary: #e6f7ff;
            --text-secondary: #bae7ff;
            --panel-bg: rgba(0, 33, 64, 0.95);
            --panel-border: rgba(24, 144, 255, 0.4);
            --glow-effect: 0 0 15px rgba(24, 144, 255, 0.3);
            --gradient-blue: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);
            --gradient-green: linear-gradient(135deg, #52c41a 0%, #389e0d 100%);
        }

        :root[data-theme="green"] {
            --primary-dark: #0c1b15;
            --secondary-dark: #132721;
            --accent-blue: #36cfc9;
            --accent-purple: #8c8c8c;
            --accent-red: #ff4d4f;
            --accent-green: #52c41a;
            --accent-yellow: #fadb14;
            --accent-orange: #fa8c16;
            --accent-pink: #eb2f96;
            --text-primary: #f6ffed;
            --text-secondary: #d9f7be;
            --panel-bg: rgba(19, 39, 33, 0.95);
            --panel-border: rgba(82, 196, 26, 0.4);
            --glow-effect: 0 0 15px rgba(82, 196, 26, 0.3);
            --gradient-green: linear-gradient(135deg, #52c41a 0%, #237804 100%);
        }

        :root[data-theme="purple"] {
            --primary-dark: #120338;
            --secondary-dark: #1d0b52;
            --accent-blue: #9254de;
            --accent-purple: #ad8bff;
            --accent-red: #ff4d4f;
            --accent-green: #52c41a;
            --accent-yellow: #fadb14;
            --accent-orange: #fa8c16;
            --accent-pink: #eb2f96;
            --text-primary: #f9f0ff;
            --text-secondary: #efdbff;
            --panel-bg: rgba(29, 11, 82, 0.95);
            --panel-border: rgba(146, 84, 222, 0.4);
            --glow-effect: 0 0 15px rgba(146, 84, 222, 0.3);
            --gradient-purple: linear-gradient(135deg, #722ed1 0%, #391085 100%);
        }

        :root[data-theme="high-contrast"] {
            --primary-dark: #000000;
            --secondary-dark: #1a1a1a;
            --accent-blue: #00ffff;
            --accent-purple: #ffffff;
            --accent-red: #ff0000;
            --accent-green: #00ff00;
            --accent-yellow: #ffff00;
            --accent-orange: #ffa500;
            --accent-pink: #ff00ff;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --panel-bg: rgba(26, 26, 26, 0.98);
            --panel-border: #ffffff;
            --glow-effect: 0 0 10px #ffffff;
            --gradient-blue: linear-gradient(135deg, #00ffff 0%, #0000ff 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
        }

        body {
            background: var(--primary-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.3s ease, color 0.3s ease;
        }

        body.theme-dark {
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(100, 255, 218, 0.07) 0%, transparent 25%),
                radial-gradient(circle at 90% 30%, rgba(86, 156, 214, 0.05) 0%, transparent 25%),
                radial-gradient(circle at 50% 85%, rgba(136, 146, 176, 0.03) 0%, transparent 25%),
                linear-gradient(45deg, rgba(10, 25, 47, 0.9), rgba(17, 34, 64, 0.9));
        }

        /* ========== ЛОАДЕР С АНИМАЦИЕЙ ========== */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loader-logo {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
        }

        .loader-logo-inner {
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-top: 3px solid var(--accent-blue);
            border-right: 3px solid var(--accent-green);
            border-bottom: 3px solid var(--accent-red);
            border-left: 3px solid var(--accent-yellow);
            border-radius: 50%;
            animation: rotate 1.5s linear infinite;
            position: relative;
        }

        .loader-logo-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green), var(--accent-yellow));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .loader-progress-container {
            width: 300px;
            margin-top: 20px;
        }

        .loader-progress-bar {
            height: 6px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .loader-progress-fill {
            height: 100%;
            background: var(--gradient-green);
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        }

        .loader-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        .loader-status {
            font-size: 14px;
            color: var(--accent-purple);
            text-align: center;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ========== ХЕДЕР И НАВИГАЦИЯ ========== */
        .header {
            background: rgba(10, 25, 47, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--panel-border);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-heavy);
            transition: all 0.3s ease;
        }

        .header:hover {
            background: rgba(10, 25, 47, 0.98);
        }

        .header-container {
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-wrapper {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo {
            width: 55px;
            height: 55px;
            background: var(--gradient-green);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-dark);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .logo-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: logoGlow 3s infinite;
        }

        @keyframes logoGlow {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-size: 20px;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1.2px;
            line-height: 1.2; 
            display: block; 
        }

        .logo-sub {
            font-size: 11px;
            color: var(--accent-purple);
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-top: 2px;
        }

        /* Основная навигация */
        .main-nav {
            display: flex;
            background: rgba(17, 34, 64, 0.8);
            border-radius: 15px;
            padding: 6px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .nav-item {
            padding: 12px 25px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item:hover {
            color: var(--text-primary);
            background: rgba(100, 255, 218, 0.1);
        }

        .nav-item.active {
            background: rgba(100, 255, 218, 0.15);
            color: var(--accent-blue);
            box-shadow: var(--glow-effect);
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        /* Блок пользователя - убраны статистики уровня, XP, дней */
        .user-block {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 15px;
            background: rgba(17, 34, 64, 0.8);
            border-radius: 50px;
            border: 1px solid rgba(100, 255, 218, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-profile:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-2px);
            box-shadow: var(--glow-effect);
        }

        .user-avatar {
            width: 42px;
            height: 42px;
            background: var(--gradient-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: white;
            border: 2px solid var(--accent-blue);
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-rank {
            font-size: 11px;
            color: var(--accent-yellow);
            background: rgba(241, 250, 140, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            text-align: center;
            margin-top: 2px;
        }

        /* Хлебные крошки */
        .breadcrumbs {
            padding: 15px 40px;
            background: rgba(10, 25, 47, 0.8);
            border-bottom: 1px solid var(--panel-border);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--accent-purple);
        }

        .breadcrumbs a {
            color: var(--accent-blue);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumbs a:hover {
            color: var(--accent-green);
            text-decoration: underline;
        }

        .breadcrumbs span {
            color: var(--text-primary);
            font-weight: 600;
        }

        

        /* ========== ОСНОВНОЙ КОНТЕЙНЕР ========== */
        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 25px;
            padding: 30px;
            min-height: calc(100vh - 180px);
        }

        /* Главный контент (блоки тем) */
        .main-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .topic-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .topic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(100, 255, 218, 0.05) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .topic-card:hover::before {
            transform: translateX(100%);
        }

        .topic-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .topic-card.completed {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(80, 250, 123, 0.1), rgba(10, 25, 47, 0.9));
        }

        .topic-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .topic-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .topic-difficulty {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .difficulty-beginner {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        .difficulty-intermediate {
            background: rgba(241, 250, 140, 0.2);
            color: var(--accent-yellow);
        }

        .difficulty-advanced {
            background: rgba(255, 85, 85, 0.2);
            color: var(--accent-red);
        }

        .topic-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .topic-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
        }

        .topic-stats {
            display: flex;
            gap: 15px;
        }

        .topic-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--accent-purple);
        }

        .topic-status {
            font-size: 12px;
            font-weight: 600;
            padding: 5px 12px;
            border-radius: 12px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
        }

        .topic-status.completed {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        /* ========== ЛЕВАЯ ПАНЕЛЬ - КУРСЫ И МОДУЛИ ========== */
        .sidebar-left {
            display: flex;
            flex-direction: column;
        }

        .module-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-heavy);
            transition: all 0.3s ease;
        }

        .module-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
            box-shadow: var(--glow-effect);
        }

        .module-header {
            padding: 20px;
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .module-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .module-info h3 {
            font-size: 16px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .module-info .module-stats {
            font-size: 12px;
            color: var(--accent-purple);
            display: flex;
            gap: 10px;
        }

        .module-topics {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .topic-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(10, 25, 47, 0.5);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            position: relative;
        }

        .topic-item:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateX(5px);
        }

        .topic-item.active {
            background: rgba(100, 255, 218, 0.15);
            border-color: var(--accent-blue);
        }

        .topic-item.completed {
            border-color: var(--accent-green);
            background: rgba(80, 250, 123, 0.1);
        }

        .topic-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-purple);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .topic-item.completed .topic-checkbox {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: var(--primary-dark);
        }

        .topic-text {
            flex: 1;
        }

        .topic-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .topic-meta {
            font-size: 11px;
            color: var(--accent-purple);
            display: flex;
            gap: 8px;
            margin-top: 2px;
        }

        .topic-tag {
            font-size: 10px;
            padding: 2px 6px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            color: var(--accent-blue);
        }

        /* Панель прогресса рядом с лекциями */
        .progress-sidebar {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .progress-path {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .path-node {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(10, 25, 47, 0.5);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .path-node:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .path-node.active {
            background: rgba(100, 255, 218, 0.15);
            border-left-color: var(--accent-blue);
        }

        .path-node.completed {
            border-left-color: var(--accent-green);
            background: rgba(80, 250, 123, 0.1);
        }

        .path-node-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
            flex-shrink: 0;
        }

        .path-node.completed .path-node-icon {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        .path-node-info {
            flex: 1;
        }

        .path-node-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .path-node-desc {
            font-size: 11px;
            color: var(--accent-purple);
        }

        /* ========== ЦЕНТРАЛЬНАЯ ПАНЕЛЬ - КОНТЕНТ ========== */
        .content-main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .content-section {
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow-heavy);
            position: relative;
            overflow: hidden;
        }

        .content-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-green);
            opacity: 0.8;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        .content-title {
            font-size: 28px;
            color: var(--accent-blue);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .content-title-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--accent-blue);
        }

        .content-controls {
            display: flex;
            gap: 10px;
        }

        /* Стили для секций теории */
        .theory-section {
            transition: all 0.3s ease;
        }

        .theory-section:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
            box-shadow: var(--glow-effect);
        }

        /* Прогресс изучения темы */
        .topic-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .topic-progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .topic-progress-fill {
            height: 100%;
            background: var(--gradient-green);
            transition: width 0.5s ease;
        }

        /* Стили для сетки теорий */
        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        /* Интерактивные блоки */
        .interactive-block {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .interactive-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .interactive-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--accent-blue);
        }

        /* Лабораторные работы */
        .labs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .lab-card {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border: 1px solid var(--panel-border);
            border-radius: 18px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .lab-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(100, 255, 218, 0.05) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .lab-card:hover::before {
            transform: translateX(100%);
        }

        .lab-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .lab-card.completed {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(80, 250, 123, 0.1), rgba(10, 25, 47, 0.9));
        }

        .lab-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .lab-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .lab-difficulty {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .difficulty-beginner {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        .difficulty-intermediate {
            background: rgba(241, 250, 140, 0.2);
            color: var(--accent-yellow);
        }

        .difficulty-advanced {
            background: rgba(255, 85, 85, 0.2);
            color: var(--accent-red);
        }

        .difficulty-expert {
            background: rgba(255, 184, 108, 0.2);
            color: var(--accent-orange);
        }

        .lab-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .lab-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
        }

        .lab-stats {
            display: flex;
            gap: 15px;
        }

        .lab-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--accent-purple);
        }

        .lab-status {
            font-size: 12px;
            font-weight: 600;
            padding: 5px 12px;
            border-radius: 12px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
        }

        .lab-status.completed {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        /* Тесты */
        .test-container {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border-radius: 18px;
            padding: 30px;
            margin-top: 20px;
        }

        .test-question {
            font-size: 20px;
            color: var(--text-primary);
            margin-bottom: 25px;
            line-height: 1.5;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        .test-question-number {
            color: var(--accent-blue);
            font-weight: bold;
        }

        .test-options {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
        }

        .test-option {
            padding: 18px 20px;
            background: rgba(10, 25, 47, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-option:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .test-option.selected {
            background: rgba(100, 255, 218, 0.2);
            border-color: var(--accent-blue);
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .test-option.correct {
            background: rgba(80, 250, 123, 0.2);
            border-color: var(--accent-green);
        }

        .test-option.incorrect {
            background: rgba(255, 85, 85, 0.2);
            border-color: var(--accent-red);
        }

        .option-letter {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--accent-blue);
            flex-shrink: 0;
        }

        .test-option.selected .option-letter {
            background: var(--accent-blue);
            color: var(--primary-dark);
        }

        .test-progress {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(100, 255, 218, 0.2);
        }

        .test-timer {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255, 85, 85, 0.1);
            border-radius: 12px;
            color: var(--accent-red);
            font-weight: bold;
        }

        /* Практика*/
        .practice-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .lab-info-panel {
            background: linear-gradient(135deg, rgba(10, 25, 47, 0.9), rgba(17, 34, 64, 0.9));
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .lab-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .lab-info-title {
            font-size: 20px;
            color: var(--accent-blue);
            font-weight: 600;
        }

        .lab-objectives {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lab-objective {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: rgba(10, 25, 47, 0.6);
            border-radius: 10px;
            border-left: 4px solid var(--accent-blue);
        }

        .lab-objective.completed {
            border-left-color: var(--accent-green);
            background: rgba(80, 250, 123, 0.1);
        }

        .lab-submission {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid var(--accent-blue);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .lab-test-questions {
            display: grid;
            gap: 15px;
            margin-top: 15px;
        }

        .lab-test-question {
            padding: 15px;
            background: rgba(10, 25, 47, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .lab-test-question-text {
            margin-bottom: 10px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .lab-test-options {
            display: grid;
            gap: 8px;
        }

        .lab-test-option {
            padding: 8px 12px;
            background: rgba(10, 25, 47, 0.8);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lab-test-option:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        .lab-test-option.selected {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid var(--accent-blue);
        }

        .editor-wrapper {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(10, 25, 47, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .file-tabs {
            display: flex;
            gap: 5px;
            overflow-x: auto;
            max-width: 400px;
        }

        /* Цвета файлов в редакторе */
        .file-tab {
            padding: 10px 20px;
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 10px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--accent-blue);
        }

        .file-tab:hover {
            background: rgba(100, 255, 218, 0.2);
        }

        .file-tab.active {
            background: rgba(100, 255, 218, 0.3);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
            font-weight: 600;
        }

        .file-tab.cpp {
            background: rgba(86, 156, 214, 0.15);
            border-color: rgba(86, 156, 214, 0.4);
            color: #569cd6;
        }

        .file-tab.h {
            background: rgba(80, 250, 123, 0.15);
            border-color: rgba(80, 250, 123, 0.4);
            color: var(--accent-green);
        }

        .editor-controls {
            display: flex;
            gap: 10px;
        }

        .code-editor-container {
            flex: 1;
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            overflow: hidden;
            background: #1e1e1e;
        }

        .CodeMirror {
            height: 500px !important;
            font-size: 15px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        .editor-output {
            background: #1e1e1e;
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            padding: 20px;
            min-height: 200px;
            max-height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-top: 1px solid rgba(100, 255, 218, 0.2);
        }

        .output-line {
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-line::before {
            content: '>';
            color: var(--accent-purple);
            font-weight: bold;
        }

        .output-line.success {
            background: rgba(80, 250, 123, 0.1);
            color: var(--accent-green);
        }

        .output-line.error {
            background: rgba(255, 85, 85, 0.1);
            color: var(--accent-red);
        }

        .output-line.info {
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
        }

        /* Симулятор памяти */
        .memory-simulator {
            background: linear-gradient(135deg, rgba(10, 25, 47, 0.9), rgba(17, 34, 64, 0.9));
            border-radius: 18px;
            padding: 25px;
            margin-top: 20px;
        }

        .memory-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .memory-visualization {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 8px;
            margin-top: 20px;
        }

        .memory-cell {
            aspect-ratio: 1;
            background: rgba(10, 25, 47, 0.8);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .memory-cell:hover {
            transform: scale(1.1);
            z-index: 2;
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.3);
        }

        .memory-cell.stack {
            border-color: var(--accent-blue);
            background: rgba(100, 255, 218, 0.1);
        }

        .memory-cell.heap {
            border-color: var(--accent-green);
            background: rgba(80, 250, 123, 0.1);
        }

        .memory-cell.global {
            border-color: var(--accent-yellow);
            background: rgba(241, 250, 140, 0.1);
        }

        .memory-cell.code {
            border-color: var(--accent-red);
            background: rgba(255, 85, 85, 0.1);
        }

        .memory-address {
            font-size: 8px;
            color: var(--accent-purple);
            margin-bottom: 4px;
        }

        .memory-value {
            font-size: 10px;
            font-weight: bold;
            color: var(--text-primary);
        }

        /* ========== ПРАВАЯ ПАНЕЛЬ - ПРОФИЛЬ И СТАТИСТИКА ========== */
        .sidebar-right {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* Карточка профиля */
        .profile-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow-heavy);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-green    );
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: var(--gradient-blue);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: bold;
            color: white;
            border: 4px solid var(--accent-blue);
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            cursor: pointer;
        }

        .avatar-level {
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: var(--accent-red);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            border: 2px solid var(--primary-dark);
        }

        .profile-info h3 {
            font-size: 22px;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .profile-rank {
            display: inline-block;
            padding: 6px 15px;
            background: var(--gradient-orange);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(10, 25, 47, 0.6);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(100, 255, 218, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            border-color: var(--accent-blue);
            background: rgba(100, 255, 218, 0.1);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--accent-purple);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Прогресс-бар опыта */
        .xp-progress {
            margin: 25px 0;
        }

        .xp-bar {
            height: 10px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .xp-fill {
            height: 100%;
            background: var(--gradient-green);
            width: 45%;
            transition: width 0.5s ease;
            position: relative;
        }

        .xp-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        .xp-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--accent-purple);
        }

        /* Достижения */
        .achievements-container {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow-heavy);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-badge {
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 25, 47, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            position: relative;
            overflow: hidden;
        }

        .achievement-badge:hover {
            transform: scale(1.05);
            border-color: var(--accent-blue);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .achievement-badge.unlocked {
            background: rgba(80, 250, 123, 0.1);
            border-color: var(--accent-green);
        }

        .achievement-badge.unlocked:hover {
            box-shadow: 0 5px 15px rgba(80, 250, 123, 0.3);
        }

        .achievement-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .achievement-badge.unlocked .achievement-icon {
            color: var(--accent-green);
        }

        .achievement-badge.locked .achievement-icon {
            color: var(--accent-purple);
            opacity: 0.5;
        }

        .achievement-title {
            font-size: 10px;
            text-align: center;
            color: var(--text-secondary);
            font-weight: 600;
            line-height: 1.3;
        }

        /* Активность за неделю */
        .activity-container {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow-heavy);
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(10, 25, 47, 0.6);
            border-radius: 12px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            border-color: var(--accent-blue);
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .activity-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .activity-time {
            font-size: 11px;
            color: var(--accent-purple);
        }

        /* Календарь активности */
        .activity-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }

        .calendar-day {
            aspect-ratio: 1;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            position: relative;
            background: rgba(10, 25, 47, 0.3);
        }

        .calendar-day.active {
            background: var(--accent-green);
            color: var(--primary-dark);
            font-weight: bold;
        }

        .calendar-day:hover::after {
            content: attr(data-count);
            position: absolute;
            top: -20px;
            background: var(--panel-bg);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 10px;
            white-space: nowrap;
            border: 1px solid var(--panel-border);
        }

        /* ========== КНОПКИ И КОНТРОЛЫ ========== */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-green);
            color: var(--primary-dark);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(80, 250, 123, 0.3);
        }

        .btn-secondary {
            background: var(--gradient-blue);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(100, 255, 218, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--accent-blue);
            color: var(--accent-blue);
        }

        .btn-outline:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-3px);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ========== МОДАЛЬНЫЕ ОКНА ========== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 47, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-container {
            background: var(--panel-bg);
            border: 2px solid var(--accent-blue);
            border-radius: 25px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 25px 30px;
            background: linear-gradient(135deg, rgba(10, 25, 47, 0.9), rgba(17, 34, 64, 0.9));
            border-bottom: 1px solid rgba(100, 255, 218, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 28px;
            color: var(--accent-blue);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .modal-body {
            padding: 30px;
            overflow-y: auto;
            max-height: 70vh;
        }

        /* Модалка профиля */
        .profile-modal-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        .profile-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .profile-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-large {
            background: rgba(10, 25, 47, 0.8);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .stat-large-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--accent-green);
            margin-bottom: 5px;
        }

        .stat-large-label {
            font-size: 12px;
            color: var(--accent-purple);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Модалка лабораторной */
        .lab-modal-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .lab-instructions {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .lab-objectives {
            display: grid;
            gap: 12px;
            margin-top: 20px;
        }

        .lab-objective {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(10, 25, 47, 0.6);
            border-radius: 10px;
            border-left: 4px solid var(--accent-blue);
        }

        /* Модалка редактора аватара */
        .avatar-editor-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .avatar-preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            background: rgba(10, 25, 47, 0.5);
            border-radius: 15px;
            border: 2px dashed var(--accent-blue);
        }

        .avatar-preview {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--accent-blue);
        }

        .avatar-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .avatar-control {
            padding: 10px;
            background: rgba(10, 25, 47, 0.6);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .avatar-control:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: var(--accent-blue);
        }

        .avatar-history {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .history-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .history-avatar:hover {
            transform: scale(1.1);
            border-color: var(--accent-blue);
        }

        .history-avatar.active {
            border-color: var(--accent-green);
            box-shadow: 0 0 10px var(--accent-green);
        }

    /* Модалка сертификата */
        .certificate-wrapper {
            max-width: 95vw;
            max-height: 85vh;
            overflow: auto;
            margin: 0 auto;
            padding: 10px;
        }

        .certificate-container {
            width: 800px;
            max-width: 100%;
            min-height: 550px;
            background: linear-gradient(135deg, #0a192f 0%, #112240 100%);
            border: 8px solid transparent;
            border-image: linear-gradient(45deg, var(--accent-blue), var(--accent-green), var(--accent-purple)) 1;
            position: relative;
            padding: 40px 30px;
            text-align: center;
            color: var(--text-primary);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
            overflow: visible;
            margin: 0 auto;
            transform-origin: top center;
        }

        /* Декоративные уголки */
        .certificate-corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid var(--accent-blue);
            opacity: 0.7;
        }

        .certificate-corner-tl {
            top: 15px;
            left: 15px;
            border-right: none;
            border-bottom: none;
        }

        .certificate-corner-tr {
            top: 15px;
            right: 15px;
            border-left: none;
            border-bottom: none;
        }

        .certificate-corner-bl {
            bottom: 15px;
            left: 15px;
            border-right: none;
            border-top: none;
        }

        .certificate-corner-br {
            bottom: 15px;
            right: 15px;
            border-left: none;
            border-top: none;
        }

        /* Фоновый узор */
        .certificate-bg-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(100, 255, 218, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(97, 218, 251, 0.05) 0%, transparent 50%);
            z-index: 1;
        }

        /* Заголовок сертификата  */
        .certificate-header {
            position: relative;
            z-index: 2;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.3);
        }

        .certificate-header-main {
            font-size: 36px;
            font-weight: 800;
            letter-spacing: 6px;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(100, 255, 218, 0.2);
        }

        .certificate-header-sub {
            font-size: 20px;
            font-weight: 300;
            letter-spacing: 3px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Печать/эмблема  */
        .certificate-seal {
            position: absolute;
            top: 30px;
            left: 30px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.4);
            z-index: 2;
        }

        /* Основное тело сертификата */
        .certificate-body {
            position: relative;
            z-index: 2;
            max-width: 90%;
            margin: 0 auto;
        }

        .certificate-presented {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        /* Имя студента  */
        .certificate-name {
            font-size: 32px;
            font-weight: 700;
            margin: 20px 0;
            padding: 12px 20px;
            background: linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.1), transparent);
            border-left: 2px solid var(--accent-green);
            border-right: 2px solid var(--accent-blue);
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(100, 255, 218, 0.3);
        }

        .certificate-achievement {
            font-size: 17px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .certificate-course {
            font-size: 22px;
            font-weight: 600;
            color: var(--accent-blue);
            margin: 20px 0;
            padding: 0 15px;
            line-height: 1.3;
        }

        /* Детали сертификата */
        .certificate-details {
            background: rgba(17, 34, 64, 0.7);
            border-radius: 8px;
            padding: 15px;
            margin: 20px auto;
            max-width: 90%;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-row:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .detail-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .detail-value {
            color: var(--accent-green);
            font-weight: 600;
            font-size: 15px;
        }

        /* Программа курса */
        .certificate-curriculum {
            text-align: left;
            background: rgba(100, 255, 218, 0.05);
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 3px solid var(--accent-purple);
        }

        .certificate-curriculum p {
            color: var(--accent-blue);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .certificate-curriculum ul {
            list-style: none;
            padding: 0;
        }

        .certificate-curriculum li {
            color: rgba(255, 255, 255, 0.9);
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
            font-size: 14px;
        }

        .certificate-curriculum li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: bold;
        }

        /* Футер сертификата */
        .certificate-footer {
            margin-top: 25px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .certificate-date {
            font-size: 14px;
            color: var(--accent-purple);
            text-align: left;
            margin-bottom: 10px;
        }

        .certificate-date span {
            font-weight: 600;
            color: var(--accent-green);
        }

        .certificate-signatures {
            text-align: center;
        }

        .signature {
            display: inline-block;
            margin-left: 20px;
        }

        .signature-line {
            width: 150px;
            height: 1px;
            background: rgba(255, 255, 255, 0.5);
            margin: 20px 0 8px 0;
        }

        .signature-name {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 4px;
        }

        .signature-title {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }

        /* Печать заверения */
        .certificate-stamp {
            position: absolute;
            bottom: 40px;
            right: 40px;
            width: 100px;
            height: 100px;
            border: 2px solid var(--accent-red);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            color: var(--accent-red);
            transform: rotate(-15deg);
            background: rgba(10, 25, 47, 0.95);
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.3);
            z-index: 3;
            text-align: center;
            line-height: 1.2;
            padding: 5px;
        }

        .certificate-stamp:before {
            content: "";
            position: absolute;
            width: 80px;
            height: 80px;
            border: 1px dashed var(--accent-red);
            border-radius: 50%;
            opacity: 0.5;
        }

        /* Кнопки управления сертификатом */
        .certificate-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 25px;
            flex-wrap: wrap;
            padding: 0 10px;
        }

        .certificate-controls .btn {
            min-width: 160px;
            padding: 10px 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .certificate-controls .btn i {
            font-size: 16px;
        }

        /* Адаптивность для маленьких экранов */
        @media (max-width: 900px) {
            .certificate-wrapper {
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .certificate-container {
                padding: 25px 20px;
                min-height: 500px;
            }
            
            .certificate-header-main {
                font-size: 28px;
                letter-spacing: 4px;
            }
            
            .certificate-header-sub {
                font-size: 16px;
                letter-spacing: 2px;
            }
            
            .certificate-name {
                font-size: 26px;
                padding: 8px 15px;
                margin: 15px 0;
            }
            
            .certificate-course {
                font-size: 18px;
                margin: 15px 0;
            }
            
            .certificate-seal {
                width: 60px;
                height: 60px;
                font-size: 24px;
                top: 20px;
                left: 20px;
            }
            
            .certificate-stamp {
                width: 80px;
                height: 80px;
                font-size: 9px;
                bottom: 30px;
                right: 30px;
            }
            
            .certificate-stamp:before {
                width: 60px;
                height: 60px;
            }
            
            .certificate-footer {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .signature-line {
                width: 120px;
            }
        }

        @media (max-width: 768px) {
            .certificate-wrapper {
                max-height: 95vh;
            }
            
            .certificate-container {
                padding: 20px 15px;
                min-height: 450px;
            }
            
            .certificate-header-main {
                font-size: 24px;
                letter-spacing: 3px;
            }
            
            .certificate-header-sub {
                font-size: 14px;
            }
            
            .certificate-name {
                font-size: 22px;
                letter-spacing: 1px;
            }
            
            .certificate-achievement {
                font-size: 15px;
            }
            
            .certificate-course {
                font-size: 16px;
            }
            
            .certificate-details {
                padding: 12px;
            }
            
            .detail-label {
                font-size: 13px;
            }
            
            .detail-value {
                font-size: 14px;
            }
            
            .certificate-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .certificate-controls .btn {
                width: 100%;
                max-width: 250px;
            }
            
            .certificate-stamp {
                position: relative;
                bottom: auto;
                right: auto;
                margin: 20px auto;
                transform: rotate(0);
            }
        }

        @media (max-width: 480px) {
            .certificate-container {
                padding: 15px 10px;
                min-height: 400px;
            }
            
            .certificate-header-main {
                font-size: 20px;
                letter-spacing: 2px;
            }
            
            .certificate-header-sub {
                font-size: 12px;
            }
            
            .certificate-name {
                font-size: 18px;
                padding: 6px 10px;
            }
            
            .certificate-presented {
                font-size: 14px;
            }
            
            .certificate-achievement {
                font-size: 13px;
            }
            
            .certificate-course {
                font-size: 14px;
            }
            
            .certificate-curriculum li {
                font-size: 12px;
            }
            
            .certificate-seal {
                width: 50px;
                height: 50px;
                font-size: 20px;
                top: 15px;
                left: 15px;
            }
            
            .certificate-stamp {
                width: 70px;
                height: 70px;
                font-size: 8px;
            }
        }

        /* Модалка настроек */
        .settings-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .settings-nav {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .settings-nav-item {
            padding: 15px 20px;
            background: rgba(10, 25, 47, 0.6);
            border: 1px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .settings-nav-item:hover {
            background: rgba(100, 255, 218, 0.1);
            color: var(--text-primary);
        }

        .settings-nav-item.active {
            background: rgba(100, 255, 218, 0.15);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .settings-section {
            display: none;
        }

        .settings-section.active {
            display: block;
        }

        .settings-group {
            margin-bottom: 30px;
        }

        .settings-group-title {
            font-size: 18px;
            color: var(--accent-blue);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        .theme-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .theme-option {
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 2px solid transparent;
        }

        .theme-option:hover {
            transform: translateY(-5px);
        }

        .theme-option.selected {
            border-color: var(--accent-blue);
            box-shadow: var(--glow-effect);
        }

        .theme-preview {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .theme-dark .theme-preview {
            background: linear-gradient(135deg, #0a192f, #112240);
            color: #64ffda;
            border: 2px solid #64ffda;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .theme-light .theme-preview {
            background: linear-gradient(135deg, #f0f2f5, #ffffff);
            color: #1890ff;
            border: 2px solid #1890ff;
            box-shadow: 0 0 10px rgba(24, 144, 255, 0.3);
        }

        .theme-blue .theme-preview {
            background: linear-gradient(135deg, #001529, #002140);
            color: #1890ff;
            border: 2px solid #1890ff;
            box-shadow: 0 0 10px rgba(24, 144, 255, 0.3);
        }

        .theme-green .theme-preview {
            background: linear-gradient(135deg, #0c1b15, #132721);
            color: #52c41a;
            border: 2px solid #52c41a;
            box-shadow: 0 0 10px rgba(82, 196, 26, 0.3);
        }

        .theme-purple .theme-preview {
            background: linear-gradient(135deg, #120338, #1d0b52);
            color: #9254de;
            border: 2px solid #9254de;
            box-shadow: 0 0 10px rgba(146, 84, 222, 0.3);
        }

        .theme-high-contrast .theme-preview {
            background: linear-gradient(135deg, #000000, #1a1a1a);
            color: #00ffff;
            border: 2px solid #00ffff;
            box-shadow: 0 0 10px #00ffff;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(10, 25, 47, 0.6);
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .setting-label {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .setting-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .setting-description {
            font-size: 12px;
            color: var(--accent-purple);
        }

        .setting-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(100, 255, 218, 0.2);
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--accent-blue);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Графики статистики  Chart.js */
        .stats-chart-container {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .chart-canvas {
            width: 100%;
            height: 300px;
        }

        /* Диаграмма навыков */
        .skills-chart {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .skill-name {
            width: 120px;
            font-size: 14px;
            color: var(--text-primary);
        }

        .skill-bar {
            flex: 1;
            height: 10px;
            background: rgba(10, 25, 47, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }

        .skill-progress {
            height: 100%;
            background: var(--gradient-green);
            transition: width 1s ease;
        }

        .skill-value {
            width: 40px;
            text-align: right;
            font-size: 14px;
            color: var(--accent-green);
        }

        /* Таблица лидеров */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .leaderboard-table th {
            padding: 15px;
            text-align: left;
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
            font-weight: 600;
            border-bottom: 2px solid var(--accent-blue);
        }

        .leaderboard-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .leaderboard-table tr:hover {
            background: rgba(100, 255, 218, 0.05);
        }

        .leaderboard-rank {
            width: 50px;
            text-align: center;
            font-weight: bold;
            color: var(--accent-green);
        }

        .leaderboard-rank-1 {
            color: #ffd700;
        }

        .leaderboard-rank-2 {
            color: #c0c0c0;
        }

        .leaderboard-rank-3 {
            color: #cd7f32;
        }

        /* ========== УВЕДОМЛЕНИЯ ========== */
        .notification-container {
            position: fixed;
            top: 120px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1500;
            max-width: 400px;
        }

        .notification {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            transform: translateX(400px);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: var(--shadow-heavy);
            border-left: 4px solid var(--accent-blue);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: var(--accent-green);
            background: rgba(80, 250, 123, 0.1);
        }

        .notification.warning {
            border-left-color: var(--accent-yellow);
            background: rgba(241, 250, 140, 0.1);
        }

        .notification.error {
            border-left-color: var(--accent-red);
            background: rgba(255, 85, 85, 0.1);
        }

        /* ========== АДАПТИВНОСТЬ ========== */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 250px 1fr;
            }
            
            .sidebar-right {
                grid-column: 1 / span 2;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                display: grid;
                gap: 20px;
            }
        }

        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .sidebar-left, .sidebar-right {
                grid-column: 1;
            }
            
            .labs-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            
            .header-container {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .main-nav {
                width: 100%;
                overflow-x: auto;
                justify-content: center;
            }
            
            .user-block {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .content-title {
                font-size: 22px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .content-controls {
                flex-wrap: wrap;
                justify-content: flex-start;
            }
            
            .editor-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .file-tabs {
                max-width: 100%;
            }
            
            .editor-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .profile-modal-content {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* ========== УТИЛИТЫ ========== */
        .scrollbar-hidden {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scrollbar-hidden::-webkit-scrollbar {
            display: none;
        }

        .text-gradient {
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: rgba(100, 255, 218, 0.2);
            color: var(--accent-blue);
        }

        .badge-success {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        .badge-warning {
            background: rgba(241, 250, 140, 0.2);
            color: var(--accent-yellow);
        }

        .badge-danger {
            background: rgba(255, 85, 85, 0.2);
            color: var(--accent-red);
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-dark);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            border: 1px solid var(--panel-border);
            z-index: 1000;
        }

        /* Загрузка файлов */
        .file-upload-container {
            border: 2px dashed var(--accent-blue);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .file-upload-container:hover {
            background: rgba(100, 255, 218, 0.05);
            border-color: var(--accent-green);
        }

        .file-upload-container.dragover {
            background: rgba(100, 255, 218, 0.1);
            border-color: var(--accent-green);
            transform: scale(1.02);
        }

        .file-upload-icon {
            font-size: 48px;
            color: var(--accent-blue);
            margin-bottom: 15px;
        }

        /* Игры */
        .game-card {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border: 1px solid var(--panel-border);
            border-radius: 18px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .game-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .game-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        /* Проекты */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .project-card {
            background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
            border: 1px solid var(--panel-border);
            border-radius: 18px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .project-card.completed {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(80, 250, 123, 0.1), rgba(10, 25, 47, 0.9));
        }

        .project-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-blue);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .project-difficulty {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .project-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
        }

        .project-status {
            font-size: 12px;
            font-weight: 600;
            padding: 5px 12px;
            border-radius: 12px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
        }

        .project-status.completed {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        /* Компактный режим */
        body.compact-mode .main-container {
            gap: 15px;
            padding: 20px;
        }

        body.compact-mode .content-card {
            padding: 20px;
            border-radius: 15px;
        }

        body.compact-mode .btn {
            padding: 10px 18px;
            font-size: 13px;
        }

        body.compact-mode .module-card {
            border-radius: 15px;
        }

        body.compact-mode .module-header {
            padding: 15px;
        }

        body.compact-mode .topic-item {
            padding: 10px 12px;
        }

        /* Отключение анимаций */
        .no-animations * {
            animation: none !important;
            transition: none !important;
        }
                /* ========== СТИЛИ ДЛЯ ГЛАВНОЙ СТРАНИЦЫ ========== */
        .home-layout {
            animation: fadeIn 0.5s ease;
        }

        .progress-summary {
            background: rgba(17, 34, 64, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .progress-category {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .progress-category:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            padding: 10px;
        }

        .category-header:hover {
            background: rgba(100, 255, 218, 0.05);
        }

        .category-header i:first-child {
            color: var(--accent-blue);
            font-size: 18px;
            width: 24px;
        }

        .category-header span {
            color: var(--text-primary);
            font-weight: 600;
            flex: 1;
        }

        .category-header .fa-chevron-down {
            color: var(--accent-purple);
            transition: transform 0.3s ease;
        }

        .category-header.active .fa-chevron-down {
            transform: rotate(180deg);
        }

        .category-progress {
            margin-top: 10px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .progress-info strong {
            color: var(--text-primary);
        }

        .progress-info span:last-child {
            color: var(--accent-green);
            font-weight: bold;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-green);
            transition: width 0.5s ease;
        }

        .topics-list, .labs-list, .tests-list {
            background: rgba(10, 25, 47, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }

        .topic-item-small, .lab-item-small, .test-item-small {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .topic-item-small:hover, .lab-item-small:hover, .test-item-small:hover {
            background: rgba(100, 255, 218, 0.05);
            transform: translateX(5px);
        }

        .topic-item-small.completed, .lab-item-small.completed, .test-item-small.completed {
            background: rgba(80, 250, 123, 0.1);
        }

        .topic-check-small, .lab-check-small, .test-check-small {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--accent-purple);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .topic-item-small.completed .topic-check-small,
        .lab-item-small.completed .lab-check-small,
        .test-item-small.completed .test-check-small {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .topic-item-small.completed .topic-check-small i,
        .lab-item-small.completed .lab-check-small i,
        .test-item-small.completed .test-check-small i {
            font-size: 10px;
            color: var(--primary-dark);
        }

        .topic-text-small, .lab-text-small, .test-text-small {
            flex: 1;
            font-size: 12px;
        }

        .topic-text-small .topic-title-small,
        .lab-text-small .lab-title-small,
        .test-text-small .test-title-small {
            color: var(--text-primary);
            font-weight: 500;
        }

        .topic-text-small .topic-meta-small,
        .lab-text-small .lab-meta-small,
        .test-text-small .test-meta-small {
            font-size: 10px;
            color: var(--accent-purple);
            display: flex;
            gap: 5px;
            margin-top: 2px;
        }

        .current-activity {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .activity-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .activity-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        .activity-title h4 {
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .activity-subtitle {
            font-size: 12px;
            color: var(--accent-purple);
        }

        .activity-content {
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .empty-state {
            text-align: center;
            padding: 20px 0;
        }

        .empty-state p {
            margin-bottom: 15px;
        }

        .lecture-info, .lab-info, .test-info {
            animation: fadeIn 0.5s ease;
        }

        .test-score {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(var(--accent-green) 0% 75%, rgba(100, 255, 218, 0.1) 75% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            background: var(--panel-bg);
            border-radius: 50%;
        }

        .score-circle span {
            position: relative;
            z-index: 1;
            font-size: 20px;
            font-weight: bold;
            color: var(--accent-green);
        }

        .score-details {
            flex: 1;
        }

        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .badge.beginner {
            background: rgba(80, 250, 123, 0.2);
            color: var(--accent-green);
        }

        .badge.intermediate {
            background: rgba(241, 250, 140, 0.2);
            color: var(--accent-yellow);
        }

        .badge.advanced {
            background: rgba(255, 85, 85, 0.2);
            color: var(--accent-red);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }
        /* ========== БЛОКИ ОБЩЕГО ПРОГРЕССА ========== */
        .progress-sidebar {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-light);
        }

        .progress-category {
            background: rgba(10, 25, 47, 0.6);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(100, 255, 218, 0.1);
            transition: all 0.3s ease;
        }

        .progress-category:hover {
            transform: translateY(-3px);
            border-color: var(--accent-blue);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .progress-category:last-child {
            margin-bottom: 0;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .category-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .category-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: rgba(100, 255, 218, 0.1);
            color: var(--accent-blue);
        }

        .category-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
        }

        .category-stats {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-percentage {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-green);
        }

        .category-chevron {
            color: var(--accent-purple);
            transition: transform 0.3s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-green);
            border-radius: 4px;
            position: relative;
            transition: width 0.5s ease;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: shimmer 2s infinite;
        }

        /* Списки тем, лаб и тестов */
        .topics-list, .labs-list, .tests-list {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
            max-height: 200px;
            overflow-y: auto;
        }

        .topic-item-small, .lab-item-small, .test-item-small {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(17, 34, 64, 0.5);
        }

        .topic-item-small:hover, .lab-item-small:hover, .test-item-small:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .topic-item-small.completed, .lab-item-small.completed, .test-item-small.completed {
            background: rgba(80, 250, 123, 0.1);
        }

        .topic-check-small, .lab-check-small, .test-check-small {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--accent-purple);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .topic-item-small.completed .topic-check-small,
        .lab-item-small.completed .lab-check-small,
        .test-item-small.completed .test-check-small {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .topic-item-small.completed .topic-check-small i,
        .lab-item-small.completed .lab-check-small i,
        .test-item-small.completed .test-check-small i {
            font-size: 10px;
            color: var(--primary-dark);
        }

        /* ========== СТИЛИ ДЛЯ ТЕОРИИ ========== */
    .theory-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        gap: 25px;
        margin-top: 20px;
    }

    .theory-section {
        background: rgba(17, 34, 64, 0.7);
        border: 1px solid rgba(100, 255, 218, 0.2);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        transition: all 0.3s ease;
    }

    .theory-section:hover {
        transform: translateY(-5px);
        border-color: var(--accent-blue);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .theory-section h4 {
        color: var(--accent-blue);
        margin-bottom: 15px;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .theory-section p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 15px;
    }

    /* Особенности языка */
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .feature-card {
        background: rgba(10, 25, 47, 0.6);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        border: 1px solid rgba(100, 255, 218, 0.1);
        transition: all 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-3px);
        border-color: var(--accent-blue);
    }

    .feature-icon {
        font-size: 32px;
        margin-bottom: 10px;
    }

    .feature-title {
        color: var(--text-primary);
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 16px;
    }

    .feature-desc {
        color: var(--accent-purple);
        font-size: 12px;
        line-height: 1.4;
    }

    /* Области применения */
    .usage-list {
        list-style: none;
        padding: 0;
        margin: 20px 0;
    }

    .usage-list li {
        padding: 12px 15px;
        margin-bottom: 10px;
        background: rgba(10, 25, 47, 0.5);
        border-radius: 10px;
        border-left: 4px solid var(--accent-green);
        display: flex;
        align-items: center;
        gap: 12px;
        transition: all 0.3s ease;
    }

    .usage-list li:hover {
        transform: translateX(5px);
        background: rgba(100, 255, 218, 0.1);
    }

    .usage-list li i {
        color: var(--accent-blue);
        width: 20px;
    }

    /* Примеры кода */
    .code-example {
        background: #1e1e1e;
        border-radius: 12px;
        overflow: hidden;
        margin: 20px 0;
        border: 1px solid rgba(100, 255, 218, 0.2);
    }

    .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: rgba(0, 0, 0, 0.3);
        border-bottom: 1px solid rgba(100, 255, 218, 0.1);
    }

    .code-title {
        display: flex;
        align-items: center;
        gap: 10px;
        color: var(--accent-blue);
        font-weight: 600;
    }

    .code-actions {
        display: flex;
        gap: 10px;
    }

    .code-body {
        padding: 20px;
        overflow-x: auto;
    }

    .code-body pre {
        margin: 0;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 14px;
        line-height: 1.5;
    }

    .code-body code {
        color: #d4d4d4;
    }

    /* Пояснения к коду */
    .explanation-block {
        background: rgba(10, 25, 47, 0.6);
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        border-left: 4px solid var(--accent-purple);
    }

    .explanation-block h5 {
        color: var(--accent-purple);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .explanation-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 12px;
    }

    .explanation-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 12px;
        background: rgba(17, 34, 64, 0.8);
        border-radius: 8px;
    }

    .explanation-number {
        width: 28px;
        height: 28px;
        background: var(--accent-blue);
        color: var(--primary-dark);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
        flex-shrink: 0;
    }

    .explanation-text {
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 1.4;
    }

    .explanation-text code {
        background: rgba(100, 255, 218, 0.1);
        padding: 2px 6px;
        border-radius: 4px;
        color: var(--accent-blue);
        font-family: 'Consolas', monospace;
    }

    /* Практические задания */
    .practice-tasks {
        margin: 20px 0;
    }

    .practice-task {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 15px;
        margin-bottom: 10px;
        background: rgba(10, 25, 47, 0.5);
        border-radius: 10px;
        border: 1px solid rgba(100, 255, 218, 0.1);
        transition: all 0.3s ease;
    }

    .practice-task:hover {
        background: rgba(100, 255, 218, 0.1);
        transform: translateX(5px);
    }

    .practice-task input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--accent-green);
        cursor: pointer;
    }

    .practice-task label {
        color: var(--text-primary);
        cursor: pointer;
        flex: 1;
    }

    /* Типы данных */
    .data-types-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin: 25px 0;
    }

    .data-type-card {
        background: rgba(10, 25, 47, 0.7);
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        border: 2px solid transparent;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .data-type-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
    }

    .data-type-card.integer {
        border-color: #4ECDC4;
    }

    .data-type-card.float {
        border-color: #FF6B6B;
    }

    .data-type-card.char {
        border-color: #FFEAA7;
    }

    .data-type-card.bool {
        border-color: #96CEB4;
    }

    .type-icon {
        font-size: 40px;
        margin-bottom: 15px;
    }

    .type-title {
        color: var(--text-primary);
        font-weight: 700;
        font-size: 18px;
        margin-bottom: 10px;
    }

    .type-examples {
        margin: 15px 0;
        display: flex;
        justify-content: center;
        gap: 8px;
        flex-wrap: wrap;
    }

    .type-examples code {
        background: rgba(255, 255, 255, 0.1);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        color: white;
        font-family: 'Consolas', monospace;
    }

    .type-desc {
        color: var(--text-secondary);
        font-size: 13px;
        line-height: 1.4;
    }

    /* Таблица операций */
    .operations-table {
        overflow-x: auto;
        margin: 25px 0;
        background: rgba(10, 25, 47, 0.6);
        border-radius: 12px;
        padding: 20px;
    }

    .operations-table table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
    }

    .operations-table th {
        padding: 15px;
        text-align: left;
        background: rgba(100, 255, 218, 0.1);
        color: var(--accent-blue);
        font-weight: 600;
        border-bottom: 2px solid var(--accent-blue);
    }

    .operations-table td {
        padding: 12px 15px;
        border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        color: var(--text-secondary);
    }

    .operations-table tr:hover {
        background: rgba(100, 255, 218, 0.05);
    }

    .operations-table code {
        background: rgba(100, 255, 218, 0.1);
        padding: 4px 8px;
        border-radius: 4px;
        color: var(--accent-blue);
        font-family: 'Consolas', monospace;
    }

    /* Интерактивные переменные */
    .interactive-variables {
        background: rgba(10, 25, 47, 0.8);
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
    }

    .variable-control {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(17, 34, 64, 0.6);
        border-radius: 10px;
    }

    .variable-control label {
        color: var(--text-primary);
        font-weight: 600;
        min-width: 120px;
    }

    .variable-control input {
        flex: 1;
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.3);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 16px;
        font-family: 'Consolas', monospace;
        transition: all 0.3s ease;
    }

    .variable-control input:focus {
        outline: none;
        border-color: var(--accent-blue);
        box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
    }

    .operations-result {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 25px;
    }

    .operations-result div {
        padding: 20px;
        background: rgba(100, 255, 218, 0.1);
        border-radius: 10px;
        text-align: center;
        font-family: 'Consolas', monospace;
        font-size: 18px;
        color: var(--accent-green);
        font-weight: 600;
        border: 1px solid rgba(100, 255, 218, 0.2);
    }

    /* Хлебные крошки для теории */
    .breadcrumbs-trail {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 15px 0;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(100, 255, 218, 0.1);
    }

    .breadcrumb-item {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--accent-purple);
        font-size: 14px;
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .breadcrumb-item:hover {
        color: var(--accent-blue);
    }

    .breadcrumb-item.active {
        color: var(--text-primary);
        font-weight: 600;
    }

    .breadcrumb-separator {
        color: var(--accent-purple);
        opacity: 0.5;
    }

    /* Навигация по лекции */
    .lecture-navigation {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 25px 0;
        margin-top: 30px;
        border-top: 1px solid rgba(100, 255, 218, 0.1);
    }

    .nav-button {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 25px;
        background: rgba(100, 255, 218, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.3);
        border-radius: 12px;
        color: var(--accent-blue);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .nav-button:hover {
        background: rgba(100, 255, 218, 0.2);
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(100, 255, 218, 0.1);
    }

    .nav-button.next {
        margin-left: auto;
    }

    /* Прогресс изучения лекции */
    .lecture-progress {
        margin: 20px 0 30px 0;
    }

    .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .progress-label {
        color: var(--text-primary);
        font-weight: 600;
    }

    .progress-percentage {
        color: var(--accent-green);
        font-weight: bold;
        font-size: 18px;
    }

    .progress-bar-container {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: var(--gradient-green);
        border-radius: 4px;
        transition: width 0.5s ease;
    }

/* Адаптивность */
@media (max-width: 768px) {
    .theory-grid {
        grid-template-columns: 1fr;
    }
    
    .features-grid {
        grid-template-columns: 1fr;
    }
    
    .data-types-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .explanation-grid {
        grid-template-columns: 1fr;
    }
    
    .operations-result {
        grid-template-columns: 1fr;
    }
    
    .lecture-navigation {
        flex-direction: column;
        gap: 15px;
    }
    
    .nav-button {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .theory-section {
        padding: 20px 15px;
    }
    
    .data-types-grid {
        grid-template-columns: 1fr;
    }
    
    .variable-control {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .variable-control input {
        width: 100%;
    }
} 

/* Основные карточки */
.beautiful-card {
    background: linear-gradient(135deg, rgba(17, 34, 64, 0.9), rgba(10, 25, 47, 0.95));
    border: 1px solid rgba(100, 255, 218, 0.3);
    border-radius: 24px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(100, 255, 218, 0.1) inset;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
}

.beautiful-card:hover {
    transform: translateY(-8px) scale(1.01);
    border-color: var(--accent-blue);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), 0 0 30px rgba(100, 255, 218, 0.3);
}

.beautiful-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: linear-gradient(90deg, var(--accent-blue), var(--accent-green), var(--accent-purple), var(--accent-yellow));
    z-index: 2;
}

.beautiful-card::after {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(100, 255, 218, 0.1) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.6s ease;
    pointer-events: none;
}

.beautiful-card:hover::after {
    opacity: 1;
}

/* Заголовки лекций */
.lecture-title {
    font-size: 32px;
    font-weight: 800;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(100, 255, 218, 0.3);
    display: flex;
    align-items: center;
    gap: 15px;
}

.lecture-title i {
    font-size: 40px;
    background: linear-gradient(135deg, var(--accent-blue), var(--accent-green));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.lecture-badge {
    display: inline-block;
    padding: 8px 20px;
    border-radius: 40px;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-right: 15px;
}

.badge-lecture {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(80, 250, 123, 0.2));
    color: var(--accent-green);
    border: 1px solid var(--accent-green);
}

/* Красивые секции */
.beautiful-section {
    background: rgba(10, 25, 47, 0.7);
    border-radius: 20px;
    padding: 25px;
    margin: 30px 0;
    border-left: 6px solid var(--accent-blue);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    position: relative;
    backdrop-filter: blur(5px);
}

.beautiful-section h4 {
    font-size: 24px;
    color: var(--accent-blue);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.beautiful-section h4 i {
    font-size: 28px;
}

/* Красивые сетки для особенностей */
.feature-grid-beautiful {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin: 25px 0;
}

.feature-card-beautiful {
    background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 20px;
    padding: 25px;
    text-align: center;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
}

.feature-card-beautiful::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
    transform: translateX(-100%);
    transition: transform 0.4s ease;
}

.feature-card-beautiful:hover::before {
    transform: translateX(0);
}

.feature-card-beautiful:hover {
    transform: translateY(-10px);
    border-color: var(--accent-blue);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.feature-icon-beautiful {
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(80, 250, 123, 0.2));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    color: var(--accent-green);
    border: 2px solid var(--accent-green);
    transition: all 0.4s ease;
}

.feature-card-beautiful:hover .feature-icon-beautiful {
    transform: scale(1.1) rotate(5deg);
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.3), rgba(80, 250, 123, 0.3));
    box-shadow: 0 0 30px rgba(80, 250, 123, 0.5);
}

.feature-title-beautiful {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
}

.feature-desc-beautiful {
    color: var(--text-secondary);
    font-size: 15px;
    line-height: 1.6;
}

/*  блок-схемы */
.flowchart-beautiful {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin: 30px 0;
}

.flowchart-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
}

.flowchart-node {
    min-width: 180px;
    padding: 20px 25px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.15), rgba(80, 250, 123, 0.1));
    border: 2px solid var(--accent-blue);
    border-radius: 16px;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 16px;
    text-align: center;
    position: relative;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

.flowchart-node.start-end {
    background: linear-gradient(135deg, rgba(255, 85, 85, 0.15), rgba(255, 184, 108, 0.1));
    border-color: var(--accent-red);
    border-radius: 40px;
}

.flowchart-node.input-output {
    background: linear-gradient(135deg, rgba(241, 250, 140, 0.15), rgba(255, 184, 108, 0.1));
    border-color: var(--accent-yellow);
}

.flowchart-node.condition {
    background: linear-gradient(135deg, rgba(189, 147, 249, 0.15), rgba(100, 255, 218, 0.1));
    border-color: var(--accent-purple);
    transform: rotate(45deg);
    width: 120px;
    height: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.flowchart-node.condition span {
    transform: rotate(-45deg);
    display: block;
}

.flowchart-arrow {
    color: var(--accent-green);
    font-size: 28px;
    margin: 0 10px;
}

.flowchart-arrow.down {
    display: block;
    margin: 10px 0;
}

/*  таблицы */
.beautiful-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 10px;
    margin: 25px 0;
}

.beautiful-table th {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(80, 250, 123, 0.1));
    color: var(--accent-blue);
    font-weight: 700;
    font-size: 16px;
    padding: 18px 20px;
    text-align: left;
    border-radius: 16px 16px 0 0;
}

.beautiful-table td {
    background: rgba(17, 34, 64, 0.6);
    padding: 16px 20px;
    border-radius: 12px;
    color: var(--text-secondary);
    border-left: 3px solid transparent;
    transition: all 0.3s ease;
}

.beautiful-table tr:hover td {
    background: rgba(100, 255, 218, 0.1);
    border-left-color: var(--accent-blue);
    transform: scale(1.01);
}

/*  примеры кода */
.code-block-beautiful {
    background: #1a1e2a;
    border-radius: 20px;
    padding: 25px;
    margin: 25px 0;
    position: relative;
    border: 1px solid rgba(100, 255, 218, 0.2);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
}

.code-block-beautiful::before {
    content: 'C++';
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 14px;
    font-weight: 700;
    color: var(--accent-green);
    background: rgba(80, 250, 123, 0.15);
    padding: 5px 15px;
    border-radius: 30px;
    border: 1px solid var(--accent-green);
}

.code-block-beautiful pre {
    margin: 0;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 15px;
    line-height: 1.7;
    color: #e6e6e6;
}

.code-block-beautiful code {
    color: #e6e6e6;
}

.code-keyword {
    color: #ff79c6;
}

.code-string {
    color: #f1fa8c;
}

.code-comment {
    color: #6272a4;
}

.code-function {
    color: #50fa7b;
}

.code-number {
    color: #bd93f9;
}

/*  вкладки для вариантов */
.variant-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin: 25px 0;
    padding: 20px;
    background: rgba(10, 25, 47, 0.5);
    border-radius: 20px;
}

.variant-tab {
    padding: 14px 22px;
    background: rgba(17, 34, 64, 0.8);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 40px;
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.variant-tab i {
    color: var(--accent-blue);
    font-size: 16px;
}

.variant-tab:hover {
    background: rgba(100, 255, 218, 0.15);
    border-color: var(--accent-blue);
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

.variant-tab.active {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.25), rgba(80, 250, 123, 0.2));
    border-color: var(--accent-green);
    color: var(--accent-green);
    box-shadow: 0 0 25px rgba(80, 250, 123, 0.3);
}

.variant-content {
    background: rgba(17, 34, 64, 0.6);
    border-radius: 20px;
    padding: 30px;
    margin-top: 20px;
    border: 1px solid rgba(100, 255, 218, 0.2);
    display: none;
}

.variant-content.active {
    display: block;
    animation: fadeInUp 0.5s ease;
}

/*  тесты */
.test-card-beautiful {
    background: linear-gradient(135deg, rgba(17, 34, 64, 0.9), rgba(10, 25, 47, 0.95));
    border: 1px solid var(--accent-purple);
    border-radius: 24px;
    padding: 30px;
    margin: 25px 0;
}

.test-question-beautiful {
    font-size: 22px;
    color: var(--text-primary);
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(100, 255, 218, 0.2);
}

.test-option-beautiful {
    padding: 18px 25px;
    background: rgba(10, 25, 47, 0.7);
    border: 2px solid transparent;
    border-radius: 16px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 20px;
}

.test-option-beautiful:hover {
    background: rgba(100, 255, 218, 0.15);
    border-color: var(--accent-blue);
    transform: translateX(10px);
}

.test-option-beautiful.selected {
    background: rgba(100, 255, 218, 0.2);
    border-color: var(--accent-blue);
    box-shadow: 0 0 30px rgba(100, 255, 218, 0.2);
}

.test-option-beautiful.correct {
    background: rgba(80, 250, 123, 0.2);
    border-color: var(--accent-green);
}

.test-option-beautiful.incorrect {
    background: rgba(255, 85, 85, 0.2);
    border-color: var(--accent-red);
}

.option-marker {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(100, 255, 218, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 18px;
    color: var(--accent-blue);
    flex-shrink: 0;
}

.test-option-beautiful.selected .option-marker {
    background: var(--accent-blue);
    color: var(--primary-dark);
}

/* Анимации */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.pulse-animation {
    animation: pulse 2s infinite;
}

.float-animation {
    animation: float 3s infinite ease-in-out;
}

/*  таймлайны */
.timeline-beautiful {
    position: relative;
    padding: 30px 0;
}

.timeline-beautiful::before {
    content: '';
    position: absolute;
    left: 30px;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg, var(--accent-blue), var(--accent-green), var(--accent-purple));
    border-radius: 4px;
}

.timeline-item {
    position: relative;
    padding-left: 80px;
    margin-bottom: 40px;
}

.timeline-marker {
    position: absolute;
    left: 15px;
    width: 35px;
    height: 35px;
    background: linear-gradient(135deg, var(--accent-blue), var(--accent-green));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 16px;
    border: 3px solid var(--primary-dark);
    box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.3);
}

.timeline-content {
    background: rgba(17, 34, 64, 0.6);
    border-radius: 20px;
    padding: 25px;
    border: 1px solid rgba(100, 255, 218, 0.2);
}

/*  подсказки */
.hint-beautiful {
    background: linear-gradient(135deg, rgba(241, 250, 140, 0.15), rgba(255, 184, 108, 0.1));
    border: 1px solid var(--accent-yellow);
    border-radius: 20px;
    padding: 20px 25px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    gap: 20px;
}

.hint-beautiful i {
    font-size: 32px;
    color: var(--accent-yellow);
    flex-shrink: 0;
}

.hint-beautiful p {
    color: var(--text-secondary);
    font-size: 15px;
    line-height: 1.6;
    margin: 0;
}

/*  предупреждения */
.warning-beautiful {
    background: linear-gradient(135deg, rgba(255, 85, 85, 0.15), rgba(255, 184, 108, 0.1));
    border: 1px solid var(--accent-red);
    border-radius: 20px;
    padding: 20px 25px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    gap: 20px;
}

.warning-beautiful i {
    font-size: 32px;
    color: var(--accent-red);
    flex-shrink: 0;
}

/*  блоки "Важно" */
.important-beautiful {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.15), rgba(80, 250, 123, 0.1));
    border: 1px solid var(--accent-blue);
    border-radius: 20px;
    padding: 25px 30px;
    margin: 30px 0;
    border-left: 8px solid var(--accent-blue);
}

.important-beautiful h5 {
    color: var(--accent-blue);
    font-size: 20px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

/*  счетчики */
.step-counter {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--accent-blue), var(--accent-green));
    border-radius: 12px;
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 18px;
    margin-right: 15px;
    transform: rotate(45deg);
}

.step-counter span {
    transform: rotate(-45deg);
    display: block;
}

/* ========== ТЕРМИНАЛ ДЛЯ ПРОВЕРКИ ЛАБ ========== */
.lab-terminal {
    background: #1e1e1e;
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-top: 20px;
    font-family: 'Consolas', monospace;
}

.terminal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(100, 255, 218, 0.2);
    color: var(--accent-blue);
}

.terminal-output {
    min-height: 150px;
    max-height: 200px;
    overflow-y: auto;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
}

.terminal-line {
    padding: 5px 0;
    font-size: 14px;
    color: var(--text-secondary);
    font-family: 'Consolas', monospace;
}

.terminal-line.success {
    color: var(--accent-green);
}

.terminal-line.error {
    color: var(--accent-red);
}

.terminal-line.input {
    color: var(--accent-blue);
}

.terminal-line::before {
    content: "> ";
    color: var(--accent-purple);
}

.terminal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.terminal-check-btn {
    background: rgba(80, 250, 123, 0.2);
    border: 1px solid var(--accent-green);
    color: var(--accent-green);
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
}

.terminal-check-btn:hover {
    background: rgba(80, 250, 123, 0.3);
    transform: translateY(-2px);
}

/* ========== ПАГИНАЦИЯ ========== */
.pagination {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 30px;
    padding: 20px 0;
}

.pagination-btn {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: rgba(100, 255, 218, 0.1);
    border: 1px solid rgba(100, 255, 218, 0.3);
    color: var(--accent-blue);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

.pagination-btn:hover {
    background: rgba(100, 255, 218, 0.2);
    transform: translateY(-2px);
}

.pagination-btn.active {
    background: rgba(100, 255, 218, 0.3);
    border-color: var(--accent-blue);
    color: white;
}

.pagination-btn.disabled {
    opacity: 0.3;
    cursor: not-allowed;
    pointer-events: none;
}

/* ========== ТЕРМИНАЛ ========== */
.lab-terminal {
    background: #1e1e1e;
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-top: 20px;
    font-family: 'Consolas', monospace;
}

.terminal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(100, 255, 218, 0.2);
    color: var(--accent-blue);
}

.terminal-output {
    min-height: 150px;
    max-height: 200px;
    overflow-y: auto;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
}

.terminal-line {
    padding: 5px 0;
    font-size: 14px;
    color: var(--text-secondary);
    font-family: 'Consolas', monospace;
}

.terminal-line.success {
    color: var(--accent-green);
}

.terminal-line.error {
    color: var(--accent-red);
}

.terminal-line.input {
    color: var(--accent-blue);
}

.terminal-line::before {
    content: "> ";
    color: var(--accent-purple);
}

.terminal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.terminal-check-btn {
    background: rgba(80, 250, 123, 0.2);
    border: 1px solid var(--accent-green);
    color: var(--accent-green);
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
}

.terminal-check-btn:hover {
    background: rgba(80, 250, 123, 0.3);
    transform: translateY(-2px);
}

/* ========== ПРОЕКТЫ ========== */
.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 25px;
    margin-top: 20px;
}

.project-card {
    background: linear-gradient(135deg, rgba(17, 34, 64, 0.8), rgba(10, 25, 47, 0.9));
    border: 1px solid var(--panel-border);
    border-radius: 18px;
    padding: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.project-card:hover {
    transform: translateY(-8px);
    border-color: var(--accent-blue);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
}

.project-tech {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin: 15px 0;
}

.project-tech-tag {
    padding: 4px 10px;
    background: rgba(100, 255, 218, 0.1);
    border-radius: 10px;
    font-size: 11px;
    color: var(--accent-blue);
}


    </style>
</head>
<body>
    <!-- Лоадер -->
    <div id="loader">
        <div class="loader-logo">
            <div class="loader-logo-inner"></div>
            <div class="loader-logo-text">C++</div>
        </div>
        <h2 style="color: var(--accent-blue); margin-bottom: 10px;">Основы алгоритмизации и программирования</h2>
        <p style="color: var(--accent-purple); text-align: center; max-width: 400px;">
            Загрузка интерактивной образовательной платформы...
        </p>
        <div class="loader-progress-container">
            <div class="loader-progress-bar">
                <div class="loader-progress-fill" id="loaderProgress"></div>
            </div>
            <div class="loader-status" id="loaderStatus">Инициализация системы...</div>
        </div>
    </div>

    <!-- Хедер -->
    <header class="header">
        <div class="header-container">
            <!-- Логотип -->
            <a href="#" class="logo-wrapper" onclick="switchSection('home'); return false;">
                <div class="logo">
                    <div class="logo-glow"></div>
                    C++
                </div>
                <div class="logo-text">
                    <div class="logo-main">
                        <span style="display: block;">Основы</span>
                        <span style="display: block;">алгоритмизации</span>
                        <span style="display: block;">и программирования</span>
                    </div>  
                    <div class="logo-sub">Лаборатория C++</div>
                </div>
            </a>


            <!-- Основная навигация -->
                    <nav class="main-nav">
                <button class="nav-item active" data-section="home" onclick="switchSection('home')">
                    <i class="fas fa-home"></i> Главная
                </button>
                <button class="nav-item" data-section="theory" onclick="switchSection('theory')">
                    <i class="fas fa-book"></i> Теория
                </button>
                <button class="nav-item" data-section="labs" onclick="switchSection('labs')">
                    <i class="fas fa-flask"></i> Лабораторные
                </button>
                <button class="nav-item" data-section="tests" onclick="switchSection('tests')">
                    <i class="fas fa-graduation-cap"></i> Тесты
                </button>
                <button class="nav-item" data-section="practice" onclick="switchSection('practice')">
                    <i class="fas fa-code"></i> Практика
                </button>
                <button class="nav-item" data-section="games" onclick="switchSection('games')">
                    <i class="fas fa-gamepad"></i> Игры
                </button>
                <button class="nav-item" data-section="projects" onclick="switchSection('projects')">
                    <i class="fas fa-project-diagram"></i> Проекты
                </button>
            </nav>

            <!-- Блок пользователя -->
            <div class="user-block">
                <div class="user-profile" onclick="openProfileModal()">
                    <div class="user-avatar" id="userAvatar">
                        <!-- Аватар загрузится динамически -->
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Дмитрий</div>
                        <div class="user-rank" id="userRank">46 ТП</div>
                    </div>
                    <i class="fas fa-chevron-down" style="color: var(--accent-purple);"></i>
                </div>
            </div>
        </div>

        <!-- Хлебные крошки -->
        <div class="breadcrumbs" id="breadcrumbs">
            <a href="#" onclick="switchSection('home'); return false;">Главная</a>
        </div>

    <!-- Основной контейнер -->
    <main class="main-container">
                <!-- Левая панель - Общий прогресс -->
        <!-- Левая панель - Общий прогресс -->
        <aside class="sidebar-left">
            <!-- Блок общего прогресса -->
            <div class="progress-sidebar">
                <h3 style="color: var(--accent-blue); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-line"></i> <span id="progressTitle">Общий прогресс</span>
                </h3>
                
                <!-- Прогресс по теориям -->
                <div class="progress-category" id="theoryProgressCategory">
                    <div class="category-header" onclick="toggleProgressSection('theory')">
                        <div class="category-header-left">
                            <div class="category-icon"><i class="fas fa-book"></i></div>
                            <div>
                                <div class="category-title" id="theoryCategoryTitle">Теория</div>
                                <div style="font-size: 12px; color: var(--accent-purple);" id="theoryCategorySub">Темы</div>
                            </div>
                        </div>
                        <div class="category-stats">
                            <div class="category-percentage" id="theoryPercentageHeader">0%</div>
                            <div class="category-chevron"><i class="fas fa-chevron-down" id="theoryChevron"></i></div>
                        </div>
                    </div>
                    <div class="category-progress" id="theoryProgress">
                        <div class="progress-info">
                            <span><span id="completedTheoriesCount">0</span> из <span id="totalTheoriesCount">0</span></span>
                            <span id="theoryPercentage">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-fill" id="theoryProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="topics-list" id="theoryTopicsList" style="display: none;">
                            <!-- Список тем   динамически -->
                        </div>
                    </div>
                </div>
                
                <!-- Прогресс по лабораторным -->
                <div class="progress-category" id="labsProgressCategory">
                    <div class="category-header" onclick="toggleProgressSection('labs')">
                        <div class="category-header-left">
                            <div class="category-icon"><i class="fas fa-flask"></i></div>
                            <div>
                                <div class="category-title" id="labsCategoryTitle">Лабораторные</div>
                                <div style="font-size: 12px; color: var(--accent-purple);" id="labsCategorySub">Лабы</div>
                            </div>
                        </div>
                        <div class="category-stats">
                            <div class="category-percentage" id="labsPercentageHeader">0%</div>
                            <div class="category-chevron"><i class="fas fa-chevron-down" id="labsChevron"></i></div>
                        </div>
                    </div>
                    <div class="category-progress" id="labsProgress">
                        <div class="progress-info">
                            <span><span id="completedLabsCount">0</span> из <span id="totalLabsCount">0</span></span>
                            <span id="labsPercentage">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-fill" id="labsProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="labs-list" id="labsList" style="display: none;">
                            <!-- Список лаб  динамически -->
                        </div>
                    </div>
                </div>
                
                <!-- Прогресс по тестам -->
                <div class="progress-category" id="testsProgressCategory">
                    <div class="category-header" onclick="toggleProgressSection('tests')">
                        <div class="category-header-left">
                            <div class="category-icon"><i class="fas fa-graduation-cap"></i></div>
                            <div>
                                <div class="category-title" id="testsCategoryTitle">Тесты</div>
                                <div style="font-size: 12px; color: var(--accent-purple);" id="testsCategorySub">Тесты</div>
                            </div>
                        </div>
                        <div class="category-stats">
                            <div class="category-percentage" id="testsPercentageHeader">0%</div>
                            <div class="category-chevron"><i class="fas fa-chevron-down" id="testsChevron"></i></div>
                        </div>
                    </div>
                    <div class="category-progress" id="testsProgress">
                        <div class="progress-info">
                            <span><span id="completedTestsCount">0</span> из <span id="totalTestsCount">0</span></span>
                            <span id="testsPercentage">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-fill" id="testsProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="tests-list" id="testsList" style="display: none;">
                            <!-- Список тестов   динамически -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Блок последней активности -->
            <div class="activity-container">
                <div class="content-header" style="padding: 0 0 15px 0; margin-bottom: 0;">
                    <div class="content-title" style="font-size: 18px;">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="activityTitle">Активность за неделю</span>
                    </div>
                </div>
                <div class="activity-calendar" id="activityCalendar">
                    <!-- Календарь   динамически -->
                </div>
            </div>
        </aside>

        <!-- Центральная панель - Контент -->
        <section class="content-main">
            <!-- Главная страница - Последние работы -->
<div id="homeSection" class="content-section active">
    <div class="content-card">
        <div class="content-header">
            <div class="content-title">
                <div class="content-title-icon" style="background: rgba(100, 255, 218, 0.1);">
                    <i class="fas fa-home"></i>
                </div>
                <span>Главная страница</span>
            </div>
            <div class="content-controls">
                <button class="btn btn-outline" onclick="refreshHomeContent()">
                    <i class="fas fa-sync-alt"></i> Обновить
                </button>
            </div>
        </div>
        
        <!-- Заголовок -->
        <div style="text-align: center; margin-bottom: 30px;">
            <h3 style="color: var(--accent-blue); margin-bottom: 10px;">
                <i class="fas fa-clock"></i> Текущий прогресс
            </h3>
            <p style="color: var(--text-secondary);">
                Продолжите с того места, где остановились
            </p>
        </div>

        <!-- Сетка последних работ В РЯД -->
        <div class="recent-works-grid" style="display: flex; gap: 25px; flex-wrap: wrap; justify-content: center;">
            
            <!-- Последняя лекция -->
            <div class="activity-card large" style="flex: 1; min-width: 300px; max-width: 400px;">
                <div class="activity-header">
                    <div class="activity-icon" style="background: rgba(100, 255, 218, 0.1);">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="activity-title">
                        <h4>Последняя лекция</h4>
                        <div class="activity-subtitle" id="lastLectureSubtitle">Не изучено</div>
                    </div>
                </div>
                <div class="activity-content" id="lastLectureContent">
                    <div class="empty-state" id="emptyLectureState">
                        <i class="fas fa-book" style="font-size: 48px; color: var(--accent-purple); opacity: 0.5; margin-bottom: 15px;"></i>
                        <p style="color: var(--text-secondary); text-align: center;">Вы еще не начали изучать лекции</p>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="startLearningPath()">
                            <i class="fas fa-play"></i> Начать обучение
                        </button>
                    </div>
                    <div class="lecture-info" id="lastLectureInfo" style="display: none;">
                        <h5 id="lastLectureTitle" style="font-size: 18px; margin-bottom: 10px;"></h5>
                        <p id="lastLectureDescription" style="color: var(--text-secondary); font-size: 14px; margin: 10px 0 15px 0; line-height: 1.5;"></p>
                        <div class="lecture-meta" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <span class="badge" id="lastLectureDifficulty" style="font-size: 12px;"></span>
                            <div style="display: flex; gap: 15px;">
                                <span style="color: var(--accent-purple); font-size: 12px;">
                                    <i class="fas fa-clock"></i> <span id="lastLectureDuration"></span> мин
                                </span>
                                <span style="color: var(--accent-blue); font-size: 12px;">
                                    <i class="fas fa-star"></i> <span id="lastLecturePoints"></span> баллов
                                </span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="continueLastLecture()">
                                <i class="fas fa-play"></i> Продолжить
                            </button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="reviewLastLecture()">
                                <i class="fas fa-eye"></i> Обзор
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Последняя лабораторная -->
            <div class="activity-card large" style="flex: 1; min-width: 300px; max-width: 400px;">
                <div class="activity-header">
                    <div class="activity-icon" style="background: rgba(80, 250, 123, 0.1);">
                        <i class="fas fa-flask"></i>
                    </div>
                    <div class="activity-title">
                        <h4>Последняя лабораторная</h4>
                        <div class="activity-subtitle" id="lastLabSubtitle">Не начато</div>
                    </div>
                </div>
                <div class="activity-content" id="lastLabContent">
                    <div class="empty-state" id="emptyLabState">
                        <i class="fas fa-flask" style="font-size: 48px; color: var(--accent-purple); opacity: 0.5; margin-bottom: 15px;"></i>
                        <p style="color: var(--text-secondary); text-align: center;">Вы еще не начали лабораторные работы</p>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="createNewLab()">
                            <i class="fas fa-plus"></i> Начать лабу
                        </button>
                    </div>
                    <div class="lab-info" id="lastLabInfo" style="display: none;">
                        <h5 id="lastLabTitle" style="font-size: 18px; margin-bottom: 10px;"></h5>
                        <p id="lastLabDescription" style="color: var(--text-secondary); font-size: 14px; margin: 10px 0 15px 0; line-height: 1.5;"></p>
                        <div class="lab-meta" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <span class="badge" id="lastLabDifficulty" style="font-size: 12px;"></span>
                            <div style="display: flex; gap: 15px;">
                                <span style="color: var(--accent-purple); font-size: 12px;">
                                    <i class="fas fa-clock"></i> <span id="lastLabDuration"></span> мин
                                </span>
                                <span style="color: var(--accent-blue); font-size: 12px;">
                                    <i class="fas fa-star"></i> <span id="lastLabPoints"></span> баллов
                                </span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="continueLastLab()">
                                <i class="fas fa-play"></i> Продолжить
                            </button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="viewLabDetails()">
                                <i class="fas fa-info-circle"></i> Подробнее
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Последний тест -->
            <div class="activity-card large" style="flex: 1; min-width: 300px; max-width: 400px;">
                <div class="activity-header">
                    <div class="activity-icon" style="background: rgba(241, 250, 140, 0.1);">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="activity-title">
                        <h4>Последний тест</h4>
                        <div class="activity-subtitle" id="lastTestSubtitle">Не пройден</div>
                    </div>
                </div>
                <div class="activity-content" id="lastTestContent">
                    <div class="empty-state" id="emptyTestState">
                        <i class="fas fa-graduation-cap" style="font-size: 48px; color: var(--accent-purple); opacity: 0.5; margin-bottom: 15px;"></i>
                        <p style="color: var(--text-secondary); text-align: center;">Вы еще не проходили тесты</p>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="showTestsList()">
                            <i class="fas fa-play"></i> Пройти тест
                        </button>
                    </div>
                    <div class="test-info" id="lastTestInfo" style="display: none;">
                        <h5 id="lastTestTitle" style="font-size: 18px; margin-bottom: 10px;"></h5>
                        
                        <!-- Круг с результатом -->
                        <div class="test-score" style="display: flex; align-items: center; gap: 20px; margin: 20px 0;">
                            <div class="score-circle" style="position: relative; width: 100px; height: 100px;">
                                <svg width="100" height="100" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="rgba(100, 255, 218, 0.1)" stroke-width="8"/>
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="var(--accent-green)" 
                                            stroke-width="8" stroke-linecap="round" 
                                            stroke-dasharray="283" 
                                            stroke-dashoffset="283" id="testScoreCircle"/>
                                </svg>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                    <div style="font-size: 24px; font-weight: bold; color: var(--accent-green);" id="lastTestScore">0%</div>
                                    <div style="font-size: 12px; color: var(--accent-purple);">результат</div>
                                </div>
                            </div>
                            <div class="score-details" style="flex: 1;">
                                <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 10px;">
                                    Правильных ответов: <strong id="lastTestCorrect">0</strong> из <strong id="lastTestTotal">0</strong>
                                </div>
                                <div style="color: var(--accent-purple); font-size: 12px; margin-bottom: 5px;">
                                    <i class="fas fa-clock"></i> Время: <span id="lastTestTime">0:00</span>
                                </div>
                                <div style="color: var(--accent-purple); font-size: 12px;">
                                    <i class="fas fa-calendar"></i> Дата: <span id="lastTestDate"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="retryLastTest()">
                                <i class="fas fa-redo"></i> Пройти снова
                            </button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="reviewTestAnswers()">
                                <i class="fas fa-search"></i> Посмотреть ответы
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
</div>

           <!-- Теория -->
        <div id="theorySection" class="content-section">
            <div class="content-card">
                <div class="content-header">
                    <div class="content-title">
                        <div class="content-title-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <span>Теория C++</span>
                    </div>
                    <div class="content-controls">
                        <button class="btn btn-outline" onclick="filterTheories('all')">
                            Все
                        </button>
                        <button class="btn btn-outline" onclick="filterTheories('completed')">
                            Завершенные
                        </button>
                    </div>
                </div>
                
                
                
                <!-- Сетка с темами -->
                <div class="labs-grid" id="theoryGrid">
                    <!-- Темы   динамически -->
                </div>
                <div class="pagination" id="theoryPagination"></div>
            </div>
        </div>

            <!-- Лабораторные работы -->
            <div id="labsSection" class="content-section">
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title">
                            <div class="content-title-icon" style="background: rgba(80, 250, 123, 0.1); color: var(--accent-green);">
                                <i class="fas fa-flask"></i>
                            </div>
                            <span>Лабораторные работы</span>
                        </div>
                        <div class="content-controls">
                            <button class="btn btn-outline" onclick="filterLabs('all')">
                                Все
                            </button>
                            <button class="btn btn-outline" onclick="filterLabs('completed')">
                                Завершенные
                            </button>
                        </div>
                    </div>
                    
                    <div class="labs-grid" id="labsGrid">
                        <!-- Лабораторные работы   динамически -->
                    </div>
                    <div class="pagination" id="labsPagination"></div>
                </div>
            </div>

            <!-- Тесты -->
            <div id="testsSection" class="content-section">
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title">
                            <div class="content-title-icon" style="background: rgba(241, 250, 140, 0.1); color: var(--accent-yellow);">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <span>Тестирование знаний</span>
                        </div>
                        <div class="content-controls">
                            <button class="btn btn-outline" onclick="resetTest()">
                                <i class="fas fa-redo"></i> Сброс
                            </button>
                            <button class="btn btn-primary" id="submitTestBtn" onclick="submitTest()" style="display: none;">
                                <i class="fas fa-paper-plane"></i> Завершить тест
                            </button>
                        </div>
                    </div>
                    <div id="testContainer">
                        <!-- Контейнер для тестов -->
                    </div>
                </div>
            </div>

            <!-- Практика -->
            <div id="practiceSection" class="content-section">
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title">
                            <div class="content-title-icon" style="background: rgba(100, 255, 218, 0.1);">
                                <i class="fas fa-code"></i>
                            </div>
                            <span id="practiceTitle">Практика программирования</span>
                        </div>
                        <div class="content-controls">
                            <button class="btn btn-outline" onclick="saveCode()">
                                <i class="fas fa-save"></i> Сохранить
                            </button>
                            <button class="btn btn-primary" onclick="runCode()">
                                <i class="fas fa-play"></i> Запуск
                            </button>
                            <button class="btn btn-outline" onclick="debugCode()">
                                <i class="fas fa-bug"></i> Отладка
                            </button>
                        </div>
                    </div>
                    
                
                    <div class="practice-container">
                        <!-- Файловый менеджер -->
                        <div class="editor-header">
                            <div class="file-tabs" id="fileTabs">
                                <!-- Вкладки файлов -->
                            </div>
                            <div class="editor-controls">
                                <button class="btn btn-small btn-outline" onclick="createNewFile()">
                                    <i class="fas fa-plus"></i> Файл
                                </button>
                                <button class="btn btn-small btn-outline" onclick="createNewFolder()">
                                    <i class="fas fa-folder-plus"></i> Папка
                                </button>
                                <button class="btn btn-small btn-outline" onclick="deleteFile()">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                                <button class="btn btn-small btn-outline" onclick="renameFile()">
                                    <i class="fas fa-edit"></i> Переименовать
                                </button>
                            </div>
                        </div>

                        <!-- Редактор кода -->
                        <div class="code-editor-container">
                            <textarea id="codeEditor"></textarea>
                        </div>

                        <!-- Вывод программы -->
                        <div class="editor-output">
                            <div class="output-header">
                                <div style="color: var(--accent-blue); font-weight: 600;">
                                    <i class="fas fa-terminal"></i> Вывод программы:
                                </div>
                                <div>
                                    <button class="btn btn-small btn-outline" onclick="clearOutput()">
                                        <i class="fas fa-broom"></i> Очистить
                                    </button>
                                </div>
                            </div>
                            <div id="programOutput">
                                <!-- Вывод программы -->
                            </div>
                        </div>
                            <div class="memory-visualization" id="memoryVisualization">
                                <!-- Ячейки памяти -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Игры -->
            <div id="gamesSection" class="content-section">
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title">
                            <div class="content-title-icon" style="background: rgba(255, 184, 108, 0.1); color: var(--accent-orange);">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <span>Игровое обучение</span>
                        </div>
                        <div class="content-controls">
                            <button class="btn btn-outline" onclick="showAllGames()">
                                Все игры
                            </button>
                            <button class="btn btn-outline" onclick="showLeaderboard()">
                                <i class="fas fa-trophy"></i> Таблица лидеров
                            </button>
                        </div>
                    </div>
                    <div class="games-container" id="gamesContainer">
                        <!-- Игры   динамически -->
                    </div>
                </div>
            </div>

            <!-- Проекты -->
            <div id="projectsSection" class="content-section">
                <div class="content-card">
                    <div class="content-header">
                        <div class="content-title">
                            <div class="content-title-icon" style="background: rgba(189, 147, 249, 0.1); color: #bd93f9;">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <span>Проекты</span>
                        </div>
                        <div class="content-controls">
                            <button class="btn btn-outline" onclick="showAllProjects()">
                                Все проекты
                            </button>
                            <button class="btn btn-primary" onclick="createNewProject()">
                                <i class="fas fa-plus"></i> Новый проект
                            </button>
                            <button class="btn btn-outline" onclick="importProject()">
                                <i class="fas fa-file-import"></i> Импорт
                            </button>
                        </div>
                    </div>
                    <div class="projects-grid" id="projectsGrid">
                        <!-- Проекты  динамически -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Правая панель - Профиль и статистика -->
        <aside class="sidebar-right">
            <!-- Карточка профиля -->
            <div class="profile-card">
                <div class="profile-avatar" id="profileAvatar" onclick="openAvatarEditor()">
                    <i class="fas fa-user"></i>
                    <div class="avatar-level" id="avatarLevel">5</div>
                </div>
                <div class="profile-info">
                    <h3 id="profileName">Дмитрий</h3>
                    <div class="profile-rank" id="profileRank">46 ТП</div>
                </div>

                <div class="xp-progress">
                    <div class="xp-bar">
                        <div class="xp-fill" id="xpBarFill"></div>
                    </div>
                    <div class="xp-info">
                        <span>Уровень 5</span>
                        <span id="xpText">245/500 XP</span>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="completedTopics">8</div>
                        <div class="stat-label">Темы</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completedLabs">5</div>
                        <div class="stat-label">Лабораторные</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="codeLines">1247</div>
                        <div class="stat-label">Строк кода</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="achievementCount">12</div>
                        <div class="stat-label">Достижения</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn btn-small btn-outline" style="flex: 1;" onclick="openSettings()">
                        <i class="fas fa-cog"></i> Настройки
                    </button>
                    <button class="btn btn-small btn-outline" style="flex: 1;" onclick="generateCertificate()">
                        <i class="fas fa-award"></i> Сертификат
                    </button>
                </div>
            </div>

            <!-- Достижения -->
            <div class="achievements-container">
                <div class="content-header" style="padding: 0 0 15px 0; margin-bottom: 0;">
                    <div class="content-title" style="font-size: 18px;">
                        <i class="fas fa-trophy" style="color: var(--accent-yellow);"></i>
                        <span>Достижения</span>
                    </div>
                    <button class="btn btn-small btn-outline" onclick="showAllAchievements()">
                        Все
                    </button>
                </div>
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Достижения  динамически -->
                </div>
            </div>
        </aside>
    </main>

       <!-- Модальное окно профиля -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal-container" style="max-width: 1200px;">
            <div class="modal-header">
                <h2><i class="fas fa-user-circle"></i> Профиль и статистика</h2>
                <button class="btn btn-outline" onclick="closeModal()">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
            <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                <div class="profile-modal-content" style="display: grid; grid-template-columns: 350px 1fr; gap: 30px;">
                    <!-- Левая колонка - Информация о пользователе -->
                    <div class="profile-sidebar">
                        <div class="profile-card" style="padding: 25px;">
                            <div class="profile-avatar" style="width: 120px; height: 120px; font-size: 48px; margin: 0 auto 20px;" onclick="openAvatarEditor()">
                                <div class="avatar-level" id="modalAvatarLevel">5</div>
                            </div>
                            <h3 style="text-align: center; margin-bottom: 5px;" id="modalUserName">Дмитрий</h3>
                            <div class="profile-rank" style="text-align: center; margin-bottom: 25px;" id="modalUserRank">46 ТП</div>
                            
                            <div class="profile-stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div class="stat-large" style="background: rgba(10, 25, 47, 0.8); border-radius: 15px; padding: 20px; text-align: center;">
                                    <div class="stat-large-value" style="font-size: 28px; font-weight: bold; color: var(--accent-green);" id="modalCurrentXP">245</div>
                                    <div class="stat-large-label" style="font-size: 12px; color: var(--accent-purple);">Текущий XP</div>
                                </div>
                                <div class="stat-large" style="background: rgba(10, 25, 47, 0.8); border-radius: 15px; padding: 20px; text-align: center;">
                                    <div class="stat-large-value" style="font-size: 28px; font-weight: bold; color: var(--accent-green);" id="modalStreak">7</div>
                                    <div class="stat-large-label" style="font-size: 12px; color: var(--accent-purple);">Дней подряд</div>
                                </div>
                                <div class="stat-large" style="background: rgba(10, 25, 47, 0.8); border-radius: 15px; padding: 20px; text-align: center;">
                                    <div class="stat-large-value" style="font-size: 28px; font-weight: bold; color: var(--accent-green);" id="modalSuccessRate">87%</div>
                                    <div class="stat-large-label" style="font-size: 12px; color: var(--accent-purple);">Успеваемость</div>
                                </div>
                                <div class="stat-large" style="background: rgba(10, 25, 47, 0.8); border-radius: 15px; padding: 20px; text-align: center;">
                                    <div class="stat-large-value" style="font-size: 28px; font-weight: bold; color: var(--accent-green);" id="modalTotalTime">24ч</div>
                                    <div class="stat-large-label" style="font-size: 12px; color: var(--accent-purple);">Время обучения</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 25px;">
                                <button class="btn btn-outline" style="width: 100%; margin-bottom: 10px; justify-content: center;" onclick="openSettings()">
                                    <i class="fas fa-cog"></i> Настройки профиля
                                </button>
                                <button class="btn btn-outline" style="width: 100%; margin-bottom: 10px; justify-content: center;" onclick="exportUserData()">
                                    <i class="fas fa-download"></i> Экспорт данных
                                </button>
                                <button class="btn btn-outline" style="width: 100%; justify-content: center;" onclick="resetProgress()">
                                    <i class="fas fa-trash"></i> Сбросить прогресс
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Правая колонка - Статистика и достижения -->
                    <div style="display: flex; flex-direction: column; gap: 25px;">
                        <!-- График прогресса -->
                        <div class="stats-chart-container" style="background: var(--panel-bg); border: 1px solid var(--panel-border); border-radius: 15px; padding: 20px;">
                            <h3 style="color: var(--accent-blue); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-chart-bar"></i> Прогресс по модулям
                            </h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="progressChart" class="chart-canvas"></canvas>
                            </div>
                        </div>
                        
                        <!-- Диаграмма навыков -->
                        <div class="stats-chart-container" style="background: var(--panel-bg); border: 1px solid var(--panel-border); border-radius: 15px; padding: 20px;">
                            <h3 style="color: var(--accent-blue); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-brain"></i> Навыки программирования
                            </h3>
                            <div class="skills-chart" id="skillsChart">
                                <!--  initSkillsChart() -->
                            </div>
                        </div>
                        
                        <!-- Достижения (ВСЕ) -->
                        <div class="stats-chart-container" style="background: var(--panel-bg); border: 1px solid var(--panel-border); border-radius: 15px; padding: 20px;">
                            <h3 style="color: var(--accent-blue); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-trophy"></i> Все достижения
                            </h3>
                            <div class="achievements-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;" id="modalAchievements">
                                <!-- Достижения   динамически -->
                            </div>
                        </div>
                        
                        <!-- Последняя активность -->
                        <div class="stats-chart-container" style="background: var(--panel-bg); border: 1px solid var(--panel-border); border-radius: 15px; padding: 20px;">
                            <h3 style="color: var(--accent-blue); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-history"></i> Последние действия
                            </h3>
                            <div class="activity-list" id="modalActivityList" style="max-height: 200px; overflow-y: auto;">
                                <!-- Активность   динамически -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="avatarModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2><i class="fas fa-user-edit"></i> Редактор аватара</h2>
                <button class="btn btn-outline" onclick="closeModal()">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
            <div class="modal-body">
                <div class="avatar-editor-container">
                    <div class="avatar-preview-container" id="avatarDropZone">
                        <img id="avatarPreview" class="avatar-preview" src="" alt="Предпросмотр аватара">
                        <div id="avatarPlaceholder" style="text-align: center;">
                            <div class="file-upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <p style="color: var(--accent-blue); margin-bottom: 10px;">
                                Перетащите изображение сюда или кликните для загрузки
                            </p>
                            <p style="font-size: 12px; color: var(--accent-purple);">
                                Поддерживаемые форматы: JPG, PNG, WEBP<br>
                                Максимальный размер: 5MB
                            </p>
                        </div>
                    </div>
                    
                    <input type="file" id="avatarUpload" accept="image/*" style="display: none;" onchange="handleAvatarUpload(event)">
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="document.getElementById('avatarUpload').click()">
                            <i class="fas fa-upload"></i> Загрузить фото
                        </button>
                        <button class="btn btn-outline" style="flex: 1;" onclick="generateAvatar()">
                            <i class="fas fa-robot"></i> Сгенерировать
                        </button>
                    </div>
                    
                    <div class="avatar-controls">
                        <div class="avatar-control" onclick="applyFilter('brightness')">
                            <i class="fas fa-sun"></i>
                            <div>Яркость</div>
                        </div>
                        <div class="avatar-control" onclick="applyFilter('contrast')">
                            <i class="fas fa-adjust"></i>
                            <div>Контраст</div>
                        </div>
                        <div class="avatar-control" onclick="applyFilter('grayscale')">
                            <i class="fas fa-tint-slash"></i>
                            <div>Ч/Б</div>
                        </div>
                        <div class="avatar-control" onclick="applyFilter('sepia')">
                            <i class="fas fa-image"></i>
                            <div>Сепия</div>
                        </div>
                        <div class="avatar-control" onclick="addFrame()">
                            <i class="fas fa-square"></i>
                            <div>Рамка</div>
                        </div>
                        <div class="avatar-control" onclick="addSticker()">
                            <i class="fas fa-sticky-note"></i>
                            <div>Стикер</div>
                        </div>
                        <div class="avatar-control" onclick="cropAvatar()">
                            <i class="fas fa-crop"></i>
                            <div>Обрезать</div>
                        </div>
                        <div class="avatar-control" onclick="resetAvatar()">
                            <i class="fas fa-undo"></i>
                            <div>Сброс</div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: var(--accent-blue); margin: 20px 0 10px 0;">История аватарок</h4>
                        <div class="avatar-history" id="avatarHistory">
                            <!-- История аватарок -->
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        <button class="btn btn-primary" style="flex: 1;" onclick="saveAvatar()">
                            <i class="fas fa-save"></i> Сохранить аватар
                        </button>
                        <button class="btn btn-outline" style="flex: 1;" onclick="exportAvatar()">
                            <i class="fas fa-download"></i> Экспорт PNG
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="settingsModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Настройки</h2>
                <button class="btn btn-outline" onclick="closeModal()">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-container">
                    <div class="settings-nav">
                        <div class="settings-nav-item active" onclick="showSettingsSection('appearance')">
                            <i class="fas fa-palette"></i> Внешний вид
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('editor')">
                            <i class="fas fa-code"></i> Редактор
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('account')">
                            <i class="fas fa-user"></i> Аккаунт
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('notifications')">
                            <i class="fas fa-bell"></i> Уведомления
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('accessibility')">
                            <i class="fas fa-universal-access"></i> Доступность
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('data')">
                            <i class="fas fa-database"></i> Данные
                        </div>
                        <div class="settings-nav-item" onclick="showSettingsSection('language')">
                            <i class="fas fa-language"></i> Язык
                        </div>
                    </div>
                    
                    <div class="settings-content">
                        <div class="settings-section active" id="appearanceSection">
                            <div class="settings-group">
                                <h3 class="settings-group-title">Тема оформления</h3>
                                <div class="theme-selector">
                                    <div class="theme-option theme-dark selected" onclick="changeTheme('dark')">
                                        <div class="theme-preview">
                                            <i class="fas fa-moon"></i>
                                        </div>
                                        <div>Темная</div>
                                    </div>
                                    <div class="theme-option theme-light" onclick="changeTheme('light')">
                                        <div class="theme-preview">
                                            <i class="fas fa-sun"></i>
                                        </div>
                                        <div>Светлая</div>
                                    </div>
                                    <div class="theme-option theme-blue" onclick="changeTheme('blue')">
                                        <div class="theme-preview">
                                            <i class="fas fa-palette"></i>
                                        </div>
                                        <div>Синяя</div>
                                    </div>
                                    <div class="theme-option theme-green" onclick="changeTheme('green')">
                                        <div class="theme-preview">
                                            <i class="fas fa-leaf"></i>
                                        </div>
                                        <div>Зеленая</div>
                                    </div>
                                    <div class="theme-option theme-purple" onclick="changeTheme('purple')">
                                        <div class="theme-preview">
                                            <i class="fas fa-gem"></i>
                                        </div>
                                        <div>Фиолетовая</div>
                                    </div>
                                    <div class="theme-option theme-high-contrast" onclick="changeTheme('high-contrast')">
                                        <div class="theme-preview">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div>Высокий контраст</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-group">
                                <h3 class="settings-group-title">Настройки интерфейса</h3>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Компактный режим</div>
                                        <div class="setting-description">Уменьшить отступы и размеры элементов</div>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="compactModeToggle" onchange="toggleCompactMode(this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Анимации</div>
                                        <div class="setting-description">Включить/выключить анимации интерфейса</div>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="animationsToggle" checked onchange="toggleAnimations(this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-section" id="editorSection">
                            <div class="settings-group">
                                <h3 class="settings-group-title">Редактор кода</h3>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Размер шрифта</div>
                                        <div class="setting-description">Размер текста в редакторе</div>
                                    </div>
                                    <div class="setting-control">
                                        <select class="filter-select" id="editorFontSize" onchange="changeEditorFontSize(this.value)">
                                            <option value="12">12px</option>
                                            <option value="14" selected>14px</option>
                                            <option value="16">16px</option>
                                            <option value="18">18px</option>
                                            <option value="20">20px</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Автодополнение</div>
                                        <div class="setting-description">Подсказки при наборе кода</div>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="autocompleteToggle" checked onchange="toggleAutocomplete(this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Автосохранение</div>
                                        <div class="setting-description">Автоматически сохранять изменения</div>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="autosaveToggle" checked onchange="toggleAutosave(this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-name">Подсветка синтаксиса</div>
                                        <div class="setting-description">Цветовое выделение кода</div>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch">
                                                <input type="checkbox" id="syntaxToggle" checked onchange="toggleSyntaxHighlighting(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Отступы</div>
                                            <div class="setting-description">Размер отступа (пробелов)</div>
                                        </div>
                                        <div class="setting-control">
                                            <select class="filter-select" id="tabSizeSelect" onchange="changeTabSize(this.value)">
                                                <option value="2">2 пробела</option>
                                                <option value="4" selected>4 пробела</option>
                                                <option value="8">8 пробелов</option>
                                                <option value="tab">Tab</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section" id="accountSection">
                                <div class="settings-group">
                                    <h3 class="settings-group-title">Персональные данные</h3>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Имя</div>
                                            <div class="setting-description">Ваше имя и фамилия</div>
                                        </div>
                                        <div class="setting-control">
                                            <input type="text" class="search-input" id="userNameInput" value="Дмитрий" style="width: 200px;" 
                                                   onchange="updateUserName(this.value)">
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Никнейм</div>
                                            <div class="setting-description">Уникальное имя пользователя</div>
                                        </div>
                                        <div class="setting-control">
                                            <input type="text" class="search-input" id="userNicknameInput" value="dmitry.makarchikov" style="width: 200px;"
                                                   onchange="updateUserNickname(this.value)">
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Email</div>
                                            <div class="setting-description">Электронная почта</div>
                                        </div>
                                        <div class="setting-control">
                                            <input type="email" class="search-input" id="userEmailInput" value="dmitry.makarchikov.it@gmail.com" style="width: 200px;"
                                                   onchange="updateUserEmail(this.value)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section" id="notificationsSection">
                                <div class="settings-group">
                                    <h3 class="settings-group-title">Уведомления</h3>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Системные уведомления</div>
                                            <div class="setting-description">Показывать системные уведомления</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="systemNotificationsToggle" checked onchange="toggleSystemNotifications(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Уведомления о достижениях</div>
                                            <div class="setting-description">Оповещать о новых достижениях</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="achievementNotificationsToggle" checked onchange="toggleAchievementNotifications(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Прогресс обучения</div>
                                            <div class="setting-description">Ежедневные напоминания об обучении</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="progressNotificationsToggle" checked onchange="toggleProgressNotifications(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section" id="accessibilitySection">
                                <div class="settings-group">
                                    <h3 class="settings-group-title">Доступность</h3>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Высокий контраст</div>
                                            <div class="setting-description">Увеличить контрастность интерфейса</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="highContrastToggle" onchange="toggleHighContrast(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Увеличение шрифта</div>
                                            <div class="setting-description">Увеличить размер всех шрифтов</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="largeFontToggle" onchange="toggleLargeFont(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Упрощенная навигация</div>
                                            <div class="setting-description">Упростить навигацию по платформе</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="simpleNavToggle" onchange="toggleSimpleNavigation(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section" id="dataSection">
                                <div class="settings-group">
                                    <h3 class="settings-group-title">Управление данными</h3>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Автосохранение</div>
                                            <div class="setting-description">Автоматическое сохранение прогресса</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="autoSaveDataToggle" checked onchange="toggleAutoSaveData(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Резервные копии</div>
                                            <div class="setting-description">Создавать резервные копии каждые 30 минут</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="backupsToggle" checked onchange="toggleBackups(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div style="margin-top: 30px;">
                                        <button class="btn btn-outline" onclick="exportAllData()" style="width: 100%; margin-bottom: 10px;">
                                            <i class="fas fa-download"></i> Экспорт всех данных
                                        </button>
                                        <button class="btn btn-outline" onclick="importData()" style="width: 100%; margin-bottom: 10px;">
                                            <i class="fas fa-file-import"></i> Импорт данных
                                        </button>
                                        <button class="btn btn-outline" onclick="clearAllData()" style="width: 100%;">
                                            <i class="fas fa-trash"></i> Очистить все данные
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section" id="languageSection">
                                <div class="settings-group">
                                    <h3 class="settings-group-title">Язык интерфейса</h3>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Основной язык</div>
                                            <div class="setting-description">Выберите язык интерфейса</div>
                                        </div>
                                        <div class="setting-control">
                                            <select class="filter-select" id="languageSelect" onchange="changeLanguage(this.value)">
                                                <option value="ru">Русский</option>
                                                <option value="by">Беларуская</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-label">
                                            <div class="setting-name">Автоперевод контента</div>
                                            <div class="setting-description">Автоматически переводить учебные материалы</div>
                                        </div>
                                        <div class="setting-control">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="autoTranslateToggle" onchange="toggleAutoTranslate(this.checked)">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="certificateModal">
                        <div class="modal-container" style="max-width: 900px;">
                            <div class="modal-header">
                                <h2><i class="fas fa-award"></i> Сертификат об обучении</h2>
                                <button class="btn btn-outline" onclick="closeModal()">
                                    <i class="fas fa-times"></i> Закрыть
                                </button>
                            </div>
                            <div class="modal-body">
                            <div class="certificate-wrapper">
                        <div class="certificate-container" id="certificateCanvas">
                        <!-- Фон с декоративными элементами -->
                        <div class="certificate-bg-pattern"></div>
                        <div class="certificate-corner certificate-corner-tl"></div>
                        <div class="certificate-corner certificate-corner-tr"></div>
                        <div class="certificate-corner certificate-corner-bl"></div>
                        <div class="certificate-corner certificate-corner-br"></div>
                        
                        <!-- Эмблема -->
                        <div class="certificate-seal">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        
                        <!-- Заголовок -->
                        <div class="certificate-header">
                            <div class="certificate-header-main">СЕРТИФИКАТ</div>
                            <div class="certificate-header-sub">ОБ ОБУЧЕНИИ</div>
                        </div>
                        
                        <!-- Основное содержание -->
                        <div class="certificate-body">
                            <div class="certificate-presented">
                                Настоящим удостоверяется, что
                            </div>
                            
                            <div class="certificate-name" id="certificateName">
                                ДМИТРИЙ ИВАНОВ
                            </div>
                            
                            <div class="certificate-achievement">
                                успешно завершил(а) полный курс обучения по программе
                            </div>
                            
                            <div class="certificate-course">
                                «Основы алгоритмизации и программирования на C++»
                            </div>
                            
                            <!-- Детали -->
                            <div class="certificate-details">
                                <div class="detail-row">
                                    <span class="detail-label">Уровень освоения:</span>
                                    <span class="detail-value" id="certificateLevel">ЗНАТОК</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Итоговый результат:</span>
                                    <span class="detail-value" id="certificateScore">87%</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Объём программы:</span>
                                    <span class="detail-value">72 академических часа</span>
                                </div>
                            </div>
                            
                            <!-- Программа -->
                            <div class="certificate-curriculum">
                                <p>Программа курса включает:</p>
                                <ul>
                                    <li>Основы синтаксиса C++ и ООП</li>
                                    <li>Алгоритмы и структуры данных</li>
                                    <li>Работу с памятью и указателями</li>
                                    <li>5 лабораторных работ</li>
                                    <li>3 практических проекта</li>
                                </ul>
                            </div>
                            
                            <!-- Футер -->
                            <div class="certificate-footer">
                                <div class="certificate-date">
                                    Дата выдачи: <span id="certificateDate">15 марта 2024 года</span>
                                </div>
                                
                                <div class="certificate-signatures">
                                    <div class="signature">
                                        <div class="signature-line"></div>
                                        <div class="signature-name">Проф. А.И. Петров</div>
                                        <div class="signature-title">Преподаватель курса</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Печать -->
                        <div class="certificate-stamp">
                            УДОСТОВЕРЕНО<br>
                            ОАиП<br>
                            <span style="font-size: 10px;">2024</span>
                        </div>
                    </div>
                    
                    <!-- Кнопки управления -->
                    <div class="certificate-controls">
                        <button class="btn btn-primary" onclick="downloadCertificate()">
                            <i class="fas fa-download"></i> Скачать (PNG)
                        </button>
                        <button class="btn btn-accent" onclick="shareCertificate()">
                            <i class="fas fa-share-alt"></i> Поделиться
                        </button>
                        <button class="btn btn-outline" onclick="printCertificate()">
                            <i class="fas fa-print"></i> Печать
                        </button>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="leaderboardModal">
            <div class="modal-container">
                <div class="modal-header">
                    <h2><i class="fas fa-trophy"></i> Таблица лидеров</h2>
                    <button class="btn btn-outline" onclick="closeModal()">
                        <i class="fas fa-times"></i> Закрыть
                    </button>
                </div>
                <div class="modal-body">
                    <div class="filters-container" style="margin-bottom: 20px;">
                        <div class="filter-group">
                            <div class="filter-tag active" onclick="changeLeaderboardPeriod('all')">Все время</div>
                            <div class="filter-tag" onclick="changeLeaderboardPeriod('week')">Неделя</div>
                            <div class="filter-tag" onclick="changeLeaderboardPeriod('month')">Месяц</div>
                        </div>
                    </div>
                    
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Место</th>
                                <th>Имя</th>
                                <th>Уровень</th>
                                <th>XP</th>
                                <th>Темы</th>
                                <th>Лабы</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Таблица лидеров   динамически -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Уведомления -->
        <div class="notification-container" id="notificationContainer"></div>

        <!-- External Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldcode.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldgutter.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/selection/active-line.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/search/search.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/search/searchcursor.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/anyword-hint.min.js"></script>
        <script src="https://unpkg.com/cropperjs/dist/cropper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
            // ================ КОНСТАНТЫ И КОНФИГУРАЦИЯ ================
            const CONFIG = {
                APP_NAME: "Основы алгоритмизации и программирования",
                VERSION: "4.0.0",
                MAX_LEVEL: 100,
                BASE_XP: 100,
                XP_MULTIPLIER: 1.2,
                ACHIEVEMENTS_COUNT: 10,
                DAILY_STREAK_XP: 25,
                COMPLETION_XP: 50,
                TEST_XP_PER_QUESTION: 10,
                MAX_AVATAR_SIZE: 5 * 1024 * 1024,
                AVATAR_HISTORY_LIMIT: 5,
                AUTO_SAVE_INTERVAL: 30000,
                BACKUP_INTERVAL: 1800000,
                LANGUAGES: {
                    ru: "Русский",
                    by: "Беларуская"
                }
            };


           // ================ ДАННЫЕ ТЕСТОВ ================
const TESTS_DATA = {
    basics: {
        id: "basics",
        name: "Основы языка C++",
        name_by: "Асновы мовы C++",
        description: "Тест на знание базовых конструкций, типов данных и синтаксиса C++.",
        description_by: "Тэст на веданне базавых канструкцый, тыпаў даных і сінтаксісу C++.",
        timeLimit: 600, // 10 минут
        points: 150,
        difficulty: "beginner",
        icon: "fa-play-circle",
        questions: [
            { id: 1, question: "Какое расширение имеют файлы исходного кода C++?", options: [".txt", ".cpp", ".exe", ".doc"], correct: 1 },
            { id: 2, question: "Какая функция является точкой входа в программу C++?", options: ["start()", "run()", "main()", "init()"], correct: 2 },
            { id: 3, question: "Какой символ используется для завершения инструкции в C++?", options: [":", ".", ";", ","], correct: 2 },
            { id: 4, question: "Как вывести текст на экран в C++?", options: ["print(\"Hello\");", "echo \"Hello\";", "cout << \"Hello\";", "output(\"Hello\");"], correct: 2 },
            { id: 5, question: "Как подключить библиотеку ввода/вывода?", options: ["include", "#include", "include iostream", "import iostream"], correct: 1 },
            { id: 6, question: "Как объявить целочисленную переменную?", options: ["integer x;", "int x;", "number x;", "var x;"], correct: 1 },
            { id: 7, question: "Как правильно записать однострочный комментарий?", options: ["# комментарий", "// комментарий", "/* комментарий */", "-- комментарий"], correct: 1 },
            { id: 8, question: "Какой оператор используется для ввода данных с клавиатуры?", options: ["cin >>", "input >>", "get >>", "read >>"], correct: 0 },
            { id: 9, question: "Как записать условный оператор?", options: ["if (x > 5)", "when (x > 5)", "check (x > 5)", "loop (x > 5)"], correct: 0 },
            { id: 10, question: "Какой цикл выполнится хотя бы один раз?", options: ["for", "while", "do...while", "foreach"], correct: 2 },
            { id: 11, question: "Что неверно в коде? #include <iostream> using namespace std; int main() { cout << \"Hello\" return 0; }", options: ["нет using namespace std", "отсутствует точка с запятой", "неверная функция main", "ошибка в include"], correct: 1 },
            { id: 12, question: "Что будет результатом? int x = 5; int y = 2; cout << x / y;", options: ["2.5", "2", "3", "ошибка"], correct: 1 },
            { id: 13, question: "Какой тип данных используется для хранения дробных чисел?", options: ["int", "float", "char", "bool"], correct: 1 },
            { id: 14, question: "Как объявить константу?", options: ["const int x = 10;", "int const = 10;", "constant x = 10;", "final int x = 10;"], correct: 0 },
            { id: 15, question: "Что выведет программа? int a = 3; if (a == 3) cout << \"Yes\"; else cout << \"No\";", options: ["Yes", "No", "Ошибка", "Ничего"], correct: 0 }
        ]
    },
    branching: {
        id: "branching",
        name: "Разветвляющиеся алгоритмы в C++",
        name_by: "Разгалінаваныя алгарытмы ў C++",
        description: "Проверка знаний условных операторов if, else и switch.",
        description_by: "Праверка ведаў умоўных аператараў if, else і switch.",
        timeLimit: 600,
        points: 150,
        difficulty: "intermediate",
        icon: "fa-code-branch",
        questions: [
            { id: 1, question: "Какой оператор используется для ветвления в программе?", options: ["for", "if", "while", "break"], correct: 1 },
            { id: 2, question: "Как записывается полная форма условного оператора?", options: ["if", "if...else", "if...for", "if...while"], correct: 1 },
            { id: 3, question: "Какой оператор используется для выбора одного из нескольких вариантов?", options: ["while", "for", "switch", "do"], correct: 2 },
            { id: 4, question: "Какой знак используется для проверки равенства?", options: ["=", "==", "!=", ":="], correct: 1 },
            { id: 5, question: "Что делает оператор else?", options: ["завершает программу", "выполняет действие при ложном условии", "повторяет цикл", "объявляет переменную"], correct: 1 },
            { id: 6, question: "Как правильно записать условие: если x больше 10?", options: ["if x > 10", "if (x > 10)", "if x => 10", "if x >= 10 then"], correct: 1 },
            { id: 7, question: "Что выведет программа? int x = 8; if (x > 10) cout << \"A\"; else cout << \"B\";", options: ["A", "B", "8", "ошибка"], correct: 1 },
            { id: 8, question: "Что выведет программа? int x = 5; if (x == 5) cout << \"Yes\"; else cout << \"No\";", options: ["Yes", "No", "ошибка", "ничего"], correct: 0 },
            { id: 9, question: "Что выведет программа? int x = 12; if (x < 10) cout << \"A\"; else if (x < 15) cout << \"B\"; else cout << \"C\";", options: ["A", "B", "C", "ошибка"], correct: 1 },
            { id: 10, question: "Что делает break в конструкции switch?", options: ["повторяет проверку", "завершает программу", "выходит из switch", "пропускает условие"], correct: 2 },
            { id: 11, question: "Что выведет программа? int day = 2; switch(day) { case 1: cout << \"Mon\"; break; case 2: cout << \"Tue\"; break; case 3: cout << \"Wed\"; break; default: cout << \"Error\"; }", options: ["Mon", "Tue", "Wed", "Error"], correct: 1 },
            { id: 12, question: "Где ошибка? int x = 5; if x > 3 cout << \"OK\";", options: ["отсутствуют скобки", "нет точки с запятой", "неверный cout", "ошибка в int"], correct: 0 },
            { id: 13, question: "Что будет результатом? int x = 7; if (x = 7) cout << \"True\"; else cout << \"False\"; (присваивание вместо сравнения)", options: ["True", "False", "ошибка", "ничего"], correct: 0 },
            { id: 14, question: "Как записать условие: число не равно 10?", options: ["x <> 10", "x != 10", "x =! 10", "x not 10"], correct: 1 },
            { id: 15, question: "Какой оператор лучше использовать, если вариантов больше 5 и они зависят от одного значения?", options: ["if", "switch", "for", "while"], correct: 1 }
        ]
    },
    loops: {
        id: "loops",
        name: "Циклы в C++",
        name_by: "Цыклы ў C++",
        description: "Тест на знание циклов for, while и do...while.",
        description_by: "Тэст на веданне цыклаў for, while і do...while.",
        timeLimit: 600,
        points: 150,
        difficulty: "intermediate",
        icon: "fa-redo-alt",
        questions: [
            { id: 1, question: "Какой оператор используется для организации цикла?", options: ["if", "loop", "for", "switch"], correct: 2 },
            { id: 2, question: "Какой цикл выполняется, пока условие истинно?", options: ["if", "while", "switch", "break"], correct: 1 },
            { id: 3, question: "Какой цикл гарантированно выполняется хотя бы один раз?", options: ["for", "while", "do...while", "foreach"], correct: 2 },
            { id: 4, question: "Какой оператор прерывает выполнение цикла?", options: ["stop", "break", "end", "exit"], correct: 1 },
            { id: 5, question: "Какой оператор пропускает текущую итерацию цикла?", options: ["pass", "skip", "continue", "next"], correct: 2 },
            { id: 6, question: "Сколько раз выполнится цикл? for (int i = 0; i < 5; i++) cout << i;", options: ["4", "5", "6", "0"], correct: 1 },
            { id: 7, question: "Что выведет программа? for (int i = 1; i <= 3; i++) cout << i;", options: ["123", "0123", "321", "13"], correct: 0 },
            { id: 8, question: "Какая часть цикла for отвечает за изменение счётчика?", options: ["int i = 0", "i < 10", "i++", "for"], correct: 2 },
            { id: 9, question: "Что выведет программа? int i = 1; while (i <= 3) { cout << i; i++; }", options: ["123", "0123", "3", "бесконечный цикл"], correct: 0 },
            { id: 10, question: "Что произойдет, если забыть увеличить счётчик в while?", options: ["программа завершится", "ошибка компиляции", "бесконечный цикл", "ничего"], correct: 2 },
            { id: 11, question: "Что выведет программа? int i = 5; do { cout << i; } while (i < 3);", options: ["ничего", "5", "бесконечно 5", "ошибка"], correct: 1 },
            { id: 12, question: "В чем главное отличие do...while от while?", options: ["выполняется быстрее", "условие проверяется после выполнения", "нельзя использовать условия", "выполняется один раз максимум"], correct: 1 },
            { id: 13, question: "Где ошибка? for (int i = 0; i < 5; ) { cout << i; }", options: ["нет инкремента", "нет фигурных скобок", "ошибка cout", "нет условия"], correct: 0 },
            { id: 14, question: "Что выведет программа? for (int i = 0; i < 5; i++) { if (i == 3) break; cout << i; }", options: ["01234", "012", "123", "34"], correct: 1 },
            { id: 15, question: "Какой цикл лучше использовать, если заранее известно количество повторений?", options: ["while", "do...while", "for", "switch"], correct: 2 }
        ]
    },
    arrays: {
        id: "arrays",
        name: "Одномерные массивы в C++",
        name_by: "Аднамерныя масівы ў C++",
        description: "Проверка знаний объявления, инициализации и обработки массивов.",
        description_by: "Праверка ведаў аб'яўлення, ініцыялізацыі і апрацоўкі масіваў.",
        timeLimit: 600,
        points: 150,
        difficulty: "intermediate",
        icon: "fa-layer-group",
        questions: [
            { id: 1, question: "Что такое массив?", options: ["одна переменная", "набор элементов одного типа", "цикл", "функция"], correct: 1 },
            { id: 2, question: "Как объявить массив из 5 целых чисел?", options: ["int a;", "int a(5);", "int a[5];", "array a = 5;"], correct: 2 },
            { id: 3, question: "С какого индекса начинается массив в C++?", options: ["1", "0", "-1", "зависит от компилятора"], correct: 1 },
            { id: 4, question: "Как получить доступ к первому элементу массива a?", options: ["a(1)", "a[1]", "a[0]", "a.first"], correct: 2 },
            { id: 5, question: "Как присвоить значение 10 третьему элементу массива a?", options: ["a[3] = 10;", "a(3) = 10;", "a[2] = 10;", "a = 10;"], correct: 2 },
            { id: 6, question: "Как правильно задать массив при объявлении?", options: ["int a[3] = 1,2,3;", "int a[3] = {1,2,3};", "int a = {1,2,3};", "array a[3] = {1,2,3};"], correct: 1 },
            { id: 7, question: "Что будет храниться в массиве? int a[3] = {5, 7};", options: ["5 7 0", "5 7 мусор", "ошибка", "5 7 7"], correct: 0 },
            { id: 8, question: "Что выведет программа? int a[3] = {1, 2, 3}; cout << a[1];", options: ["1", "2", "3", "ошибка"], correct: 1 },
            { id: 9, question: "Что выведет программа? int a[4] = {10, 20, 30, 40}; for (int i = 0; i < 4; i++) cout << a[i] << \" \";", options: ["10 20 30 40", "10 20 30", "20 30 40", "ошибка"], correct: 0 },
            { id: 10, question: "Что выведет программа? int a[3] = {5, 10, 15}; int sum = 0; for (int i = 0; i < 3; i++) sum += a[i]; cout << sum;", options: ["15", "20", "30", "45"], correct: 2 },
            { id: 11, question: "Где ошибка? int a[3] = {1,2,3}; cout << a[3];", options: ["неверный тип", "выход за пределы массива", "ошибка cout", "нет ошибки"], correct: 1 },
            { id: 12, question: "Что неверно в коде? int n = 5; int a[n];", options: ["массив нельзя создавать", "размер должен быть константой (в стандартном C++)", "неверный тип данных", "нет ошибки"], correct: 1 },
            { id: 13, question: "Как найти максимальный элемент массива?", options: ["использовать if внутри цикла", "использовать switch", "использовать break", "невозможно"], correct: 0 },
            { id: 14, question: "Какой цикл чаще всего используют для обработки массива?", options: ["if", "for", "switch", "goto"], correct: 1 },
            { id: 15, question: "Что выведет программа? int a[3] = {2, 4, 6}; for (int i = 2; i >= 0; i--) cout << a[i] << \" \";", options: ["2 4 6", "6 4 2", "4 6 2", "ошибка"], correct: 1 }
        ]
    }
};

            // ================ СТРУКТУРА КУРСА ================

const COURSE_STRUCTURE = {
    modules: [
        {
            id: "basics",
            name: "Основы алгоритмизации и программирования",
            name_by: "Асновы алгарытмізацыі і праграмавання",
            icon: "fa-graduation-cap",
            color: "gradient-blue",
            totalPoints: 5000,
            topics: [
                // ================ ЛЕКЦИЯ 1: ВВЕДЕНИЕ ================
                {
                    id: "intro",
                    title: "Лекция 1. Введение в дисциплину «Основы алгоритмизации и программирования»",
                    title_by: "Лекцыя 1. Уводзіны ў дысцыпліну «Асновы алгарытмізацыі і праграмавання»",
                    type: "theory",
                    duration: 90,
                    difficulty: "beginner",
                    points: 150,
                    completed: false,
                    tags: ["организация курса", "понятие программы", "языки программирования", "IDE", "история C++"],
                    tags_by: ["арганізацыя курса", "паняцце праграмы", "мовы праграмавання", "IDE", "гісторыя C++"],
                    content: {
                        overview: "На этой лекции мы познакомимся с планом курса, узнаем, что такое программа и алгоритм, рассмотрим классификацию языков программирования, установим среду разработки и напишем первую программу на C++.",
                        overview_by: "На гэтай лекцыі мы пазнаёмімся з планам курса, даведаемся, што такое праграма і алгарытм, разгледзім класіфікацыю моў праграмавання, усталюем асяроддзе распрацоўкі і напішам першую праграму на C++.",
                        sections: [
                            {
                                title: "1. Организационные моменты (10 минут)",
                                title_by: "1. Арганізацыйныя моманты (10 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-calendar-alt" style="color: var(--accent-blue);"></i> Структура курса</h4>
                                        <p>Мы начинаем изучать программирование с языка <strong>C++</strong>. Сначала будем писать <strong>консольные программы</strong> — они позволят вам сконцентрироваться на логике, алгоритмах и принципах работы языка.</p>
                                        <p>Позже мы перейдём к <strong>оконным приложениям</strong>. Важно понимать: в Visual Studio для C++ нет готового шаблона "окно с кнопками" так, как это есть в C#. Поэтому мы будем использовать специальные механизмы:</p>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-window-maximize" style="color: var(--accent-blue);"></i> <strong>WinAPI</strong> — работа напрямую с функциями Windows</li>
                                            <li><i class="fas fa-code" style="color: var(--accent-green);"></i> <strong>C++/CLI с Windows Forms</strong> — способ подключить оконные элементы через .NET</li>
                                        </ul>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-chart-pie" style="color: var(--accent-purple);"></i> Распределение часов</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">💻</div>
                                                <div class="feature-title">80 часов</div>
                                                <div class="feature-desc">Лабораторные работы (практика за ПК)</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📝</div>
                                                <div class="feature-title">20 часов</div>
                                                <div class="feature-desc">Курсовое проектирование</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📖</div>
                                                <div class="feature-title">70 часов</div>
                                                <div class="feature-desc">Теория, контрольные, тесты</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🎓</div>
                                                <div class="feature-title">Экзамен</div>
                                                <div class="feature-desc">В конце курса</div>
                                            </div>
                                        </div>
                                        <p style="color: var(--accent-green); font-size: 18px; text-align: center; margin-top: 15px;"><strong>Общая продолжительность: 170 часов</strong></p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-clipboard-check" style="color: var(--accent-yellow);"></i> Формат оценивания</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-flask" style="color: var(--accent-blue);"></i> <strong>Лабораторные:</strong> сдача каждой работы — зачет</li>
                                            <li><i class="fas fa-project-diagram" style="color: var(--accent-green);"></i> <strong>Курсовая:</strong> защита проекта</li>
                                            <li><i class="fas fa-question-circle" style="color: var(--accent-purple);"></i> <strong>Экзамен:</strong> теоретическая + практическая части</li>
                                            <li><i class="fas fa-gift" style="color: var(--accent-red);"></i> <strong>Бонусы:</strong> за активность (участие в конкурсах) и качество выполнения</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "2. Что такое программа (10 минут)",
                                title_by: "2. Што такое праграма (10 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-cogs" style="color: var(--accent-blue);"></i> Определение программы</h4>
                                        <p><strong>Программа</strong> — это последовательность команд, написанных на языке программирования, предназначенная для управления поведением компьютера с целью решения определённой задачи.</p>
                                        <p>Проще говоря — это набор инструкций, который сообщает компьютеру, что делать.</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sitemap" style="color: var(--accent-green);"></i> Этапы разработки программы</h4>
                                        <ol class="usage-list" style="list-style-type: decimal;">
                                            <li><strong>Разработка алгоритма</strong> — формулировка задачи, разработка пошагового алгоритма решения</li>
                                            <li><strong>Написание исходного кода</strong> — реализация алгоритма на языке C++ (файлы .cpp)</li>
                                            <li><strong>Компиляция</strong> — преобразование исходного кода в машинный код (нули и единицы)</li>
                                            <li><strong>Тестирование и отладка</strong> — запуск программы, проверка результатов, исправление ошибок</li>
                                            <li><strong>Исполнение</strong> — готовая программа (.exe) запускается пользователем</li>
                                            <li><strong>Анализ и доработка</strong> — оценка производительности, рефакторинг</li>
                                        </ol>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-microchip" style="color: var(--accent-purple);"></i> Процесс изнутри</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead>
                                                    <tr><th>Этап</th><th>Описание</th><th>Инструмент</th></tr>
                                                </thead>
                                                <tbody>
                                                    <tr><td>Написание кода</td><td>Исходный текст программы</td><td>VS Code, Code::Blocks</td></tr>
                                                    <tr><td>Компиляция</td><td>Перевод в машинный код</td><td>g++, clang</td></tr>
                                                    <tr><td>Сборка</td><td>Объединение кода в исполняемый файл</td><td>Линкер</td></tr>
                                                    <tr><td>Исполнение</td><td>Запуск программы</td><td>Операционная система</td></tr>
                                                    <tr><td>Отладка</td><td>Исправление ошибок</td><td>GDB</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="code-example">
                                        <div class="code-header">
                                            <span class="code-title"><i class="fas fa-file-code"></i> Пример программы на C++</span>
                                        </div>
                                        <pre><code>#include <iostream>
using namespace std;
int main() {
    cout << "Привет, мир!" << endl;
    return 0;
}</code></pre>
                                    </div>
                                `
                            },
                            {
                                title: "3. Языки программирования (20 минут)",
                                title_by: "3. Мовы праграмавання (20 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-language" style="color: var(--accent-blue);"></i> Определение</h4>
                                        <p><strong>Язык программирования</strong> — это формальный язык, предназначенный для написания программ, которые управляют поведением компьютера.</p>
                                        <p>С помощью языка программирования мы описываем алгоритмы в понятной для компьютера форме. Каждый язык имеет свой <strong>синтаксис</strong> (правила написания кода) и <strong>семантику</strong> (значение инструкций).</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-layer-group" style="color: var(--accent-green);"></i> Классификация по уровню абстракции</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">🔩</div>
                                                <div class="feature-title">Низкий уровень</div>
                                                <div class="feature-desc">Близки к машинному коду, напрямую работают с памятью и процессором. Пример: Ассемблер</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🏗️</div>
                                                <div class="feature-title">Высокий уровень</div>
                                                <div class="feature-desc">Ближе к естественному языку, проще в использовании. Пример: C++, Java, Python</div>
                                            </div>
                                        </div>
                                        <p><em>C++ — это язык высокого уровня, но с возможностью низкоуровневого управления (например, через указатели).</em></p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-bolt" style="color: var(--accent-yellow);"></i> Классификация по способу исполнения</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">⚙️</div>
                                                <div class="feature-title">Компилируемые</div>
                                                <div class="feature-desc">Исходный код переводится компилятором в машинный код. C++, C, Rust</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🐍</div>
                                                <div class="feature-title">Интерпретируемые</div>
                                                <div class="feature-desc">Код исполняется построчно интерпретатором. Python, JavaScript</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">☕</div>
                                                <div class="feature-title">Гибридные</div>
                                                <div class="feature-desc">Сначала компилируются в байт-код, потом интерпретируются. Java, C#</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-cubes" style="color: var(--accent-purple);"></i> Классификация по парадигме</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-list-ol"></i> <strong>Императивная:</strong> последовательные команды (что и как делать). C, C++, Pascal</li>
                                            <li><i class="fas fa-object-group"></i> <strong>Объектно-ориентированная (ООП):</strong> программа как набор объектов. Java, C++, C#</li>
                                            <li><i class="fas fa-lambda"></i> <strong>Функциональная:</strong> программа как набор функций без состояния. Haskell, Scheme</li>
                                            <li><i class="fas fa-brain"></i> <strong>Логическая:</strong> описание условий и связей между объектами. Prolog</li>
                                        </ul>
                                        <p><em>C++ поддерживает императивную и объектно-ориентированную парадигмы.</em></p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-tasks" style="color: var(--accent-red);"></i> Классификация по назначению</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-globe"></i> <strong>Общего назначения:</strong> C++, Python, Java — широкий круг задач</li>
                                            <li><i class="fas fa-terminal"></i> <strong>Скриптовые:</strong> JavaScript, Bash — веб, автоматизация</li>
                                            <li><i class="fas fa-database"></i> <strong>Специализированные:</strong> SQL, MATLAB — работа с БД, наука</li>
                                        </ul>
                                    </div>
                                    <div class="interactive-block">
                                        <h4><i class="fas fa-question-circle"></i> Почему мы изучаем C++?</h4>
                                        <ul>
                                            <li><strong>Универсальность:</strong> системное, прикладное, научное ПО</li>
                                            <li><strong>Строгая типизация:</strong> помогает дисциплине мышления</li>
                                            <li><strong>Отличная база:</strong> для понимания работы памяти, компиляции</li>
                                            <li><strong>Популярность:</strong> в промышленности и олимпиадном программировании</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "4. Установка и настройка среды разработки (10 минут)",
                                title_by: "4. Устаноўка і налада асяроддзя распрацоўкі (10 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-laptop-code" style="color: var(--accent-blue);"></i> Что такое IDE?</h4>
                                        <p><strong>Среда разработки</strong> (или IDE — Integrated Development Environment) — это программное обеспечение, которое предоставляет программисту удобный интерфейс для написания, редактирования, отладки и запуска программного кода.</p>
                                        <p><strong>Основные компоненты:</strong></p>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-pencil-alt"></i> <strong>Редактор кода</strong> — подсветка синтаксиса, автодополнение</li>
                                            <li><i class="fas fa-hammer"></i> <strong>Компилятор/Интерпретатор</strong> — преобразует код в программу</li>
                                            <li><i class="fas fa-bug"></i> <strong>Отладчик (debugger)</strong> — поиск ошибок, точки останова</li>
                                            <li><i class="fas fa-tools"></i> <strong>Средства автоматической сборки</strong> — build tools</li>
                                            <li><i class="fas fa-code-branch"></i> <strong>Интеграция с Git</strong> — контроль версий</li>
                                        </ul>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-table" style="color: var(--accent-green);"></i> Популярные IDE</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead>
                                                    <tr><th>Язык</th><th>IDE</th></tr>
                                                </thead>
                                                <tbody>
                                                    <tr><td>C++</td><td>Code::Blocks, CLion, Visual Studio</td></tr>
                                                    <tr><td>Python</td><td>PyCharm, Thonny, VS Code</td></tr>
                                                    <tr><td>Java</td><td>IntelliJ IDEA, Eclipse, NetBeans</td></tr>
                                                    <tr><td>Web</td><td>VS Code, Sublime Text, WebStorm</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="interactive-block">
                                        <h4><i class="fas fa-download"></i> Установка Visual Studio Code</h4>
                                        <ol>
                                            <li>Перейдите на официальный сайт: <a href="https://code.visualstudio.com/" target="_blank">code.visualstudio.com</a></li>
                                            <li>Скачайте версию для вашей ОС</li>
                                            <li>Установите программу</li>
                                            <li>Откройте VS Code и установите расширение "C/C++" от Microsoft</li>
                                        </ol>
                                    </div>
                                `
                            },
                            {
                                title: "5. Как будет проходить лабораторная работа (10 минут)",
                                title_by: "5. Як будзе праходзіць лабараторная работа (10 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-flask" style="color: var(--accent-blue);"></i> Темы лабораторных работ</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-arrow-right"></i> Простые алгоритмы: максимум, минимум, сумма чисел</li>
                                            <li><i class="fas fa-arrow-right"></i> Условия (if, else)</li>
                                            <li><i class="fas fa-arrow-right"></i> Циклы (for, while)</li>
                                            <li><i class="fas fa-arrow-right"></i> Массивы</li>
                                            <li><i class="fas fa-arrow-right"></i> Функции</li>
                                            <li><i class="fas fa-arrow-right"></i> Работа с файлами</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "6. Немного истории (5 минут)",
                                title_by: "6. Крыху гісторыі (5 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-history" style="color: var(--accent-blue);"></i> История языков программирования</h4>
                                        <ul class="usage-list">
                                            <li><strong>1950-е</strong> — первый язык высокого уровня: Fortran</li>
                                            <li><strong>1970-е</strong> — C и Pascal</li>
                                            <li><strong>1983</strong> — Бьёрн Страуструп создает C++ как «улучшенный C»</li>
                                            <li><strong>Сегодня</strong> — десятки языков, но C++ по-прежнему один из самых мощных и эффективных</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "7. Где применяются алгоритмы и C++ (10 минут)",
                                title_by: "7. Дзе прымяняюцца алгарытмы і C++ (10 хвілін)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-rocket" style="color: var(--accent-blue);"></i> Области применения</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-gamepad" style="color: var(--accent-green);"></i> <strong>Игровая индустрия</strong> — Unreal Engine, внутренние движки</li>
                                            <li><i class="fas fa-university" style="color: var(--accent-yellow);"></i> <strong>Банки и финансы</strong> — высокопроизводительные системы</li>
                                            <li><i class="fas fa-microscope" style="color: var(--accent-purple);"></i> <strong>Наука и техника</strong> — моделирование, обработка сигналов</li>
                                            <li><i class="fas fa-microchip" style="color: var(--accent-red);"></i> <strong>Встраиваемые системы</strong> — микроконтроллеры, умные устройства</li>
                                            <li><i class="fas fa-trophy" style="color: var(--accent-orange);"></i> <strong>Алгоритмические соревнования</strong> — олимпиады, хакатоны</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "8. Интерактив и обсуждение (10 минут)",
                                title_by: "8. Інтэрактыў і абмеркаванне (10 хвілін)",
                                content: `
                                    <div class="interactive-block">
                                        <h4><i class="fas fa-comments"></i> Вопросы для обсуждения</h4>
                                        <ul>
                                            <li>Знакомы ли вы с языками программирования?</li>
                                            <li>Почему, по вашему мнению, важно уметь программировать?</li>
                                            <li>Какие алгоритмы вы использовали в жизни (не в компьютере)?</li>
                                            <li>Где вы уже сталкивались с автоматизацией?</li>
                                            <li>Какой язык программирования вам интересен?</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "9. Обзор GUI на C++",
                                title_by: "9. Агляд GUI на C++",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-window-maximize"></i> Подходы к созданию GUI</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead>
                                                    <tr><th>Метод</th><th>Преимущества</th><th>Недостатки</th></tr>
                                                </thead>
                                                <tbody>
                                                    <tr><td><strong>Win32 API</strong></td><td>Полный контроль, глубокое понимание API</td><td>Много кода, сложно для новичков</td></tr>
                                                    <tr><td><strong>MFC (Visual Studio)</strong></td><td>Быстрое создание через дизайнер</td><td>Windows-специфично, устаревший стиль</td></tr>
                                                    <tr><td><strong>Qt / wxWidgets / gtkmm / FLTK / U++</strong></td><td>Кроссплатформенность, удобство</td><td>Требуют изучения, настройка инструментов</td></tr>
                                                    <tr><td><strong>C++Builder (VCL)</strong></td><td>Лучший GUI-редактор</td><td>Ограничен IDE, специфичен</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },
                
                // ================ ЛЕКЦИЯ 2: СТАДИИ РАЗРАБОТКИ ПО ================
                {
                    id: "lecture2",
                    title: "Лекция 2: Стадии разработки программного обеспечения. Типы вычислительных процессов",
                    title_by: "Лекцыя 2: Стадыі распрацоўкі праграмнага забеспячэння. Тыпы вылічальных працэсаў",
                    type: "theory",
                    duration: 45,
                    difficulty: "beginner",
                    points: 100,
                    completed: false,
                    tags: ["SDLC", "жизненный цикл ПО", "вычислительные процессы", "параллелизм"],
                    tags_by: ["SDLC", "жыццёвы цыкл ПЗ", "вылічальныя працэсы", "паралелізм"],
                    content: {
                        overview: "Разработка программного обеспечения — это сложный и структурированный процесс, включающий множество этапов: от идеи до готового продукта. Хорошо спланированная разработка снижает риск ошибок, повышает качество и упрощает сопровождение ПО.",
                        overview_by: "Распрацоўка праграмнага забеспячэння — гэта складаны і структураваны працэс, які ўключае мноства этапаў: ад ідэі да гатовага прадукту. Добра спланаваная распрацоўка зніжае рызыку памылак, павышае якасць і спрашчае суправаджэнне ПЗ.",
                        sections: [
                            {
                                title: "1. Стадии разработки программного обеспечения",
                                title_by: "1. Стадыі распрацоўкі праграмнага забеспячэння",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-clipboard-list"></i> Жизненный цикл ПО (SDLC)</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">1️⃣</div>
                                                <div class="feature-title">Постановка задачи</div>
                                                <div class="feature-desc">Сбор требований, анализ бизнес-целей, установление ограничений</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">2️⃣</div>
                                                <div class="feature-title">Проектирование</div>
                                                <div class="feature-desc">Создание архитектуры, выбор технологий, определение интерфейсов</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">3️⃣</div>
                                                <div class="feature-title">Реализация</div>
                                                <div class="feature-desc">Написание исходного кода, использование систем контроля версий</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">4️⃣</div>
                                                <div class="feature-title">Тестирование</div>
                                                <div class="feature-desc">Модульное, интеграционное, системное, приёмочное тестирование</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">5️⃣</div>
                                                <div class="feature-title">Внедрение</div>
                                                <div class="feature-desc">Установка в рабочую среду, деплой, публикация</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">6️⃣</div>
                                                <div class="feature-title">Сопровождение</div>
                                                <div class="feature-desc">Устранение ошибок, обновление функционала, поддержка</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Типы вычислительных процессов",
                                title_by: "2. Тыпы вылічальных працэсаў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-microchip"></i> Классификация вычислительных процессов</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">➡️</div>
                                                <div class="feature-title">Последовательный</div>
                                                <div class="feature-desc">Инструкции выполняются одна за другой. Простота реализации, легко отлаживать</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔄</div>
                                                <div class="feature-title">Параллельный</div>
                                                <div class="feature-desc">Выполнение нескольких операций одновременно на нескольких ядрах</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🌐</div>
                                                <div class="feature-title">Распределённый</div>
                                                <div class="feature-desc">Задачи делятся между несколькими компьютерами, соединёнными сетью</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">⏱️</div>
                                                <div class="feature-title">Реального времени</div>
                                                <div class="feature-desc">Система должна гарантированно отвечать за ограниченное время</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },
                
                // ================ ЛЕКЦИЯ 3: ПОНЯТИЕ АЛГОРИТМА ================
                {
                    id: "lecture3",
                    title: "Лекция 3: Понятие алгоритма. Свойства и способы описания алгоритмов",
                    title_by: "Лекцыя 3: Паняцце алгарытму. Уласцівасці і спосабы апісання алгарытмаў",
                    type: "theory",
                    duration: 50,
                    difficulty: "beginner",
                    points: 120,
                    completed: false,
                    tags: ["алгоритм", "свойства алгоритма", "блок-схема", "базовые конструкции"],
                    tags_by: ["алгарытм", "уласцівасці алгарытму", "блок-схема", "базавыя канструкцыі"],
                    content: {
                        overview: "Алгоритм — это конечная последовательность точно определённых действий, приводящих к решению поставленной задачи. В этой лекции мы рассмотрим свойства алгоритмов и способы их описания.",
                        overview_by: "Алгарытм — гэта канечная паслядоўнасць дакладна вызначаных дзеянняў, якія прыводзяць да рашэння пастаўленай задачы. У гэтай лекцыі мы разгледзім уласцівасці алгарытмаў і спосабы іх апісання.",
                        sections: [
                            {
                                title: "1. Свойства алгоритма",
                                title_by: "1. Уласцівасці алгарытму",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-list-check"></i> Основные свойства</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">🎯</div>
                                                <div class="feature-title">Определенность</div>
                                                <div class="feature-desc">Алгоритм должен быть однозначным, исключающим произвольность толкования</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🚪</div>
                                                <div class="feature-title">Конечность</div>
                                                <div class="feature-desc">Один вход и один выход, завершаемость за конечное число шагов</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">✅</div>
                                                <div class="feature-title">Результативность</div>
                                                <div class="feature-desc">Выдача результатов или сообщение о невозможности решения</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">👥</div>
                                                <div class="feature-title">Массовость</div>
                                                <div class="feature-desc">Решение однотипных задач с различными исходными данными</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔲</div>
                                                <div class="feature-title">Дискретность</div>
                                                <div class="feature-desc">Разделение процесса на отдельные этапы, элементарные операции</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Способы описания алгоритмов",
                                title_by: "2. Способы апісання алгарытмаў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-pen"></i> Основные способы</h4>
                                        <ul class="usage-list">
                                            <li><i class="fas fa-language"></i> <strong>Словесное описание</strong> — запись на естественном языке</li>
                                            <li><i class="fas fa-project-diagram"></i> <strong>Графическое описание</strong> — блок-схемы</li>
                                            <li><i class="fas fa-file-code"></i> <strong>Программное описание</strong> — тексты программ на алгоритмическом языке</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "3. Графический способ (блок-схема)",
                                title_by: "3. Графічны спосаб (блок-схема)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-shapes"></i> Элементы блок-схем</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">⚪</div>
                                                <div class="feature-title">Терминатор</div>
                                                <div class="feature-desc">Начало или конец алгоритма</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📥</div>
                                                <div class="feature-title">Ввод/вывод</div>
                                                <div class="feature-desc">Ввод данных или вывод результатов</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔲</div>
                                                <div class="feature-title">Процесс</div>
                                                <div class="feature-desc">Выполнение действий, вычисления</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">💎</div>
                                                <div class="feature-title">Решение</div>
                                                <div class="feature-desc">Проверка условия, ветвление</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">➡️</div>
                                                <div class="feature-title">Линия потока</div>
                                                <div class="feature-desc">Направление выполнения алгоритма</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔗</div>
                                                <div class="feature-title">Соединитель</div>
                                                <div class="feature-desc">Разрыв линий потока</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Базовые конструкции алгоритмов",
                                title_by: "4. Базавыя канструкцыі алгарытмаў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-right"></i> Линейная конструкция</h4>
                                        <p>Последовательное выполнение операций без повторов и разветвлений.</p>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────────────┐
│   Действие 1 │
├─────────────┤
│   Действие 2 │
├─────────────┤
│   Действие 3 │
└─────────────┘</pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code-branch"></i> Разветвляющаяся конструкция</h4>
                                        <p>Выполнение операций по одному из нескольких направлений в зависимости от условий.</p>
                                        <div class="flowchart-ascii">
                                            <pre>    ◇─────◇
   ╱ Условие ╲
  ╱           ╲
 ◆───◇     ◇───◆
 │          │
 ▼          ▼
┌─────┐  ┌─────┐
│ Ветвь│  │ Ветвь│
│  1   │  │  2   │
└──┬──┘  └──┬──┘
   └────┬────┘
        │
        ▼</pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-redo-alt"></i> Циклические конструкции</h4>
                                        <p><strong>Цикл с предусловием</strong> — повторение пока условие истинно</p>
                                        <div class="flowchart-ascii">
                                            <pre>    ◇─────◇
   ╱ Условие ╲
  ╱           ╲
 ◆───◇     ◇───◆
 │true    │false
 ▼        │
┌─────┐   │
│Тело │   │
└──┬──┘   │
   └──────┤
          │
          ▼</pre>
                                        </div>
                                        <p><strong>Цикл с постусловием</strong> — выполняется хотя бы один раз</p>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────┐
│Тело │
└──┬──┘
   │
   ▼
 ◇─────◇
╱ Условие ╲
╲         ╱
 ◆───◇ ◇───◆
 │true │false
 └────┤
      │
      ▼</pre>
                                        </div>
                                        <p><strong>Безусловный цикл (for)</strong> — с фиксированным количеством повторов</p>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────────────┐
│ i = начальное│
└──────┬──────┘
       │
       ▼
    ◇─────◇
   ╱ i <=  ╲
  ╱ конечное╲
 ◆───◇   ◇───◆
 │true   │false
 ▼       │
┌─────┐  │
│Тело │  │
│ i++ │  │
└──┬──┘  │
   └─────┘
       │
       ▼
    ┌─────┐
    │Конец│
    └─────┘</pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },
                
                // ================ ЛЕКЦИЯ 4: СТРУКТУРА ПРОГРАММНОГО МОДУЛЯ ================
                {
                    id: "lecture4",
                    title: "Лекция 4: Структура программного модуля на языке C++. Состав интегрированной среды Visual Studio. Типы данных.",
                    title_by: "Лекцыя 4: Структура праграмнага модуля на мове C++. Склад інтэграванай асяроддзя Visual Studio. Тыпы дадзеных.",
                    type: "theory",
                    duration: 60,
                    difficulty: "beginner",
                    points: 150,
                    completed: false,
                    tags: ["структура программы", "Visual Studio", "типы данных", "переменные", "константы"],
                    tags_by: ["структура праграмы", "Visual Studio", "тыпы дадзеных", "пераменныя", "канстанты"],
                    content: {
                        overview: "На этом занятии мы разберём, как устроена структура программы на языке C++, какие компоненты входят в состав среды Visual Studio, и какие типы данных применяются в C++.",
                        overview_by: "На гэтым занятку мы разбяром, як уладкавана структура праграмы на мове C++, якія кампаненты ўваходзяць у склад асяроддзя Visual Studio, і якія тыпы дадзеных ужываюцца ў C++.",
                        sections: [
                            {
                                title: "1. Структура программного модуля на C++",
                                title_by: "1. Структура праграмнага модуля на C++",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-cubes"></i> Основные элементы C++-программы</h4>
                                        <div class="code-example">
                                            <div class="code-header">
                                                <span class="code-title"><i class="fas fa-file-code"></i> main.cpp</span>
                                            </div>
                                            <pre><code>#include <iostream>  // Директива препроцессора, подключение библиотеки

using namespace std;  // Подключение стандартного пространства имён

int main() {          // Главная функция — точка входа в программу
    // Здесь будут выполняться команды
    cout << "Hello, World!" << endl;
    
    return 0;         // Признак успешного завершения программы
}</code></pre>
                                        </div>
                                        <div class="explanation-block">
                                            <div class="explanation-item">
                                                <div class="explanation-number">1</div>
                                                <div class="explanation-text"><code>#include</code> — директива препроцессора для подключения библиотек</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">2</div>
                                                <div class="explanation-text"><code>using namespace std;</code> — позволяет не писать std:: перед cout, cin, endl</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">3</div>
                                                <div class="explanation-text"><code>int main()</code> — главная функция, с неё начинается выполнение программы</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">4</div>
                                                <div class="explanation-text"><code>return 0;</code> — успешное завершение программы</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-puzzle-piece"></i> Модульная структура</h4>
                                        <p>Программа может состоять из нескольких модулей:</p>
                                        <ul>
                                            <li><strong>.cpp файлы</strong> — файлы с реализацией</li>
                                            <li><strong>.h файлы</strong> — заголовочные файлы (header files)</li>
                                        </ul>
                                        <div class="code-example">
                                            <div class="code-header"><span class="code-title">math_utils.h</span></div>
                                            <pre><code>#ifndef MATH_UTILS_H
#define MATH_UTILS_H

int add(int a, int b);
double divide(double a, double b);

#endif</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <div class="code-header"><span class="code-title">math_utils.cpp</span></div>
                                            <pre><code>#include "math_utils.h"

int add(int a, int b) {
    return a + b;
}

double divide(double a, double b) {
    return a / b;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Интегрированная среда разработки Visual Studio",
                                title_by: "2. Інтэграванае асяроддзе распрацоўкі Visual Studio",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-laptop-code"></i> Состав Visual Studio</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">✏️</div>
                                                <div class="feature-title">Редактор кода</div>
                                                <div class="feature-desc">Написание и подсветка синтаксиса</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">⚙️</div>
                                                <div class="feature-title">Компилятор</div>
                                                <div class="feature-desc">Преобразование кода в исполняемый файл</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🐞</div>
                                                <div class="feature-title">Отладчик</div>
                                                <div class="feature-desc">Поиск и устранение ошибок</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📁</div>
                                                <div class="feature-title">Solution Explorer</div>
                                                <div class="feature-desc">Организация файлов проекта</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">💡</div>
                                                <div class="feature-title">IntelliSense</div>
                                                <div class="feature-desc">Автодополнение и подсказки</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📊</div>
                                                <div class="feature-title">Профилировщик</div>
                                                <div class="feature-desc">Анализ производительности</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Типы данных в C++",
                                title_by: "3. Тыпы дадзеных у C++",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-database"></i> Основные категории типов</h4>
                                        <p><strong>Тип данных</strong> — это характеристика переменной или выражения, определяющая:</p>
                                        <ul>
                                            <li>какие значения она может принимать</li>
                                            <li>сколько памяти занимает</li>
                                            <li>какие операции с ней допустимы</li>
                                        </ul>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-hashtag"></i> Целочисленные типы</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Тип</th><th>Размер</th><th>Диапазон</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>int</td><td>4 байта</td><td>-2 147 483 648 до 2 147 483 647</td><td>int age = 25;</td></tr>
                                                    <tr><td>short</td><td>2 байта</td><td>-32 768 до 32 767</td><td>short s = 100;</td></tr>
                                                    <tr><td>long</td><td>4 или 8 байт</td><td>-2 147 483 648 до 2 147 483 647</td><td>long l = 100000L;</td></tr>
                                                    <tr><td>long long</td><td>8 байт</td><td>-9 10¹⁸ до 9 10¹⁸</td><td>long long ll = 1e12;</td></tr>
                                                    <tr><td>unsigned int</td><td>4 байта</td><td>0 до 4 294 967 295</td><td>unsigned int u = 100;</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-floating-point"></i> Вещественные типы</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Тип</th><th>Размер</th><th>Точность</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>float</td><td>4 байта</td><td>6-7 знаков</td><td>float pi = 3.14f;</td></tr>
                                                    <tr><td>double</td><td>8 байт</td><td>15-16 знаков</td><td>double e = 2.71828;</td></tr>
                                                    <tr><td>long double</td><td>10-12 байт</td><td>18-19 знаков</td><td>long double ld = 1.0L;</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-font"></i> Символьный тип</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Тип</th><th>Размер</th><th>Диапазон</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>char</td><td>1 байт</td><td>-128 до 127</td><td>char ch = 'A';</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-toggle-on"></i> Логический тип</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Тип</th><th>Значения</th><th>Размер</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>bool</td><td>true / false</td><td>1 байт</td><td>bool isReady = true;</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Переменные и константы",
                                title_by: "4. Пераменныя і канстанты",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-box"></i> Переменные</h4>
                                        <p><strong>Переменная</strong> — это именованная область памяти, в которой хранится значение, которое можно менять в ходе выполнения программы.</p>
                                        <div class="code-example">
                                            <pre><code>тип_данных имя_переменной = значение;
int age = 25;
float height = 1.75;
char letter = 'A';
bool isOnline = true;</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-lock"></i> Константы</h4>
                                        <p><strong>Константа</strong> — это переменная, значение которой нельзя изменить после объявления.</p>
                                        <div class="code-example">
                                            <pre><code>const тип_данных имя_константы = значение;
const double PI = 3.14159;
const int MAX_SCORE = 100;</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-rule"></i> Правила именования</h4>
                                        <p><strong>Можно:</strong> латинские буквы, цифры, подчёркивание (_), начинаться с буквы или _</p>
                                        <p><strong>Нельзя:</strong> пробелы, спецсимволы, начинаться с цифры, использовать ключевые слова</p>
                                        <p><strong>Рекомендации:</strong> camelCase для переменных, ALL_CAPS для констант</p>
                                    </div>
                                `
                            },
                            {
                                title: "5. Алфавит языка C++",
                                title_by: "5. Алфавіт мовы C++",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-font"></i> Допустимые символы</h4>
                                        <ul>
                                            <li><strong>Латинские буквы:</strong> A-Z, a-z</li>
                                            <li><strong>Цифры:</strong> 0-9</li>
                                            <li><strong>Специальные символы:</strong> + - * / % = < > ! & | ^ ~ . , ; : ? ' " \\ ( ) [ ] { }</li>
                                            <li><strong>Пробельные символы:</strong> пробел, табуляция, перевод строки</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "6. Ввод и вывод данных",
                                title_by: "6. Увод і вывад дадзеных",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-keyboard"></i> Стандартные потоки</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Оператор</th><th>Назначение</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>cin</td><td>Ввод с клавиатуры</td><td>cin >> x;</td></tr>
                                                    <tr><td>cout</td><td>Вывод на экран</td><td>cout << "Hello";</td></tr>
                                                    <tr><td>>></td><td>Оператор ввода</td><td>cin >> переменная;</td></tr>
                                                    <tr><td><<</td><td>Оператор вывода</td><td>cout << значение;</td></tr>
                                                    <tr><td>endl</td><td>Перевод строки</td><td>cout << endl;</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>#include <iostream>
using namespace std;

int main() {
    string name;
    int age;
    
    cout << "Введите имя: ";
    cin >> name;
    cout << "Введите возраст: ";
    cin >> age;
    
    cout << "Привет, " << name << "! Тебе " << age << " лет." << endl;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 5: ЛИНЕЙНЫЕ АЛГОРИТМЫ ================
                {
                    id: "lecture5",
                    title: "Лекция 5: Линейные алгоритмы и программы. Формирование проекта программы",
                    title_by: "Лекцыя 5: Лінейныя алгарытмы і праграмы. Фарміраванне праекта праграмы",
                    type: "theory",
                    duration: 45,
                    difficulty: "beginner",
                    points: 120,
                    completed: false,
                    tags: ["линейный алгоритм", "проект", "этапы разработки"],
                    tags_by: ["лінейны алгарытм", "праект", "этапы распрацоўкі"],
                    content: {
                        overview: "Линейный алгоритм — это алгоритм, в котором действия выполняются последовательно, без ветвлений и циклов. В этой лекции мы рассмотрим структуру линейной программы на C++ и процесс создания проекта.",
                        overview_by: "Лінейны алгарытм — гэта алгарытм, у якім дзеянні выконваюцца паслядоўна, без разгалінаванняў і цыклаў. У гэтай лекцыі мы разгледзім структуру лінейнай праграмы на C++ і працэс стварэння праекта.",
                        sections: [
                            {
                                title: "1. Что такое линейный алгоритм?",
                                title_by: "1. Што такое лінейны алгарытм?",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-down"></i> Определение</h4>
                                        <p><strong>Линейный алгоритм</strong> — это алгоритм, в котором действия выполняются последовательно, одно за другим, в порядке их записи. В нём нет условий и повторений.</p>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────────────┐
│ Действие 1  │
├─────────────┤
│ Действие 2  │
├─────────────┤
│ Действие 3  │
├─────────────┤
│     ...     │
├─────────────┤
│ Действие N  │
└─────────────┘</pre>
                                        </div>
                                        <p><strong>Пример из жизни:</strong> Утренний распорядок: проснулся → почистил зубы → позавтракал → пошел на учёбу.</p>
                                    </div>
                                `
                            },
                            {
                                title: "2. Пример линейной программы",
                                title_by: "2. Прыклад лінейнай праграмы",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code"></i> Вычисление суммы двух чисел</h4>
                                        <div class="code-example">
                                            <pre><code>#include <iostream>
using namespace std;

int main() {
    int a = 10;
    int b = 20;
    int sum = a + b;
    
    cout << "Сумма: " << sum << endl;
    return 0;
}</code></pre>
                                        </div>
                                        <p><strong>Что делает программа:</strong></p>
                                        <ol>
                                            <li>Объявляет переменные a и b</li>
                                            <li>Вычисляет сумму</li>
                                            <li>Выводит результат на экран</li>
                                        </ol>
                                    </div>
                                `
                            },
                            {
                                title: "3. Формирование проекта программы",
                                title_by: "3. Фарміраванне праекта праграмы",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-clipboard-list"></i> Этапы разработки</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">1️⃣</div>
                                                <div class="feature-title">Постановка задачи</div>
                                                <div class="feature-desc">Определить, что должна делать программа</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">2️⃣</div>
                                                <div class="feature-title">Разработка алгоритма</div>
                                                <div class="feature-desc">Построить блок-схему или псевдокод</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">3️⃣</div>
                                                <div class="feature-title">Выбор языка и среды</div>
                                                <div class="feature-desc">Например, C++ в Visual Studio</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">4️⃣</div>
                                                <div class="feature-title">Программирование</div>
                                                <div class="feature-desc">Написание кода</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">5️⃣</div>
                                                <div class="feature-title">Компиляция</div>
                                                <div class="feature-desc">Преобразование в исполняемый файл</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">6️⃣</div>
                                                <div class="feature-title">Отладка</div>
                                                <div class="feature-desc">Исправление ошибок</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">7️⃣</div>
                                                <div class="feature-title">Тестирование</div>
                                                <div class="feature-desc">Проверка корректности</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">8️⃣</div>
                                                <div class="feature-title">Документирование</div>
                                                <div class="feature-desc">Комментарии, инструкции</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Практические примеры",
                                title_by: "4. Практычныя прыклады",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-calculator"></i> Пример 1: Периметр прямоугольника</h4>
                                        <div class="code-example">
                                            <pre><code>#include <iostream>
using namespace std;

int main() {
    double length, width;
    cout << "Введите длину и ширину прямоугольника: ";
    cin >> length >> width;
    
    double perimeter = 2 * (length + width);
    cout << "Периметр прямоугольника: " << perimeter << endl;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-circle"></i> Пример 2: Площадь круга</h4>
                                        <div class="code-example">
                                            <pre><code>#include <iostream>
using namespace std;

int main() {
    const double PI = 3.14159;
    double radius;
    
    cout << "Введите радиус круга: ";
    cin >> radius;
    
    double area = PI * radius * radius;
    cout << "Площадь круга: " << area << endl;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-temperature-high"></i> Пример 3: Перевод температуры</h4>
                                        <div class="code-example">
                                            <pre><code>#include <iostream>
using namespace std;

int main() {
    double celsius;
    cout << "Введите температуру в градусах Цельсия: ";
    cin >> celsius;
    
    double fahrenheit = celsius * 9.0 / 5 + 32;
    cout << "Температура в градусах Фаренгейта: " << fahrenheit << endl;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 6: УСЛОВНЫЙ ОПЕРАТОР ================
                {
                    id: "lecture6",
                    title: "Лекция 6: Разветвляющиеся алгоритмы и программы",
                    title_by: "Лекцыя 6: Разгаліноўваюцца алгарытмы і праграмы",
                    type: "theory",
                    duration: 50,
                    difficulty: "intermediate",
                    points: 150,
                    completed: false,
                    tags: ["условный оператор", "if", "else", "тернарный оператор", "логические операторы"],
                    tags_by: ["умоўны аператар", "if", "else", "тэрнарны аператар", "лагічныя аператары"],
                    content: {
                        overview: "Разветвляющийся алгоритм — это алгоритм, в котором в зависимости от условия выполняется один из нескольких вариантов действий. В этой лекции мы рассмотрим условные операторы и логические выражения.",
                        overview_by: "Разгалінаваны алгарытм — гэта алгарытм, у якім у залежнасці ад умовы выконваецца адзін з некалькіх варыянтаў дзеянняў. У гэтай лекцыі мы разгледзім умоўныя аператары і лагічныя выразы.",
                        sections: [
                            {
                                title: "1. Условный оператор if",
                                title_by: "1. Умоўны аператар if",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code-branch"></i> Простая форма</h4>
                                        <div class="code-example">
                                            <pre><code>if (условие) {
    // действия, если условие истинно
}</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>int age = 20;
if (age >= 18) {
    cout << "Вы совершеннолетний.";
}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code-branch"></i> Полная форма if...else</h4>
                                        <div class="code-example">
                                            <pre><code>if (условие) {
    // действия, если условие истинно
} else {
    // действия, если условие ложно
}</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>int temp = 15;
if (temp >= 20) {
    cout << "Тепло!";
} else {
    cout << "Прохладно!";
}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code-branch"></i> Множественный выбор (else if)</h4>
                                        <div class="code-example">
                                            <pre><code>if (условие1) {
    // действия1
} else if (условие2) {
    // действия2
} else {
    // действия по умолчанию
}</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>int mark = 80;
if (mark >= 90) {
    cout << "Оценка: A";
} else if (mark >= 75) {
    cout << "Оценка: B";
} else if (mark >= 60) {
    cout << "Оценка: C";
} else {
    cout << "Оценка: F";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Логические операторы",
                                title_by: "2. Лагічныя аператары",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-microchip"></i> Составление сложных условий</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Оператор</th><th>Название</th><th>Пример</th><th>Результат</th></tr></thead>
                                                <tbody>
                                                    <tr><td>&&</td><td>И (AND)</td><td>a > 0 && b < 10</td><td>true, если оба условия истинны</td></tr>
                                                    <tr><td>||</td><td>ИЛИ (OR)</td><td>a > 0 || b < 10</td><td>true, если хотя бы одно истинно</td></tr>
                                                    <tr><td>!</td><td>НЕ (NOT)</td><td>!(a == 5)</td><td>true, если условие ложно</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>// Проверка, входит ли число в диапазон [10, 20]
if (x >= 10 && x <= 20) {
    cout << "Число в диапазоне";
}

// Проверка, выходит ли число за пределы
if (x < 10 || x > 20) {
    cout << "Число вне диапазона";
}

// Проверка, не равно ли число нулю
if (!(x == 0)) {
    cout << "Число не равно нулю";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Тернарный оператор ? :",
                                title_by: "3. Тэрнарны аператар ? :",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-question"></i> Краткая форма if...else</h4>
                                        <div class="code-example">
                                            <pre><code>результат = (условие) ? значение1 : значение2;</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>int x = 10;
string result = (x > 5) ? "Больше 5" : "5 или меньше";
cout << result; // Выведет: Больше 5</code></pre>
                                        </div>
                                        <p>Эквивалентно:</p>
                                        <div class="code-example">
                                            <pre><code>int x = 10;
string result;
if (x > 5) {
    result = "Больше 5";
} else {
    result = "5 или меньше";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Примеры программ",
                                title_by: "4. Прыклады праграм",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-check-circle"></i> Проверка чётности числа</h4>
                                        <div class="code-example">
                                            <pre><code>int num;
cin >> num;

if (num % 2 == 0) {
    cout << "Чётное";
} else {
    cout << "Нечётное";
}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-up"></i> Максимум из трёх чисел</h4>
                                        <div class="code-example">
                                            <pre><code>int a, b, c;
cin >> a >> b >> c;

if (a >= b && a >= c) {
    cout << "Наибольшее: " << a;
} else if (b >= a && b >= c) {
    cout << "Наибольшее: " << b;
} else {
    cout << "Наибольшее: " << c;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 7: ОПЕРАТОРЫ ЦИКЛОВ ================
                {
                    id: "lecture7",
                    title: "Лекция 7: Операторы организации циклов. Простой и составной оператор. Итерационные алгоритмы и программы",
                    title_by: "Лекцыя 7: Аператары арганізацыі цыклаў. Просты і складовай аператар. Ітэрацыйныя алгарытмы і праграмы",
                    type: "theory",
                    duration: 60,
                    difficulty: "intermediate",
                    points: 200,
                    completed: false,
                    tags: ["циклы", "while", "for", "do while", "итерация"],
                    tags_by: ["цыклы", "while", "for", "do while", "ітэрацыя"],
                    content: {
                        overview: "Цикл — это способ повторять один и тот же участок кода многократно, пока выполняется определённое условие. В этой лекции мы рассмотрим все виды циклов в C++ и итерационные алгоритмы.",
                        overview_by: "Цыкл — гэта спосаб паўтараць адзін і той жа ўчастак кода шматразова, пакуль выконваецца пэўная ўмова. У гэтай лекцыі мы разгледзім усе віды цыклаў у C++ і ітэрацыйныя алгарытмы.",
                        sections: [
                            {
                                title: "1. Цикл while",
                                title_by: "1. Цыкл while",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-redo-alt"></i> Цикл с предусловием</h4>
                                        <div class="code-example">
                                            <pre><code>while (условие) {
    // тело цикла
}</code></pre>
                                        </div>
                                        <p><strong>Как работает:</strong></p>
                                        <ol>
                                            <li>Проверяется условие</li>
                                            <li>Если оно истинно (true) — выполняется тело цикла</li>
                                            <li>После тела снова проверяется условие</li>
                                            <li>Цикл продолжается, пока условие истинно</li>
                                        </ol>
                                        <div class="code-example">
                                            <pre><code>int i = 1;
while (i <= 5) {
    cout << i << " ";
    i++;
}
// Вывод: 1 2 3 4 5</code></pre>
                                        </div>
                                        <div class="flowchart-ascii">
                                            <pre>    ◇─────◇
   ╱ Условие ╲
  ╱           ╲
 ◆───◇     ◇───◆
 │true    │false
 ▼        │
┌─────┐   │
│Тело │   │
└──┬──┘   │
   └──────┤
          │
          ▼</pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Цикл do...while",
                                title_by: "2. Цыкл do...while",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-redo-alt"></i> Цикл с постусловием</h4>
                                        <div class="code-example">
                                            <pre><code>do {
    // тело цикла
} while (условие);</code></pre>
                                        </div>
                                        <p><strong>Как работает:</strong></p>
                                        <ol>
                                            <li>Сначала выполняется тело цикла</li>
                                            <li>Потом проверяется условие</li>
                                            <li>Если условие истинно — цикл повторяется</li>
                                        </ol>
                                        <p>Гарантированно выполняется хотя бы один раз!</p>
                                        <div class="code-example">
                                            <pre><code>int i = 1;
do {
    cout << i << " ";
    i++;
} while (i <= 5);
// Вывод: 1 2 3 4 5</code></pre>
                                        </div>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────┐
│Тело │
└──┬──┘
   │
   ▼
 ◇─────◇
╱ Условие ╲
╲         ╱
 ◆───◇ ◇───◆
 │true │false
 └────┤
      │
      ▼</pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Цикл for",
                                title_by: "3. Цыкл for",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sync-alt"></i> Цикл со счётчиком</h4>
                                        <div class="code-example">
                                            <pre><code>for (инициализация; условие; изменение) {
    // тело цикла
}</code></pre>
                                        </div>
                                        <p><strong>Как работает:</strong></p>
                                        <ol>
                                            <li>Выполняется инициализация (обычно счётчик)</li>
                                            <li>Проверяется условие</li>
                                            <li>Если истина — выполняется тело цикла</li>
                                            <li>Затем выполняется изменение</li>
                                            <li>Снова проверка условия → и так далее</li>
                                        </ol>
                                        <div class="code-example">
                                            <pre><code>for (int i = 1; i <= 5; i++) {
    cout << i << " ";
}
// Вывод: 1 2 3 4 5</code></pre>
                                        </div>
                                        <div class="flowchart-ascii">
                                            <pre>┌─────────────┐
│ i = 1       │
└──────┬──────┘
       │
       ▼
    ◇─────◇
   ╱ i<=5  ╲
  ╱         ╲
 ◆───◇   ◇───◆
 │true   │false
 ▼       │
┌─────┐  │
│cout │  │
│ i   │  │
└──┬──┘  │
   │     │
   ▼     │
┌─────┐  │
│ i++ │  │
└──┬──┘  │
   └─────┘
       │
       ▼</pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Инкремент и декремент",
                                title_by: "4. Інкрэмент і дэкрэмент",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-plus"></i> Инкремент (++)</h4>
                                        <p>Увеличивает значение на 1</p>
                                        <div class="code-example">
                                            <pre><code>int i = 5;
i++; // постфиксная форма: сначала используется, потом увеличивается
++i; // префиксная форма: сначала увеличивается, потом используется

// Пример разницы
int a = 5;
int b = a++; // b = 5, a = 6

int x = 5;
int y = ++x; // y = 6, x = 6</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-minus"></i> Декремент (--)</h4>
                                        <p>Уменьшает значение на 1</p>
                                        <div class="code-example">
                                            <pre><code>int i = 5;
i--; // постфиксная форма
--i; // префиксная форма</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "5. Управление циклами: break и continue",
                                title_by: "5. Кіраванне цыкламі: break і continue",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-stop"></i> break — досрочный выход</h4>
                                        <div class="code-example">
                                            <pre><code>for (int i = 1; i <= 10; i++) {
    if (i == 5) break; // выход при i = 5
    cout << i << " ";
}
// Вывод: 1 2 3 4</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-forward"></i> continue — переход к следующей итерации</h4>
                                        <div class="code-example">
                                            <pre><code>for (int i = 1; i <= 5; i++) {
    if (i == 3) continue; // пропустить i = 3
    cout << i << " ";
}
// Вывод: 1 2 4 5</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "6. Сравнение циклов",
                                title_by: "6. Параўнанне цыклаў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-table"></i> Характеристики циклов</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Характеристика</th><th>while</th><th>do...while</th><th>for</th></tr></thead>
                                                <tbody>
                                                    <tr><td>Условие проверяется...</td><td>до входа в цикл</td><td>после первого прохода</td><td>до входа в цикл</td></tr>
                                                    <tr><td>Минимум итераций</td><td>0</td><td>1</td><td>0</td></tr>
                                                    <tr><td>Подходит для...</td><td>Пока условие</td><td>Хотя бы один раз</td><td>Счётных циклов</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 8: МАССИВЫ ================
                {
                    id: "lecture8",
                    title: "Лекция 8: Массивы: определение и описание массивов, размещение в памяти, использование",
                    title_by: "Лекцыя 8: Масівы: вызначэнне і апісанне масіваў, размяшчэнне ў памяці, выкарыстанне",
                    type: "theory",
                    duration: 70,
                    difficulty: "intermediate",
                    points: 250,
                    completed: false,
                    tags: ["массивы", "одномерные массивы", "двумерные массивы", "индексация", "память"],
                    tags_by: ["масівы", "аднамерныя масівы", "двухмерныя масівы", "індэксацыя", "памяць"],
                    content: {
                        overview: "Массив — это структура данных, которая позволяет хранить множество однотипных значений под одним именем. В этой лекции мы рассмотрим одномерные и двумерные массивы, их размещение в памяти и способы обработки.",
                        overview_by: "Масіў — гэта структура дадзеных, якая дазваляе захоўваць мноства аднатыпных значэнняў пад адным імем. У гэтай лекцыі мы разгледзім аднамерныя і двухмерныя масівы, іх размяшчэнне ў памяці і спосабы апрацоўкі.",
                        sections: [
                            {
                                title: "1. Одномерные массивы",
                                title_by: "1. Аднамерныя масівы",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-bars"></i> Объявление и инициализация</h4>
                                        <div class="code-example">
                                            <pre><code>тип_данных имя[размер];

int numbers[5]; // массив из 5 целых чисел

// Инициализация при объявлении
int a[5] = {10, 20, 30, 40, 50};
int arr[5] = {10, 20}; // первые два элемента — 10 и 20, остальные — 0
int b[] = {1, 2, 3}; // размер определяется автоматически (3)</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-hashtag"></i> Доступ к элементам</h4>
                                        <p>Индексация начинается с 0!</p>
                                        <div class="code-example">
                                            <pre><code>int a[5] = {10, 20, 30, 40, 50};
cout << a[0]; // первый элемент (10)
a[2] = 100;   // изменить третий элемент

// Вывод всех элементов
for (int i = 0; i < 5; i++) {
    cout << a[i] << " ";
}</code></pre>
                                        </div>
                                        <div class="memory-visualization" style="display: flex; gap: 5px; justify-content: center; margin: 20px 0;">
                                            <div style="width: 60px; height: 60px; border: 2px solid var(--accent-blue); border-radius: 8px; text-align: center; line-height: 60px;">a[0]=10</div>
                                            <div style="width: 60px; height: 60px; border: 2px solid var(--accent-blue); border-radius: 8px; text-align: center; line-height: 60px;">a[1]=20</div>
                                            <div style="width: 60px; height: 60px; border: 2px solid var(--accent-blue); border-radius: 8px; text-align: center; line-height: 60px;">a[2]=30</div>
                                            <div style="width: 60px; height: 60px; border: 2px solid var(--accent-blue); border-radius: 8px; text-align: center; line-height: 60px;">a[3]=40</div>
                                            <div style="width: 60px; height: 60px; border: 2px solid var(--accent-blue); border-radius: 8px; text-align: center; line-height: 60px;">a[4]=50</div>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-random"></i> Генерация случайных чисел</h4>
                                        <div class="code-example">
                                            <pre><code>#include <cstdlib>
#include <ctime>

int main() {
    srand(time(0)); // инициализация генератора
    
    int arr[10];
    for (int i = 0; i < 10; i++) {
        arr[i] = rand() % 100; // случайные числа от 0 до 99
    }
}</code></pre>
                                        </div>
                                        <p><strong>Формулы для диапазонов:</strong></p>
                                        <ul>
                                            <li><code>rand() % (B - A + 1) + A</code> — диапазон [A, B]</li>
                                            <li><code>rand() % 21 - 10</code> — диапазон [-10, 10]</li>
                                            <li><code>rand() % 90 + 10</code> — диапазон [10, 99]</li>
                                        </ul>
                                    </div>
                                `
                            },
                            {
                                title: "2. Типовые задачи с одномерными массивами",
                                title_by: "2. Тыпавыя задачы з аднамернымі масівамі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-calculator"></i> Сумма элементов</h4>
                                        <div class="code-example">
                                            <pre><code>int sum = 0;
for (int i = 0; i < 5; i++) {
    sum += a[i];
}
cout << "Сумма: " << sum;</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-up"></i> Максимальный элемент</h4>
                                        <div class="code-example">
                                            <pre><code>int max = a[0];
for (int i = 1; i < 5; i++) {
    if (a[i] > max) {
        max = a[i];
    }
}
cout << "Максимум: " << max;</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-search"></i> Поиск элемента</h4>
                                        <div class="code-example">
                                            <pre><code>int x, pos = -1;
cout << "Введите число для поиска: ";
cin >> x;

for (int i = 0; i < 5; i++) {
    if (a[i] == x) {
        pos = i;
        break;
    }
}

if (pos != -1) {
    cout << "Элемент найден на позиции " << pos;
} else {
    cout << "Элемент не найден";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Двумерные массивы",
                                title_by: "3. Двухмерныя масівы",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-table"></i> Объявление и инициализация</h4>
                                        <div class="code-example">
                                            <pre><code>тип_данных имя[строки][столбцы];

int matrix[2][3]; // 2 строки, 3 столбца

int m[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};

// Доступ к элементу
cout << m[0][1]; // 2 (1-я строка, 2-й столбец)</code></pre>
                                        </div>
                                        <div style="display: flex; justify-content: center; margin: 20px 0;">
                                            <table style="border-collapse: collapse; border: 2px solid var(--accent-blue);">
                                                <tr><th></th><th>[0]</th><th>[1]</th><th>[2]</th></tr>
                                                <tr><td>[0]</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">1</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">2</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">3</td></tr>
                                                <tr><td>[1]</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">4</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">5</td><td style="border: 1px solid var(--accent-purple); padding: 10px;">6</td></tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code"></i> Ввод и вывод двумерного массива</h4>
                                        <div class="code-example">
                                            <pre><code>const int ROWS = 2, COLS = 3;
int b[ROWS][COLS];

// Ввод
for (int i = 0; i < ROWS; i++) {
    for (int j = 0; j < COLS; j++) {
        cin >> b[i][j];
    }
}

// Вывод
for (int i = 0; i < ROWS; i++) {
    for (int j = 0; j < COLS; j++) {
        cout << b[i][j] << "\\t";
    }
    cout << endl;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Размещение в памяти",
                                title_by: "4. Размяшчэнне ў памяці",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-memory"></i> Как хранятся массивы</h4>
                                        <p>Массивы в памяти размещаются непрерывно. Двумерный массив хранится построчно.</p>
                                        <div class="memory-visualization" style="display: flex; flex-wrap: wrap; gap: 5px; justify-content: center;">
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">1</div>
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">2</div>
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">3</div>
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">4</div>
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">5</div>
                                            <div style="padding: 10px; background: rgba(100,255,218,0.1); border: 1px solid var(--accent-blue);">6</div>
                                        </div>
                                        <p><small>В памяти: 1 2 3 4 5 6 — одна длинная цепочка</small></p>
                                    </div>
                                `
                            },
                            {
                                title: "5. Ошибки при работе с массивами",
                                title_by: "5. Памылкі пры працы з масівамі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-exclamation-triangle"></i> Выход за границы</h4>
                                        <div class="code-example">
                                            <pre><code>int a[3] = {1, 2, 3};
cout << a[5]; // ОШИБКА: выход за пределы массива!</code></pre>
                                        </div>
                                        <p>Всегда следите за размером массива! Выход за границы может привести к неопределённому поведению программы.</p>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 9: ФУНКЦИИ ================
                {
                    id: "lecture9",
                    title: "Лекция 9: Функции. Заголовок и тело, классификация параметров. Вызов функций",
                    title_by: "Лекцыя 9: Функцыі. Загаловак і цела, класіфікацыя параметраў. Выклік функцый",
                    type: "theory",
                    duration: 55,
                    difficulty: "intermediate",
                    points: 200,
                    completed: false,
                    tags: ["функции", "параметры", "возвращаемое значение", "передача параметров"],
                    tags_by: ["функцыі", "параметры", "вяртаемае значэнне", "перадача параметраў"],
                    content: {
                        overview: "Функция — это именованный набор инструкций, которые можно вызвать в любом месте программы. Она может принимать входные данные (параметры), выполнять действия и возвращать результат.",
                        overview_by: "Функцыя — гэта іменаваны набор інструкцый, якія можна выклікаць у любым месцы праграмы. Яна можа прымаць уваходныя дадзеныя (параметры), выконваць дзеянні і вяртаць вынік.",
                        sections: [
                            {
                                title: "1. Структура функции",
                                title_by: "1. Структура функцыі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code"></i> Заголовок и тело функции</h4>
                                        <div class="code-example">
                                            <pre><code>тип_возврата имя_функции(параметры) {
    // тело функции
    return значение; // если тип != void
}</code></pre>
                                        </div>
                                        <div class="code-example">
                                            <pre><code>int sum(int a, int b) {
    return a + b;  // возвращает сумму
}

void printHello() {
    cout << "Hello!";
    return; // можно опустить
}</code></pre>
                                        </div>
                                        <div class="explanation-grid">
                                            <div class="explanation-item">
                                                <div class="explanation-number">1</div>
                                                <div class="explanation-text"><strong>Тип возврата</strong> — что возвращает (int, double, void...)</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">2</div>
                                                <div class="explanation-text"><strong>Имя функции</strong> — идентификатор</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">3</div>
                                                <div class="explanation-text"><strong>Параметры</strong> — входные данные</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">4</div>
                                                <div class="explanation-text"><strong>Тело</strong> — код функции</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">5</div>
                                                <div class="explanation-text"><strong>return</strong> — возврат результата</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Передача параметров",
                                title_by: "2. Перадача параметраў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-right"></i> Способы передачи параметров</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">📦</div>
                                                <div class="feature-title">По значению</div>
                                                <div class="feature-desc">Копия. Исходная переменная не меняется.</div>
                                                <div class="code-example">
                                                    <pre><code>void foo(int x) {
    x = 10; // меняется копия
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔗</div>
                                                <div class="feature-title">По ссылке</div>
                                                <div class="feature-desc">Ссылка на оригинал. Изменяет исходную переменную.</div>
                                                <div class="code-example">
                                                    <pre><code>void foo(int &x) {
    x = 10; // меняет оригинал
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">📍</div>
                                                <div class="feature-title">По указателю</div>
                                                <div class="feature-desc">Адрес переменной.</div>
                                                <div class="code-example">
                                                    <pre><code>void foo(int *x) {
    *x = 10; // через адрес
}</code></pre>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-exchange-alt"></i> Пример с передачей по ссылке</h4>
                                        <div class="code-example">
                                            <pre><code>void swap(int &a, int &b) {
    int temp = a;
    a = b;
    b = temp;
}

int x = 10, y = 20;
swap(x, y); // теперь x = 20, y = 10</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Вызов функции",
                                title_by: "3. Выклік функцыі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-play"></i> Как вызвать функцию</h4>
                                        <div class="code-example">
                                            <pre><code>int sum(int a, int b) {
    return a + b;
}

int main() {
    int result = sum(5, 3); // вызов функции
    cout << "Сумма: " << result;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Примеры функций",
                                title_by: "4. Прыклады функцый",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-cubes"></i> Решение типовых задач</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-title">Квадрат числа</div>
                                                <div class="code-example">
                                                    <pre><code>int square(int x) {
    return x * x;
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Проверка на чётность</div>
                                                <div class="code-example">
                                                    <pre><code>bool isEven(int n) {
    return n % 2 == 0;
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Сумма цифр</div>
                                                <div class="code-example">
                                                    <pre><code>int sumOfDigits(int n) {
    int sum = 0;
    while (n != 0) {
        sum += n % 10;
        n /= 10;
    }
    return sum;
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Максимум из трёх</div>
                                                <div class="code-example">
                                                    <pre><code>int maxOfThree(int a,int b,int c){
    int max = a;
    if (b > max) max = b;
    if (c > max) max = c;
    return max;
}</code></pre>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 10: ИСПОЛЬЗОВАНИЕ ПОДПРОГРАММ ================
                {
                    id: "lecture10",
                    title: "Лекция 10: Особенности использования подпрограмм (функций)",
                    title_by: "Лекцыя 10: Асаблівасці выкарыстання падпраграм (функцый)",
                    type: "theory",
                    duration: 45,
                    difficulty: "intermediate",
                    points: 150,
                    completed: false,
                    tags: ["подпрограммы", "инкапсуляция", "рекурсия", "область видимости"],
                    tags_by: ["падпраграмы", "інкапсуляцыя", "рэкурсія", "вобласць бачнасці"],
                    content: {
                        overview: "Подпрограмма — это отдельный блок кода, который выполняет определённую задачу и может быть вызван из разных частей программы. В этой лекции мы рассмотрим особенности использования функций.",
                        overview_by: "Падпраграма — гэта асобны блок кода, які выконвае пэўную задачу і можа быць выкліканы з розных частак праграмы. У гэтай лекцыі мы разгледзім асаблівасці выкарыстання функцый.",
                        sections: [
                            {
                                title: "1. Преимущества использования подпрограмм",
                                title_by: "1. Перавагі выкарыстання падпраграм",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-check-circle"></i> Зачем нужны функции?</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">🔄</div>
                                                <div class="feature-title">Повторное использование</div>
                                                <div class="feature-desc">Пишем код один раз, используем многократно</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🧩</div>
                                                <div class="feature-title">Модульность</div>
                                                <div class="feature-desc">Программа делится на логические блоки</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🐛</div>
                                                <div class="feature-title">Простота отладки</div>
                                                <div class="feature-desc">Легко находить ошибки в изолированном коде</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">🔒</div>
                                                <div class="feature-title">Инкапсуляция</div>
                                                <div class="feature-desc">Скрытие деталей реализации</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Область видимости переменных",
                                title_by: "2. Вобласць бачнасці пераменных",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-globe"></i> Локальные и глобальные переменные</h4>
                                        <div class="code-example">
                                            <pre><code>int globalVar = 100; // глобальная переменная

void func() {
    int localVar = 10; // локальная переменная
    // localVar доступна только внутри func
    cout << globalVar; // глобальная доступна везде
}

int main() {
    // localVar НЕ доступна здесь!
    cout << globalVar; // 100
}</code></pre>
                                        </div>
                                        <p>✅ Локальные переменные создаются при входе в функцию и уничтожаются при выходе.</p>
                                        <p>⚠️ Глобальные переменные лучше использовать редко (могут привести к ошибкам).</p>
                                    </div>
                                `
                            },
                            {
                                title: "3. Рекурсивные вызовы",
                                title_by: "3. Рэкурсіўныя выклікі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-repeat"></i> Рекурсия — функция вызывает саму себя</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-title">Факториал</div>
                                                <div class="code-example">
                                                    <pre><code>int fact(int n) {
    if (n == 0) return 1;
    return n * fact(n - 1);
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Числа Фибоначчи</div>
                                                <div class="code-example">
                                                    <pre><code>int fib(int n) {
    if (n == 0) return 0;
    if (n == 1) return 1;
    return fib(n-1) + fib(n-2);
}</code></pre>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="interactive-block">
                                            <h5>Важно!</h5>
                                            <p>Рекурсия обязательно должна иметь <strong>базовый случай</strong> (условие выхода), иначе произойдёт переполнение стека (stack overflow).</p>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 11: СТРОКИ ================
                {
                    id: "lecture11",
                    title: "Лекция 11: Символьные переменные и строки. Организация, размещение в памяти, процедуры и функции обработки строк",
                    title_by: "Лекцыя 11: Сімвальныя зменныя і радкі. Арганізацыя, размяшчэнне ў памяці, працэдуры і функцыі апрацоўкі радкоў",
                    type: "theory",
                    duration: 65,
                    difficulty: "intermediate",
                    points: 250,
                    completed: false,
                    tags: ["строки", "string", "char", "обработка строк", "cctype"],
                    tags_by: ["радкі", "string", "char", "апрацоўка радкоў", "cctype"],
                    content: {
                        overview: "В этой лекции мы рассмотрим работу с символьными переменными и строками в C++. Изучим класс std::string и функции для обработки строк.",
                        overview_by: "У гэтай лекцыі мы разгледзім працу з сімвальнымі зменнымі і радкамі ў C++. Вывучым клас std::string і функцыі для апрацоўкі радкоў.",
                        sections: [
                            {
                                title: "1. Символьные переменные (char)",
                                title_by: "1. Сімвальныя зменныя (char)",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-font"></i> Тип char</h4>
                                        <p>Символьная переменная хранит один символ и объявляется с типом char.</p>
                                        <div class="code-example">
                                            <pre><code>char ch = 'A'; // символ в одинарных кавычках
cout << ch << " = " << int(ch); // A = 65 (ASCII код)</code></pre>
                                        </div>
                                        <p>В памяти символ хранится как числовой код (ASCII, Unicode).</p>
                                    </div>
                                `
                            },
                            {
                                title: "2. Класс std::string",
                                title_by: "2. Клас std::string",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-pencil-alt"></i> Объявление и инициализация</h4>
                                        <div class="code-example">
                                            <pre><code>#include <string>

string s1;                // пустая строка
string s2 = "Hello";      // инициализация литералом
string s3("World");       // конструктор
string s4(5, '*');        // "*****" (повтор символа)
string s5 = s2;           // копия</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-ruler"></i> Длина строки</h4>
                                        <div class="code-example">
                                            <pre><code>string s = "Hello";
cout << s.size();    // 5
cout << s.length();  // 5 (то же самое)
cout << s.empty();   // false (проверка на пустоту)</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Операции со строками",
                                title_by: "3. Аперацыі з радкамі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-plus"></i> Конкатенация и доступ</h4>
                                        <div class="code-example">
                                            <pre><code>string a = "Hello";
string b = "World";
string c = a + " " + b; // "Hello World"
a += "!"; // "Hello!"

char ch = a[0];  // 'H' (без проверки)
char ch2 = a.at(0); // 'H' (с проверкой границ)</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-search"></i> Поиск и подстроки</h4>
                                        <div class="code-example">
                                            <pre><code>string s = "abracadabra";

size_t pos = s.find("bra"); // 1 (первое вхождение)
pos = s.rfind("bra");       // 8 (с конца)

if (s.find("cat") == string::npos) {
    cout << "Не найдено";
}

string sub = s.substr(2, 5); // "racad" (подстрока)</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-edit"></i> Изменение строк</h4>
                                        <div class="code-example">
                                            <pre><code>string s = "I like cats";

// Замена
s.replace(7, 4, "dogs"); // "I like dogs"

// Вставка
s.insert(5, " really");  // "I really like dogs"

// Удаление
s.erase(2, 6);          // "I like dogs"

// Добавление символа
s.push_back('!');       // "I like dogs!"</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-exchange-alt"></i> Преобразования</h4>
                                        <div class="code-example">
                                            <pre><code>// Число -> строка
string numStr = to_string(123.45); // "123.450000"

// Строка -> число
int i = stoi("42");     // 42
double d = stod("3.14"); // 3.14
long l = stol("100000"); // 100000L</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Функции из <cctype> для работы с символами",
                                title_by: "4. Функцыі з <cctype> для працы з сімваламі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-check"></i> Проверка символов</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Функция</th><th>Что проверяет</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>isalnum(c)</td><td>Буква или цифра</td><td>isalnum('a') → true</td></tr>
                                                    <tr><td>isalpha(c)</td><td>Буква</td><td>isalpha('Z') → true</td></tr>
                                                    <tr><td>isdigit(c)</td><td>Цифра</td><td>isdigit('7') → true</td></tr>
                                                    <tr><td>isspace(c)</td><td>Пробельный символ</td><td>isspace(' ') → true</td></tr>
                                                    <tr><td>ispunct(c)</td><td>Знак препинания</td><td>ispunct('.') → true</td></tr>
                                                    <tr><td>isupper(c)</td><td>Заглавная буква</td><td>isupper('A') → true</td></tr>
                                                    <tr><td>islower(c)</td><td>Строчная буква</td><td>islower('a') → true</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-up"></i> Преобразование символов</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Функция</th><th>Что делает</th><th>Пример</th></tr></thead>
                                                <tbody>
                                                    <tr><td>toupper(c)</td><td>Переводит в верхний регистр</td><td>toupper('a') → 'A'</td></tr>
                                                    <tr><td>tolower(c)</td><td>Переводит в нижний регистр</td><td>tolower('Z') → 'z'</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="code-example">
                                        <pre><code>#include <iostream>
#include <string>
#include <cctype>
using namespace std;

int main() {
    string s = "Hello123World!";
    string result;
    
    // Удалить все цифры
    for (char c : s) {
        if (!isdigit(c)) {
            result += c;
        }
    }
    
    cout << result; // HelloWorld!
    return 0;
}</code></pre>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 12: МНОЖЕСТВА ================
                {
                    id: "lecture12",
                    title: "Лекция 12: Множества, операции над множествами. Использование множеств для решения задач",
                    title_by: "Лекцыя 12: Мноствы, аперацыі над мноствамі. Выкарыстанне мностваў для рашэння задач",
                    type: "theory",
                    duration: 60,
                    difficulty: "advanced",
                    points: 300,
                    completed: false,
                    tags: ["множества", "set", "unordered_set", "объединение", "пересечение"],
                    tags_by: ["мноствы", "set", "unordered_set", "аб'яднанне", "перасячэнне"],
                    content: {
                        overview: "Множество — это структура данных, которая хранит уникальные элементы. В C++ множества реализованы в стандартной библиотеке как std::set (упорядоченное) и std::unordered_set (хеш-таблица).",
                        overview_by: "Мноства — гэта структура дадзеных, якая захоўвае унікальныя элементы. У C++ мноствы рэалізаваны ў стандартнай бібліятэцы як std::set (упарадкаванае) і std::unordered_set (хэш-табліца).",
                        sections: [
                            {
                                title: "1. Виды множеств в C++",
                                title_by: "1. Віды мностваў у C++",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-layer-group"></i> Сравнение set, multiset, unordered_set</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Тип</th><th>Особенности</th><th>Сложность</th><th>Заголовок</th></tr></thead>
                                                <tbody>
                                                    <tr><td><strong>set</strong></td><td>Уникальные, отсортированные</td><td>O(log n)</td><td>&lt;set&gt;</td></tr>
                                                    <tr><td><strong>multiset</strong></td><td>С дубликатами, отсортированные</td><td>O(log n)</td><td>&lt;set&gt;</td></tr>
                                                    <tr><td><strong>unordered_set</strong></td><td>Уникальные, хеш-таблица</td><td>O(1) средний</td><td>&lt;unordered_set&gt;</td></tr>
                                                    <tr><td><strong>unordered_multiset</strong></td><td>С дубликатами, хеш-таблица</td><td>O(1) средний</td><td>&lt;unordered_set&gt;</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code"></i> Объявление и основные операции</h4>
                                        <div class="code-example">
                                            <pre><code>#include <set>
#include <unordered_set>

set<int> s;                    // пустое множество
set<int> s2 = {5,2,8,2};       // {2,5,8} (дубликаты игнорируются)

unordered_set<string> us;      // хеш-множество
us.insert("apple");
us.insert("banana");

// Добавление
s.insert(10);
s.insert(5);

// Удаление
s.erase(5);

// Поиск
if (s.count(10)) cout << "Найдено";
auto it = s.find(10);
if (it != s.end()) cout << *it;

// Размер
cout << s.size();</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Операции над множествами",
                                title_by: "2. Аперацыі над мноствамі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-union"></i> Объединение множеств</h4>
                                        <div class="code-example">
                                            <pre><code>set<int> A = {1,2,3};
set<int> B = {3,4,5};
set<int> Union = A;
Union.insert(B.begin(), B.end()); // {1,2,3,4,5}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-intersection"></i> Пересечение множеств</h4>
                                        <div class="code-example">
                                            <pre><code>set<int> Intersect;
for (int x : A) {
    if (B.count(x)) {
        Intersect.insert(x);
    }
} // {3}</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-minus"></i> Разность множеств (A - B)</h4>
                                        <div class="code-example">
                                            <pre><code>set<int> Diff;
for (int x : A) {
    if (!B.count(x)) {
        Diff.insert(x);
    }
} // {1,2}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Итераторы при работе с множествами",
                                title_by: "3. Ітаратары пры працы з мноствамі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrows-alt-h"></i> Обход множества</h4>
                                        <div class="code-example">
                                            <pre><code>set<int> numbers = {5, 2, 8, 1};

// Range-based for (проще всего)
for (int x : numbers) {
    cout << x << " ";
}

// С итератором
for (auto it = numbers.begin(); it != numbers.end(); ++it) {
    cout << *it << " ";
}

// Обратный обход
for (auto it = numbers.rbegin(); it != numbers.rend(); ++it) {
    cout << *it << " ";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Примеры задач",
                                title_by: "4. Прыклады задач",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-hashtag"></i> Подсчёт уникальных чисел</h4>
                                        <div class="code-example">
                                            <pre><code>int n, x;
set<int> unique;
cin >> n;
for (int i = 0; i < n; i++) {
    cin >> x;
    unique.insert(x);
}
cout << "Уникальных чисел: " << unique.size();</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-copy"></i> Проверка наличия дубликатов</h4>
                                        <div class="code-example">
                                            <pre><code>bool hasDuplicate = false;
set<int> seen;
for (int i = 0; i < n; i++) {
    cin >> x;
    if (seen.count(x)) {
        hasDuplicate = true;
        break;
    }
    seen.insert(x);
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 13: СОРТИРОВКА И ПОИСК ================
                {
                    id: "lecture13",
                    title: "Лекция 13: Сортировка и поиск информации. Методы внутренней сортировки",
                    title_by: "Лекцыя 13: Сартаванне і пошук інфармацыі. Метады ўнутранага сартавання",
                    type: "theory",
                    duration: 70,
                    difficulty: "advanced",
                    points: 350,
                    completed: false,
                    tags: ["сортировка", "поиск", "бинарный поиск", "линейный поиск", "алгоритмы"],
                    tags_by: ["сартаванне", "пошук", "бінарны пошук", "лінейны пошук", "алгарытмы"],
                    content: {
                        overview: "Сортировка — это процесс упорядочивания данных по возрастанию или убыванию. Поиск — нахождение элемента в структуре данных. В этой лекции мы рассмотрим основные алгоритмы сортировки и поиска.",
                        overview_by: "Сартаванне — гэта працэс упарадкавання дадзеных па ўзрастанні ці змяншэнні. Пошук — знаходжанне элемента ў структуры дадзеных. У гэтай лекцыі мы разгледзім асноўныя алгарытмы сартавання і пошуку.",
                        sections: [
                            {
                                title: "1. Алгоритмы сортировки",
                                title_by: "1. Алгарытмы сартавання",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sort-amount-down"></i> Пузырьковая сортировка (Bubble Sort)</h4>
                                        <div class="code-example">
                                            <pre><code>void bubbleSort(int arr[], int n) {
    for (int i = 0; i < n - 1; i++) {
        for (int j = 0; j < n - i - 1; j++) {
            if (arr[j] > arr[j + 1]) {
                // Обмен элементов
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(n²) в худшем случае</p>
                                        <p><strong>Принцип:</strong> Сравниваем соседние элементы и меняем их местами, если они стоят в неправильном порядке. Наибольший элемент «всплывает» в конец.</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sort-amount-up"></i> Сортировка вставками (Insertion Sort)</h4>
                                        <div class="code-example">
                                            <pre><code>void insertionSort(int arr[], int n) {
    for (int i = 1; i < n; i++) {
        int key = arr[i]; // запоминаем текущий элемент
        int j = i - 1;
        
        // сдвигаем элементы, которые больше key, вправо
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j];
            j--;
        }
        arr[j + 1] = key; // вставляем key на нужное место
    }
}</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(n²) в худшем случае, O(n) в лучшем</p>
                                        <p><strong>Принцип:</strong> Берём элементы по одному и вставляем на своё место в уже отсортированной части массива.</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sort-numeric-down"></i> Сортировка выбором (Selection Sort)</h4>
                                        <div class="code-example">
                                            <pre><code>void selectionSort(int arr[], int n) {
    for (int i = 0; i < n - 1; i++) {
        int minIndex = i;
        // поиск индекса минимального элемента
        for (int j = i + 1; j < n; j++) {
            if (arr[j] < arr[minIndex]) {
                minIndex = j;
            }
        }
        // обмен текущего элемента с найденным минимальным
        if (minIndex != i) {
            int temp = arr[i];
            arr[i] = arr[minIndex];
            arr[minIndex] = temp;
        }
    }
}</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(n²)</p>
                                        <p><strong>Принцип:</strong> Находим наименьший элемент и ставим в начало, затем повторяем для оставшейся части.</p>
                                    </div>
                                `
                            },
                            {
                                title: "2. STL: сортировка",
                                title_by: "2. STL: сартаванне",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-magic"></i> std::sort</h4>
                                        <div class="code-example">
                                            <pre><code>#include <algorithm>

int arr[] = {4, 1, 3, 5, 2};
int n = sizeof(arr)/sizeof(arr[0]);

// По возрастанию
sort(arr, arr + n); // {1, 2, 3, 4, 5}

// По убыванию
sort(arr, arr + n, greater<int>());</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(n log n) — быстрая сортировка (introsort)</p>
                                    </div>
                                `
                            },
                            {
                                title: "3. Алгоритмы поиска",
                                title_by: "3. Алгарытмы пошуку",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-search"></i> Линейный поиск (Linear Search)</h4>
                                        <div class="code-example">
                                            <pre><code>int linearSearch(int arr[], int n, int key) {
    for (int i = 0; i < n; i++) {
        if (arr[i] == key) {
            return i; // возвращаем индекс, если найден
        }
    }
    return -1; // не найден
}</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(n)</p>
                                        <p><strong>Применение:</strong> для неотсортированных массивов</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-search-plus"></i> Бинарный поиск (Binary Search)</h4>
                                        <div class="code-example">
                                            <pre><code>int binarySearch(int arr[], int left, int right, int key) {
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (arr[mid] == key) {
            return mid; // элемент найден
        }
        if (arr[mid] < key) {
            left = mid + 1; // ищем в правой половине
        } else {
            right = mid - 1; // ищем в левой половине
        }
    }
    return -1; // не найден
}</code></pre>
                                        </div>
                                        <p><strong>Сложность:</strong> O(log n)</p>
                                        <p><strong>Применение:</strong> только для отсортированных массивов</p>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-bolt"></i> STL: бинарный поиск</h4>
                                        <div class="code-example">
                                            <pre><code>#include <algorithm>

if (binary_search(arr, arr + n, 5)) {
    cout << "Элемент найден";
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Сравнение методов поиска",
                                title_by: "4. Параўнанне метадаў пошуку",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-chart-line"></i> Таблица сравнения</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Метод поиска</th><th>Когда использовать</th><th>Сложность</th></tr></thead>
                                                <tbody>
                                                    <tr><td>Линейный поиск</td><td>Неотсортированные данные</td><td>O(n)</td></tr>
                                                    <tr><td>Бинарный поиск</td><td>Отсортированные данные</td><td>O(log n)</td></tr>
                                                    <tr><td>Хеш-таблица</td><td>Поиск по ключу (unordered_map)</td><td>O(1)</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 14: МЕТОД ПОШАГОВОЙ ДЕТАЛИЗАЦИИ ================
                {
                    id: "lecture14",
                    title: "Лекция 14: Метод пошаговой детализации разработки алгоритмов. Особенности использования массивов в качестве параметров",
                    title_by: "Лекцыя 14: Метад пакрокавай дэталізацыі распрацоўкі алгарытмаў. Асаблівасці выкарыстання масіваў у якасці параметраў",
                    type: "theory",
                    duration: 50,
                    difficulty: "intermediate",
                    points: 200,
                    completed: false,
                    tags: ["пошаговая детализация", "top-down", "массивы как параметры"],
                    tags_by: ["пакрокавая дэталізацыя", "top-down", "масівы як параметры"],
                    content: {
                        overview: "Метод пошаговой детализации — это метод разработки алгоритмов, при котором общая задача последовательно разбивается на всё более мелкие и конкретные шаги. Это помогает структурировать сложные задачи и упрощает понимание алгоритма.",
                        overview_by: "Метад пакрокавай дэталізацыі — гэта метад распрацоўкі алгарытмаў, пры якім агульная задача паслядоўна разбіваецца на ўсё больш дробныя і канкрэтныя крокі. Гэта дапамагае структураваць складаныя задачы і спрашчае разуменне алгарытму.",
                        sections: [
                            {
                                title: "1. Метод пошаговой детализации",
                                title_by: "1. Метад пакрокавай дэталізацыі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sitemap"></i> Основные этапы</h4>
                                        <ol class="usage-list" style="list-style-type: decimal;">
                                            <li><strong>Общее описание решения задачи</strong> — что нужно сделать в целом</li>
                                            <li><strong>Выделение крупных блоков (подзадач)</strong> — например, ввод данных, обработка, вывод</li>
                                            <li><strong>Детализация каждого блока</strong> — что конкретно нужно сделать в каждом</li>
                                            <li><strong>Дальнейшее разбиение подзадач на более мелкие шаги</strong> — пока не получим простые инструкции</li>
                                            <li><strong>Переход к программированию</strong> — каждая мелкая часть оформляется в функцию</li>
                                        </ol>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-lightbulb"></i> Пример: поиск максимума в массиве</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-icon">1️⃣</div>
                                                <div class="feature-title">Общее задание</div>
                                                <div class="feature-desc">Найти максимальное значение в массиве</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">2️⃣</div>
                                                <div class="feature-title">Подзадачи</div>
                                                <div class="feature-desc">Получить массив, пройти по элементам, запомнить максимум, вывести результат</div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-icon">3️⃣</div>
                                                <div class="feature-title">Детализация</div>
                                                <div class="feature-desc">Инициализировать максимум первым элементом, сравнивать с остальными</div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Массивы как параметры функций",
                                title_by: "2. Масівы як параметры функцый",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-arrow-right"></i> Особенности передачи массивов</h4>
                                        <p>В C++ массивы передаются в функции не полностью, а как указатель на первый элемент. Информация о размере массива не передаётся автоматически!</p>
                                        <div class="code-example">
                                            <pre><code>// Функция с параметром-массивом
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
}</code></pre>
                                        </div>
                                        <div class="explanation-grid">
                                            <div class="explanation-item">
                                                <div class="explanation-number">1</div>
                                                <div class="explanation-text">Размер массива нужно передавать явно</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">2</div>
                                                <div class="explanation-text">Изменения в функции влияют на исходный массив</div>
                                            </div>
                                            <div class="explanation-item">
                                                <div class="explanation-number">3</div>
                                                <div class="explanation-text">Можно передавать как int* arr (указатель)</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-code"></i> Пример с изменением массива</h4>
                                        <div class="code-example">
                                            <pre><code>void incrementAll(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        arr[i] += 1; // увеличиваем каждый элемент на 1
    }
}

int main() {
    int nums[] = {1, 2, 3, 4, 5};
    incrementAll(nums, 5);
    // nums стал {2, 3, 4, 5, 6}
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Пример задачи с пошаговой детализацией",
                                title_by: "3. Прыклад задачы з пакрокавай дэталізацыяй",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-calculator"></i> Задача: найти сумму положительных элементов массива</h4>
                                        <div class="code-example">
                                            <pre><code>// Функция для подсчёта суммы положительных элементов
int sumPositive(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        if (arr[i] > 0) {
            sum += arr[i];
        }
    }
    return sum;
}

int main() {
    int n;
    cout << "Введите размер массива: ";
    cin >> n;
    
    int* arr = new int[n]; // динамический массив
    
    cout << "Введите элементы: ";
    for (int i = 0; i < n; i++) {
        cin >> arr[i];
    }
    
    int result = sumPositive(arr, n);
    cout << "Сумма положительных: " << result;
    
    delete[] arr; // освобождаем память
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 15: ЗАПИСИ (СТРУКТУРЫ) ================
                {
                    id: "lecture15",
                    title: "Лекция 15: Записи (структуры)",
                    title_by: "Лекцыя 15: Запісы (структуры)",
                    type: "theory",
                    duration: 55,
                    difficulty: "intermediate",
                    points: 250,
                    completed: false,
                    tags: ["структуры", "struct", "пользовательские типы", "поля"],
                    tags_by: ["структуры", "struct", "карыстальніцкія тыпы", "палі"],
                    content: {
                        overview: "Структура (struct) — это пользовательский тип данных, который позволяет объединить переменные разных типов в один логический блок. Это мощный инструмент для представления сложных объектов.",
                        overview_by: "Структура (struct) — гэта карыстальніцкі тып дадзеных, які дазваляе аб'яднаць зменныя розных тыпаў у адзін лагічны блок. Гэта магутны інструмент для прадстаўлення складаных аб'ектаў.",
                        sections: [
                            {
                                title: "1. Что такое структура?",
                                title_by: "1. Што такое структура?",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-cube"></i> Определение</h4>
                                        <p><strong>Структура (struct)</strong> — это составной тип данных, объединяющий несколько переменных (полей) разных типов под одним именем.</p>
                                        <div class="code-example">
                                            <pre><code>struct Student {
    string name;
    int age;
    double gpa;
};</code></pre>
                                        </div>
                                    </div>
                                    <div class="theory-section">
                                        <h4><i class="fas fa-edit"></i> Объявление и использование</h4>
                                        <div class="code-example">
                                            <pre><code>Student s1;                     // переменная типа Student
s1.name = "Ivan";
s1.age = 20;
s1.gpa = 4.5;

Student s2 = {"Anna", 19, 4.8}; // инициализация при объявлении

cout << s2.name; // доступ к полю через точку</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Ввод и вывод структуры",
                                title_by: "2. Увод і вывад структуры",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-keyboard"></i> Пример ввода</h4>
                                        <div class="code-example">
                                            <pre><code>Student s;
cout << "Введите имя: ";
cin >> s.name;
cout << "Введите возраст: ";
cin >> s.age;
cout << "Введите GPA: ";
cin >> s.gpa;</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Массив структур",
                                title_by: "3. Масіў структур",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-list"></i> Хранение нескольких объектов</h4>
                                        <div class="code-example">
                                            <pre><code>Student group[3]; // массив из 3 студентов

for (int i = 0; i < 3; i++) {
    cout << "Студент #" << i+1 << ": ";
    cin >> group[i].name >> group[i].age >> group[i].gpa;
}

for (int i = 0; i < 3; i++) {
    cout << group[i].name << " (" << group[i].age << ") - " 
         << group[i].gpa << endl;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "4. Структура как параметр функции",
                                title_by: "4. Структура як параметр функцыі",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-exchange-alt"></i> Передача в функцию</h4>
                                        <div class="code-example">
                                            <pre><code>// По значению (копия)
void printStudent(Student s) {
    cout << s.name << " (" << s.age << ")";
}

// По ссылке (экономия памяти)
void updateGPA(Student &s, double newGPA) {
    s.gpa = newGPA;
}

// Константная ссылка (только чтение)
void printStudent(const Student &s) {
    cout << s.name << " - " << s.gpa;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "5. Вложенные структуры",
                                title_by: "5. Укладзеныя структуры",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-layer-group"></i> Структуры внутри структур</h4>
                                        <div class="code-example">
                                            <pre><code>struct Date {
    int day;
    int month;
    int year;
};

struct Passport {
    string owner;
    Date issueDate;
};

Passport p;
p.owner = "Ivan";
p.issueDate.day = 15;
p.issueDate.month = 5;
p.issueDate.year = 2020;</code></pre>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "6. Практический пример",
                                title_by: "6. Практычны прыклад",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-shopping-cart"></i> Структура «Товар»</h4>
                                        <div class="code-example">
                                            <pre><code>struct Product {
    string name;
    double price;
    int quantity;
};

void printProduct(const Product& p) {
    cout << "Товар: " << p.name
         << ", Цена: " << p.price
         << ", Количество: " << p.quantity
         << endl;
}

double totalCost(const Product& p) {
    return p.price * p.quantity;
}

int main() {
    Product item = {"Ноутбук", 1500.5, 3};
    printProduct(item);
    cout << "Общая стоимость: " << totalCost(item) << " $" << endl;
    return 0;
}</code></pre>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                },

                // ================ ЛЕКЦИЯ 16: РЕКУРРЕНТНЫЕ ВЫРАЖЕНИЯ. РЕКУРСИЯ ================
                {
                    id: "lecture16",
                    title: "Лекция 16: Рекуррентные выражения. Рекурсия: прямая и косвенная",
                    title_by: "Лекцыя 16: Рэкурэнтныя выразы. Рэкурсія: прамая і ўскосная",
                    type: "theory",
                    duration: 60,
                    difficulty: "advanced",
                    points: 300,
                    completed: false,
                    tags: ["рекуррентные выражения", "рекурсия", "факториал", "Фибоначчи", "стек вызовов"],
                    tags_by: ["рэкурэнтныя выразы", "рэкурсія", "фактарыял", "Фібаначы", "стэк выклікаў"],
                    content: {
                        overview: "Рекуррентное выражение — это отношение, при котором следующее значение функции или последовательности зависит от предыдущих. Рекурсия — это способ организации вычислений, при котором функция вызывает саму себя.",
                        overview_by: "Рэкурэнтны выраз — гэта адносіна, пры якой наступнае значэнне функцыі або паслядоўнасці залежыць ад папярэдніх. Рэкурсія — гэта спосаб арганізацыі вылічэнняў, пры якім функцыя выклікае саму сябе.",
                        sections: [
                            {
                                title: "1. Рекуррентные выражения",
                                title_by: "1. Рэкурэнтныя выразы",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-infinity"></i> Определение</h4>
                                        <p><strong>Рекуррентное выражение</strong> (или рекуррентная формула) — это отношение, при котором следующее значение функции или последовательности зависит от предыдущих.</p>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-title">Факториал</div>
                                                <p style="font-size: 18px;">n! = n · (n-1)!</p>
                                                <p>0! = 1</p>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Числа Фибоначчи</div>
                                                <p style="font-size: 18px;">F(n) = F(n-1) + F(n-2)</p>
                                                <p>F(0)=0, F(1)=1</p>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "2. Прямая рекурсия",
                                title_by: "2. Прамая рэкурсія",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-redo-alt"></i> Функция вызывает саму себя</h4>
                                        <div class="features-grid">
                                            <div class="feature-card">
                                                <div class="feature-title">Факториал</div>
                                                <div class="code-example">
                                                    <pre><code>int factorial(int n) {
    if (n == 0) return 1; // базовый случай
    return n * factorial(n - 1); // рекурсивный вызов
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Числа Фибоначчи</div>
                                                <div class="code-example">
                                                    <pre><code>int fib(int n) {
    if (n == 0) return 0;
    if (n == 1) return 1;
    return fib(n-1) + fib(n-2);
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Сумма цифр</div>
                                                <div class="code-example">
                                                    <pre><code>int sumDigits(int n) {
    if (n == 0) return 0;
    return (n % 10) + sumDigits(n / 10);
}</code></pre>
                                                </div>
                                            </div>
                                            <div class="feature-card">
                                                <div class="feature-title">Степень числа</div>
                                                <div class="code-example">
                                                    <pre><code>int power(int a, int b) {
    if (b == 0) return 1;
    return a * power(a, b - 1);
}</code></pre>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `
                            },
                            {
                                title: "3. Косвенная рекурсия",
                                title_by: "3. Ускосная рэкурсія",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-sync-alt"></i> Взаимный вызов функций</h4>
                                        <div class="code-example">
                                            <pre><code>void funcA(int n);
void funcB(int n);

void funcA(int n) {
    if (n > 0) {
        cout << "A: " << n << endl;
        funcB(n - 1);
    }
}

void funcB(int n) {
    if (n > 0) {
        cout << "B: " << n << endl;
        funcA(n / 2);
    }
}</code></pre>
                                        </div>
                                        <p><strong>Вывод при вызове funcA(5):</strong></p>
                                        <pre>A: 5
B: 4
A: 2
B: 1
A: 0</pre>
                                    </div>
                                `
                            },
                            {
                                title: "4. Базовый случай и стек вызовов",
                                title_by: "4. Базавы выпадак і стэк выклікаў",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-layer-group"></i> Стек вызовов</h4>
                                        <p>Каждый вызов функции помещается в стек. Когда достигается базовый случай, стек начинает «разворачиваться» — функции завершаются в обратном порядке.</p>
                                        <div class="memory-visualization" style="display: flex; flex-direction: column-reverse; align-items: center;">
                                            <div style="padding: 10px; border: 1px solid var(--accent-red); margin: 2px; width: 200px; text-align: center;">factorial(0) → 1</div>
                                            <div style="padding: 10px; border: 1px solid var(--accent-yellow); margin: 2px; width: 200px; text-align: center;">factorial(1) → 1 * 1 = 1</div>
                                            <div style="padding: 10px; border: 1px solid var(--accent-green); margin: 2px; width: 200px; text-align: center;">factorial(2) → 2 * 1 = 2</div>
                                            <div style="padding: 10px; border: 1px solid var(--accent-blue); margin: 2px; width: 200px; text-align: center;">factorial(3) → 3 * 2 = 6</div>
                                            <div style="padding: 10px; border: 1px solid var(--accent-purple); margin: 2px; width: 200px; text-align: center;">factorial(4) → 4 * 6 = 24</div>
                                            <div style="padding: 10px; border: 1px solid var(--accent-orange); margin: 2px; width: 200px; text-align: center;">factorial(5) → 5 * 24 = 120</div>
                                        </div>
                                    </div>
                                    <div class="interactive-block">
                                        <h4><i class="fas fa-exclamation-triangle"></i> Важно!</h4>
                                        <p>Каждая рекурсивная функция должна иметь <strong>базовый случай</strong> (условие завершения), иначе программа зациклится и произойдёт переполнение стека (stack overflow).</p>
                                    </div>
                                `
                            },
                            {
                                title: "5. Сравнение с итерацией",
                                title_by: "5. Параўнанне з ітэрацыяй",
                                content: `
                                    <div class="theory-section">
                                        <h4><i class="fas fa-balance-scale"></i> Рекурсия vs Итерация</h4>
                                        <div class="operations-table">
                                            <table>
                                                <thead><tr><th>Критерий</th><th>Рекурсия</th><th>Итерация</th></tr></thead>
                                                <tbody>
                                                    <tr><td>Принцип</td><td>Вызов функции самой себя</td><td>Циклы (for, while)</td></tr>
                                                    <tr><td>Использует стек</td><td>Да</td><td>Нет</td></tr>
                                                    <tr><td>Скорость</td><td>Медленнее</td><td>Быстрее</td></tr>
                                                    <tr><td>Память</td><td>Много (стек вызовов)</td><td>Мало</td></tr>
                                                    <tr><td>Читаемость</td><td>Легче для математических задач</td><td>Понятнее для простых циклов</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                `
                            }
                        ]
                    }
                }
            ]
        }
    ]
};

// ================ ЛАБОРАТОРНЫЕ РАБОТЫ (МАКСИМАЛЬНО ПОДРОБНО) ================
// ================ ПОЛНЫЕ ДАННЫЕ ДЛЯ ЛАБОРАТОРНЫХ РАБОТ ================
const LABS_DATA = [
    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №1: ЛИНЕЙНЫЕ АЛГОРИТМЫ
    // -----------------------------------------------------------------
    {
        id: "lab1",
        title: "Лабораторная работа №1: Разработка, испытание и отладка консольных приложений линейных алгоритмов и программ",
        title_by: "Лабараторная работа №1: Распрацоўка, выпрабаванне і адладка кансольных прыкладанняў лінейных алгарытмаў і праграм",
        description: "Цель работы: Научиться создавать простые программы с линейной последовательностью команд на языке C++. Ознакомиться с этапами разработки: постановка задачи, составление алгоритма, программирование, тестирование и отладка.",
        difficulty: "beginner",
        duration: 45,
        points: 250,
        status: "not-started",
        tags: ["линейный алгоритм", "ввод/вывод", "переменные", "блок-схема"],
        tags_by: ["лінейны алгарытм", "увод/вывад", "пераменныя", "блок-схема"],
        
        // Теоретическая часть
        theory: {
            algorithm_definition: "Алгоритм — это четкая последовательность шагов (инструкций) для решения задачи. Линейный алгоритм — это такой тип алгоритма, в котором действия выполняются последовательно, без ветвлений и циклов.",
            program_structure: `#include <iostream>\nusing namespace std;\n\nint main() {\n    // тело программы\n    return 0;\n}`,
            input_output: "cout << \"Текст\"; // вывод текста\ncin >> переменная; // ввод значения"
        },
        
        // Цели работы
        objectives: [
            "Изучить теоретические основы линейных алгоритмов.",
            "Освоить процесс создания консольного проекта в Visual Studio.",
            "Научиться использовать операции ввода (cin) и вывода (cout).",
            "Реализовать программу для вычисления по заданным формулам.",
            "Составить блок-схему алгоритма для сложной задачи (задача 3)."
        ],
        objectives_by: [
            "Вывучыць тэарэтычныя асновы лінейных алгарытмаў.",
            "Асвоіць працэс стварэння кансольнага праекта ў Visual Studio.",
            "Навучыцца выкарыстоўваць аперацыі ўводу (cin) і вываду (cout).",
            "Рэалізаваць праграму для вылічэння па зададзеных формулах.",
            "Скласці блок-схему алгарытму для складанай задачы (задача 3)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            {
                question: "Дайте определение понятию линейный алгоритм.",
                answer: "Линейный алгоритм — это алгоритм, в котором действия выполняются последовательно, одно за другим, в порядке их записи. В нём нет условий и повторений."
            },
            {
                question: "На чём основано графическое описание алгоритма (блок-схема)?",
                answer: "Графическое описание алгоритма основано на использовании геометрических фигур (блоков), соединённых линиями. Каждый блок соответствует определённому действию: овал — начало/конец, параллелограмм — ввод/вывод, прямоугольник — процесс, ромб — условие."
            },
            {
                question: "Опишите структуру программного модуля на C++.",
                answer: "Структура программного модуля включает: директивы препроцессора (#include), объявление пространства имён (using namespace std;), главную функцию int main() { ... }, и возврат значения return 0;."
            },
            {
                question: "Какие типы данных вы использовали при решении задач?",
                answer: "В задачах использовались: int (целые числа), double (вещественные числа с плавающей точкой), возможно char (символы)."
            },
            {
                question: "Опишите операторы ввода/вывода в C++.",
                answer: "cout << — оператор вывода (console output), используется для вывода данных на экран. cin >> — оператор ввода (console input), используется для чтения данных с клавиатуры."
            }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Алгоритм (блок-схема) для задания 3.",
            "Программа (код на C++) для задания 3.",
            "Результаты выполнения программы (скриншоты консоли).",
            "Ответы на контрольные вопросы."
        ],
        
        // Подсказки
        hints: [
            "Не забывайте ставить точку с запятой (;) в конце каждой инструкции.",
            "Все программы пишутся внутри фигурных скобок { ... }.",
            "Для вещественных чисел используйте тип double.",
            "При вводе нескольких чисел используйте cin >> a >> b; (через пробел).",
            "Для извлечения квадратного корня используйте функцию sqrt() из библиотеки <cmath>."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Вычислить площадь прямоугольного треугольника по его катетам a и b.",
            formula: "S = 0.5 * a * b",
            flowchart: "graph TD\n    A[Начало] --> B[Ввод a, b]\n    B --> C[Area = 0.5 * a * b]\n    C --> D[Вывод area]\n    D --> E[Конец]",
            code: `#include <iostream>
using namespace std;

int main() {
    double a, b;
    cout << "Введите катеты треугольника: ";
    cin >> a >> b;
    double area = 0.5 * a * b;
    cout << "Площадь треугольника: " << area << endl;
    return 0;
}`,
            test: "Введите катеты треугольника: 3 4\nПлощадь треугольника: 6"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №1
// Тема: Разработка, испытание и отладка консольных приложений линейных алгоритмов и программ

#include <iostream>
#include <cmath> // для математических функций (sqrt, pow и т.д.)
using namespace std;

int main() {
    // TODO: Объявите переменные для вашего варианта
    
    // TODO: Организуйте ввод данных
    
    // TODO: Выполните вычисления
    
    // TODO: Выведите результат
    
    return 0;
}`,
        
        // Варианты заданий (15 вариантов)
        variants: [
            { 
                number: 1,
                task1: "Найти периметр квадрата по стороне a. Формула: P = 4 * a",
                task2: "Найти диагональ прямоугольника по сторонам a и b. Формула: d = √(a² + b²)",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            {
                number: 2,
                task1: "Перевести градусы в радианы. Формула: rad = deg * π / 180",
                task2: "Найти длину дуги окружности по радиусу r и углу α (в градусах). Формула: L = π * r * α / 180",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 3,
                task1: "Найти среднее арифметическое двух чисел. Формула: avg = (a + b) / 2",
                task2: "Найти среднее геометрическое двух чисел. Формула: g = √(a * b)",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 4,
                task1: "Перевести температуру из Цельсия в Фаренгейты. Формула: F = C * 9/5 + 32",
                task2: "Найти значение функции: y = ax² + bx + c",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 5,
                task1: "Найти площадь круга по радиусу r. Формула: S = π * r²",
                task2: "Найти объём шара по радиусу r. Формула: V = (4/3) * π * r³",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 6,
                task1: "Найти длину окружности по радиусу r. Формула: C = 2 * π * r",
                task2: "Найти площадь трапеции по основаниям a, b и высоте h. Формула: S = (a + b) * h / 2",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 7,
                task1: "Найти объём куба по ребру a. Формула: V = a³",
                task2: "Найти объём цилиндра по радиусу r и высоте h. Формула: V = π * r² * h",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 8,
                task1: "Перевести килограммы в граммы. Формула: g = kg * 1000",
                task2: "Перевести метры в мили. Формула: miles = m / 1609.34",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 9,
                task1: "Вычислить площадь квадрата по стороне a. Формула: S = a²",
                task2: "Вычислить площадь правильного шестиугольника по стороне a. Формула: S = (3√3 * a²) / 2",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 10,
                task1: "Найти стоимость покупки с НДС. Формула: total = price * (1 + vat/100)",
                task2: "Рассчитать прибыль по формуле: P = S * p * t / 100, где S — сумма, p — процентная ставка, t — время",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 11,
                task1: "Найти массу тела по формуле m = ρ * V, где ρ — плотность, V — объём",
                task2: "Вычислить путь тела при равноускоренном движении: s = v₀ * t + (a * t²) / 2",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 12,
                task1: "Перевести секунды в минуты и секунды. Формула: minutes = seconds / 60, остаток seconds % 60",
                task2: "Вычислить скорость: v = s / t",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 13,
                task1: "Найти цену товара со скидкой. Формула: final_price = price * (1 - discount/100)",
                task2: "Найти количество процентов от суммы: percent_value = (percent * amount) / 100",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 14,
                task1: "Найти площадь ромба по диагоналям d1 и d2. Формула: S = (d1 * d2) / 2",
                task2: "Найти площадь треугольника по формуле Герона: S = √(p(p-a)(p-b)(p-c)), где p = (a+b+c)/2",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            },
            { 
                number: 15,
                task1: "Найти площадь прямоугольника по сторонам a и b. Формула: S = a * b",
                task2: "Найти сопротивление по формуле: R = ρ * l / S, где ρ — удельное сопротивление, l — длина, S — площадь сечения",
                task3: "Сложная задача: вычислить значение выражения (см. блок-схему в индивидуальном задании)"
            }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №2: РАЗВЕТВЛЯЮЩИЕСЯ АЛГОРИТМЫ
    // -----------------------------------------------------------------
    {
        id: "lab2",
        title: "Лабораторная работа №2: Разработка и отладка разветвляющихся алгоритмов и программ",
        title_by: "Лабараторная работа №2: Распрацоўка і адладка разгалінаваных алгарытмаў і праграм",
        description: "Цель работы: Освоить написание программ с условными операторами, отработать применение конструкций if, else if, else, а также тернарного оператора ? :.",
        difficulty: "intermediate",
        duration: 60,
        points: 300,
        status: "not-started",
        tags: ["условный оператор", "if", "else", "логические операторы", "тернарный оператор"],
        tags_by: ["умоўны аператар", "if", "else", "лагічныя аператары", "тэрнарны аператар"],
        
        // Теоретическая часть
        theory: {
            simple_if: "if (условие) { // действия, если условие истинно }",
            full_if: "if (условие) { // действия1 } else { // действия2 }",
            else_if: "if (условие1) { // действия1 } else if (условие2) { // действия2 } else { // действия по умолчанию }",
            ternary: "результат = (условие) ? значение1 : значение2;"
        },
        
        // Цели работы
        objectives: [
            "Изучить конструкции ветвления в C++.",
            "Научиться применять простые и составные условия.",
            "Освоить использование тернарного оператора.",
            "Разработать программу для вычисления кусочно-заданной функции (Задание 1).",
            "Реализовать программу для анализа цифр числа (Задание 2)."
        ],
        objectives_by: [
            "Вывучыць канструкцыі разгалінавання ў C++.",
            "Навучыцца прымяняць простыя і састаўныя ўмовы.",
            "Асвоіць выкарыстанне тэрнарнага аператара.",
            "Распрацаваць праграму для вылічэння кавалкава-зададзенай функцыі (Заданне 1).",
            "Рэалізаваць праграму для аналізу лічбаў ліку (Заданне 2)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { 
                question: "Что такое разветвляющийся алгоритм, и в каких случаях он используется? Чем отличаются конструкции if, else if и else? Приведите пример использования.", 
                answer: "Разветвляющийся алгоритм — это алгоритм, в котором последовательность выполнения действий зависит от выполнения некоторых условий. if проверяет условие; else if позволяет проверить несколько условий по порядку; else выполняется, если ни одно из предыдущих условий не сработало." 
            },
            { 
                question: "Что такое тернарный оператор в C++ и какова его общая форма? Приведите пример.", 
                answer: "Тернарный оператор — сокращенная запись if...else. Форма: (условие) ? выражение1 : выражение2. Например: int max = (a > b) ? a : b;" 
            },
            { 
                question: "Можно ли использовать несколько вложенных операторов if в программе? Приведите пример.", 
                answer: "Да, можно. Например: if (a > 0) { if (a > 10) { cout << 'a > 10'; } }" 
            },
            { 
                question: "Как правильно организовать проверку нескольких условий одновременно (например, значение переменной должно быть в диапазоне от 1 до 100)? Приведите пример.", 
                answer: "Используются логические операторы: if (x >= 1 && x <= 100)." 
            }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Ответы на контрольные вопросы.",
            "Описание выполненных заданий.",
            "Снимки экрана (или код) выполненных программ."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Пользователь вводит целое число. Определить, положительное оно, отрицательное или ноль.",
            code: `#include <iostream>
using namespace std;

int main() {
    int number;
    cout << "Введите число: ";
    cin >> number;

    if (number > 0)
        cout << "Число положительное." << endl;
    else if (number < 0)
        cout << "Число отрицательное." << endl;
    else
        cout << "Это ноль." << endl;

    return 0;
}`,
            test: "Введите число: -5\nЧисло отрицательное."
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №2
// Тема: Разработка и отладка разветвляющихся алгоритмов и программ

#include <iostream>
#include <cmath>
using namespace std;

int main() {
    // TODO: Задание 1 - Вычисление функции по варианту
    // double x, y;
    // cout << "Введите x: ";
    // cin >> x;
    // if (условие) { y = ... }
    // else if (условие) { y = ... }
    // else { y = ... }
    // cout << "y = " << y << endl;
    
    // TODO: Задание 2 - Анализ числа по варианту
    // int number;
    // cout << "Введите число для анализа: ";
    // cin >> number;
    // ... (ваша логика для задания 2)
    
    // TODO: Задание 3 - Простое условие по варианту
    // int num;
    // cout << "Введите число для проверки: ";
    // cin >> num;
    // if (условие) { cout << "Условие выполнено"; }
    
    return 0;
}`,
        
        // Варианты заданий (все 15)
        variants: [
            {
                number: 1,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = -18.76, x = 3.573, x = -7.15.",
                task2: "Дано натуральное число. Определить, оканчивается ли оно цифрой z (z вводится с клавиатуры).",
                task3: "Проверить, входит ли число в диапазон от 10 до 50."
            },
            {
                number: 2,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = -5.18, x = 0.197, x = 21.132.",
                task2: "Дано трехзначное число. Верно ли, что все его цифры одинаковые?",
                task3: "Проверить, кратно ли число 3 и 5 одновременно."
            },
            {
                number: 3,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 3.14, x = 1.47, x = 1.69.",
                task2: "Дано четырехзначное число. Определить, входят ли в него цифры 3, 6 или 9.",
                task3: "Проверить, делится ли одно число на другое без остатка."
            },
            {
                number: 4,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 20, x = 0.176, x = -16.13, x = 8.49.",
                task2: "Дано двузначное число. Определить какая из его цифр больше, первая или вторая.",
                task3: "Определить, находится ли точка (x,y) в I четверти."
            },
            {
                number: 5,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 40, x = 105.1, x = -3.18.",
                task2: "Составьте программу, проверяющую, верно ли утверждение, что сумма цифр введенного вами целого числа делится на 5.",
                task3: "Найти наибольшее из трёх чисел."
            },
            {
                number: 6,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 5.637, x = -7.001, x = 2.",
                task2: "Дано трехзначное число. Определить, есть ли среди его цифр одинаковые?",
                task3: "Проверить чётность суммы двух чисел."
            },
            {
                number: 7,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 27.136, x = 5.712, x = -15.19.",
                task2: "Дано трехзначное число n. Выяснить, различны ли все три цифры этого числа.",
                task3: "Проверить, оканчивается ли число на 7."
            },
            {
                number: 8,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = -4.812, x = 7.0127, x = -0.32.",
                task2: "Задано двухзначное число. Если оно является четным, то найти произведение его цифр, иначе найти их сумму.",
                task3: "Проверить, равны ли два числа."
            },
            {
                number: 9,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 1.147, x = 10.84, x = -11.53.",
                task2: "Дано трехзначное число. Определить является ли сумма его цифр двузначным числом.",
                task3: "Проверить, есть ли среди трёх чисел одинаковые."
            },
            {
                number: 10,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = -12.931, x = 22.1188, x = -6.91.",
                task2: "Дано двузначное число. Определить какая из его цифр больше, первая или вторая.",
                task3: "Проверить, состоит ли число из одинаковых цифр."
            },
            {
                number: 11,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 1.07, x = 1.84, x = 4.74.",
                task2: "Дано трехзначное число. Определить кратна ли сумма его цифр числу А (А вводится с клавиатуры).",
                task3: "Проверить, делится ли число на 10 без остатка."
            },
            {
                number: 12,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 4.175, x = -0.31, x = 69.147.",
                task2: "Дано трехзначное число. Определить является ли сумма его цифр двузначным числом.",
                task3: "Определить, является ли число однозначным."
            },
            {
                number: 13,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 1.678, x = 50, x = -9.997.",
                task2: "Дано натуральное число. Определить, оканчивается ли оно цифрой z (z вводится с клавиатуры).",
                task3: "Проверить, можно ли из трёх сторон составить прямоугольный треугольник."
            },
            {
                number: 14,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 13.1749, x = -8.001, x = 20.7.",
                task2: "Дано четырехзначное число. Определить, входят ли в него цифры 3, 6 или 9.",
                task3: "Определить, четна ли сумма цифр числа."
            },
            {
                number: 15,
                task1: "Вычислить значение функции Y в зависимости от X (см. таблицу в методичке). Исходные данные: x = 14.139, x = 1.1714, x = -7.601.",
                task2: "Задано двухзначное число. Если оно является четным, то найти произведение его цифр, иначе найти их сумму.",
                task3: "Проверить, кратно ли число 9."
            }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №3: ЦИКЛЫ С ЗАДАННЫМ ЧИСЛОМ ПОВТОРЕНИЙ
    // -----------------------------------------------------------------
    {
        id: "lab3",
        title: "Лабораторная работа №3: Разработка, отладка и испытание простых циклических алгоритмов и программ с заданным числом повторений",
        title_by: "Лабараторная работа №3: Распрацоўка, адладка і выпрабаванне простых цыклічных алгарытмаў і праграм з зададзеным лікам паўтораў",
        description: "Цель работы: Освоить принципы построения циклических алгоритмов с фиксированным числом итераций; научиться применять цикл for для решения типовых задач; отработать навыки отладки и тестирования программ; развить умения структурирования алгоритма с повторяющимся действием.",
        difficulty: "intermediate",
        duration: 75,
        points: 350,
        status: "not-started",
        tags: ["циклы", "for", "сумма", "произведение", "табулирование"],
        tags_by: ["цыклы", "for", "сума", "здабытак", "табуляванне"],
        
        // Теоретическая часть
        theory: {
            loop_definition: "Цикл — это конструкция, позволяющая многократно повторять блок команд.",
            for_syntax: "for (начало; условие; изменение) { // тело цикла }",
            for_example: "for (int i = 0; i < 10; i++) { cout << i << endl; }"
        },
        
        // Цели работы
        objectives: [
            "Изучить синтаксис и принцип работы цикла for.",
            "Научиться применять цикл для табулирования функций (Задание 1).",
            "Реализовать алгоритмы для вычисления сумм и произведений рядов (Задание 2).",
            "Составить блок-схему для задачи табулирования."
        ],
        objectives_by: [
            "Вывучыць сінтаксіс і прынцып працы цыкла for.",
            "Навучыцца прымяняць цыкл для табулявання функцый (Заданне 1).",
            "Рэалізаваць алгарытмы для вылічэння сум і здабыткаў шэрагаў (Заданне 2).",
            "Скласці блок-схему для задачы табулявання."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое цикл и зачем он используется в программировании?", answer: "Цикл — это конструкция, позволяющая многократно повторять блок команд. Используется для автоматизации повторяющихся действий." },
            { question: "В чем отличие цикла for от while?", answer: "for обычно используется, когда известно точное количество повторений. while — когда количество повторений неизвестно и задаётся условием." },
            { question: "Как задать шаг изменения счетчика?", answer: "В третьей части цикла for можно задать любое выражение, например i+=2 (шаг 2) или i-- (обратный отсчёт)." },
            { question: "Как правильно определить условие завершения цикла?", answer: "Условие должно стать ложным после нужного количества итераций. Например, для вывода чисел от 1 до 10: i <= 10." },
            { question: "Что произойдет, если не изменить значение счетчика?", answer: "Цикл станет бесконечным, так как условие его завершения никогда не станет ложным." },
            { question: "Можно ли использовать вложенные циклы for?", answer: "Да, один цикл может быть полностью вложен в тело другого. Это часто используется для обработки двумерных массивов." },
            { question: "Как осуществляется отладка программы с циклами?", answer: "Можно использовать вывод промежуточных значений (cout), пошаговое выполнение (debug) или проверку граничных условий." },
            { question: "Какие ошибки чаще всего допускаются при использовании циклов?", answer: "Забывают изменить счетчик, неверно задают начальное значение или условие, выходят за границы массива." },
            { question: "Как использовать цикл для вывода таблицы значений функции?", answer: "Счетчик цикла использовать как аргумент функции. Например: for (x = start; x <= end; x += step) { y = f(x); cout << x <<   << y; } " },
            { question: "В чем преимущества цикла for при известном числе итераций?", answer: "Компактность: инициализация, условие и изменение записаны в одной строке." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Краткое описание цикла for.",
            "Описание заданий.",
            "Код программ.",
            "Блок-схема для задания 1.",
            "Скриншоты вывода программ.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Вывести на экран числа от 1 до 10 с помощью цикла for.",
            code: `#include <iostream>
using namespace std;

int main() {
    for (int i = 1; i <= 10; i++) {
        cout << i << " ";
    }
    cout << endl;
    return 0;
}`,
            test: "1 2 3 4 5 6 7 8 9 10"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №3
// Тема: Простые циклические алгоритмы с заданным числом повторений

#include <iostream>
#include <cmath>
using namespace std;

int main() {
    // Задание 1: Табулирование функции (по варианту)
    // double x_start = ..., x_end = ..., step = ...;
    // for (double x = x_start; x <= x_end; x += step) {
    //    // вычисление и вывод y
    // }
    
    // Задание 2: Работа с числами (по варианту)
    
    return 0;
}`,
        
        // Варианты заданий (15 вариантов) - совмещены таблицы из документа
        variants: [
            {
                number: 1,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести квадраты чисел от 1 до 10.",
                task3: "Найти сумму первых n чисел (n вводится с клавиатуры)."
            },
            {
                number: 2,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести четные числа от 2 до 20.",
                task3: "Найти произведение чисел от 1 до n (n вводится с клавиатуры)."
            },
            {
                number: 3,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести обратный отсчет от 10 до 1.",
                task3: "Найти сумму четных чисел от 1 до n (n вводится с клавиатуры)."
            },
            {
                number: 4,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти сумму чисел от 100 до 200.",
                task3: "Вывести только нечетные числа от 1 до 99."
            },
            {
                number: 5,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести числа от n до 1 (n вводится с клавиатуры).",
                task3: "Найти сумму квадратов от 1 до n (n вводится с клавиатуры)."
            },
            {
                number: 6,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти сумму всех чисел, кратных 3, от 1 до n (n вводится с клавиатуры).",
                task3: "Вывести символ '*' n раз (n вводится с клавиатуры)."
            },
            {
                number: 7,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти количество чисел от 1 до 100, делящихся на 7.",
                task3: "Вывести n строк вида 1 2 3 ... n (n вводится с клавиатуры)."
            },
            {
                number: 8,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести числа от 50 до 100 с шагом 5.",
                task3: "Найти сумму цифр числа (число вводится с клавиатуры)."
            },
            {
                number: 9,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти сумму чисел от a до b (a и b вводятся с клавиатуры).",
                task3: "Найти среднее арифметическое от 1 до n (n вводится с клавиатуры)."
            },
            {
                number: 10,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти n! (n вводится с клавиатуры).",
                task3: "Вывести таблицу кубов от 1 до 10."
            },
            {
                number: 11,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести простые числа до 50.",
                task3: "Найти сумму чисел между двумя введенными (a и b)."
            },
            {
                number: 12,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести таблицу деления на 2 (от 2 до 20).",
                task3: "Найти количество цифр в числе."
            },
            {
                number: 13,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести числа от 1 до 100, пропуская кратные 10.",
                task3: "Найти минимальный делитель числа (больше 1)."
            },
            {
                number: 14,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Найти сумму четных и нечетных чисел от 1 до n (n вводится с клавиатуры).",
                task3: "Найти среднее среди n чисел (n и числа вводятся с клавиатуры)."
            },
            {
                number: 15,
                task1: "Протабулировать функцию согласно индивидуальному заданию (см. таблицу в методичке).",
                task2: "Вывести таблицу умножения на 5.",
                task3: "Вывести таблицу квадратов чётных чисел от 2 до 20."
            }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №4: ЦИКЛЫ С НЕИЗВЕСТНЫМ ЧИСЛОМ ПОВТОРЕНИЙ
    // -----------------------------------------------------------------
    {
        id: "lab4",
        title: "Лабораторная работа №4: Разработка, отладка и испытание простых циклических алгоритмов и программ с неизвестным числом повторений",
        title_by: "Лабараторная работа №4: Распрацоўка, адладка і выпрабаванне простых цыклічных алгарытмаў і праграм з невядомым лікам паўтораў",
        description: "Цель работы: Научиться применять циклы с неопределённым числом повторений; разработать алгоритмы, в которых условие завершения задается в процессе выполнения; отработать навыки отладки и тестирования программ с условием в теле цикла.",
        difficulty: "intermediate",
        duration: 70,
        points: 300,
        status: "not-started",
        tags: ["циклы", "while", "do-while", "бесконечный цикл", "обработка последовательностей"],
        tags_by: ["цыклы", "while", "do-while", "бясконцы цыкл", "апрацоўка паслядоўнасцяў"],
        
        // Теоретическая часть
        theory: {
            while_syntax: "while (условие) { // тело цикла }",
            do_while_syntax: "do { // тело цикла } while (условие);",
            while_example: "int n;\ndo { cout << \"Введите положительное число: \"; cin >> n; } while (n <= 0);",
            sum_until_zero: "int num, sum = 0;\ncin >> num;\nwhile (num != 0) { sum += num; cin >> num; }"
        },
        
        // Цели работы
        objectives: [
            "Изучить циклы while и do...while.",
            "Научиться реализовывать ввод данных до выполнения условия (Задание 1).",
            "Освоить алгоритмы обработки последовательностей с неизвестной длиной (Задание 2).",
            "Реализовать табулирование функции с заданным числом точек (Задание 3)."
        ],
        objectives_by: [
            "Вывучыць цыклы while і do...while.",
            "Навучыцца рэалізоўваць увод даных да выканання ўмовы (Заданне 1).",
            "Асвоіць алгарытмы апрацоўкі паслядоўнасцяў з невядомай даўжынёй (Заданне 2).",
            "Рэалізаваць табуляванне функцыі з зададзеным лікам кропак (Заданне 3)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Когда используется цикл while, а когда do...while?", answer: "while используется, когда тело цикла может не выполниться ни разу (проверка условия в начале). do...while гарантирует хотя бы одно выполнение (проверка в конце)." },
            { question: "Чем отличается цикл с известным и неизвестным числом повторений?", answer: "В цикле с известным числом повторений количество итераций известно до начала цикла. В цикле с неизвестным числом повторений оно зависит от условий, возникающих во время выполнения." },
            { question: "Как задать условие выхода из цикла?", answer: "Логическим выражением. Например: while (x > 0) или while (!found)." },
            { question: "Какие ошибки могут возникнуть при работе с while?", answer: "Бесконечный цикл (если забыть изменить переменную в условии), неверное начальное условие." },
            { question: "Что произойдет, если условие выхода никогда не выполнится?", answer: "Цикл станет бесконечным, программа зависнет." },
            { question: "Как в цикле считать количество итераций?", answer: "Ввести переменную-счетчик (например, int count = 0;) и увеличивать её на 1 в теле цикла на каждой итерации." },
            { question: "Почему важно правильно инициализировать переменные в цикле?", answer: "Неправильная инициализация может привести к тому, что условие цикла с самого начала будет ложным (и тело не выполнится) или, наоборот, цикл никогда не завершится." },
            { question: "Как реализовать бесконечный цикл и как из него выйти?", answer: "while (true) { ... if (условие) break; }. Выход по break." },
            { question: "Можно ли вложить цикл while в другой цикл?", answer: "Да, можно. Например, внешний цикл может перебирать строки, внутренний — столбцы." },
            { question: "Как реализовать ввод с проверкой корректности значения?", answer: "do { cout << \"Ввод: \"; cin >> x; } while (x < 0 || x > 100);" }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Условия заданий 1,2.",
            "Листинг программ 1,2 (код).",
            "Скриншоты запуска с примерами ввода/вывода.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Вводить числа до тех пор, пока их сумма не превысит 100.",
            code: `#include <iostream>
using namespace std;

int main() {
    int num, sum = 0;
    while (sum <= 100) {
        cout << "Введите число: ";
        cin >> num;
        sum += num;
    }
    cout << "Сумма превысила 100 и равна " << sum << endl;
    return 0;
}`,
            test: "Введите число: 30\nВведите число: 40\nВведите число: 35\nСумма превысила 100 и равна 105"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №4
// Тема: Циклические алгоритмы с неизвестным числом повторений

#include <iostream>
#include <cmath>
using namespace std;

int main() {
    // Задание 1: Цикл с условием ввода (по варианту)
    
    // Задание 2: Обработка последовательности (по варианту)
    
    // Задание 3: Табулирование функции на отрезке
    const double A = ...; // начало отрезка (по варианту)
    const double B = ...; // конец отрезка (по варианту)
    const int M = ...;    // количество точек (по варианту)
    double H = (B - A) / M;
    
    cout << "Табулирование функции на [" << A << ", " << B << "] с шагом " << H << ":" << endl;
    for (double x = A; x <= B + H/2; x += H) { // +H/2 для компенсации погрешности
        double y = ...; // вычислить функцию по варианту
        cout << "x = " << x << ", y = " << y << endl;
    }
    
    return 0;
}`,
        
        // Варианты для заданий 1, 2 и 3 (все 15)
        task12Variants: [
            {
                number: 1,
                task1: "Вводить числа до тех пор, пока сумма не превысит 100.",
                task2: "Найти максимум среди вводимых чисел (завершение при вводе 0).",
                task3: "Протабулировать функцию f(x) = x - sin(x) на отрезке [0, π/2] с M=10."
            },
            {
                number: 2,
                task1: "Вводить пароль до тех пор, пока не будет введён верный пароль (например, '1234').",
                task2: "Подсчитать количество цифр в числе.",
                task3: "Протабулировать функцию f(x) = 2 - sin(x) на отрезке [π/4, π/2] с M=15."
            },
            {
                number: 3,
                task1: "Выводить меню до выбора пункта 'Выход'.",
                task2: "Найти произведение нечётных чисел до 0 (ввод до 0, подсчет произведения нечетных).",
                task3: "Протабулировать функцию f(x) = cos(x) на отрезке [π/3, 2π/3] с M=20."
            },
            {
                number: 4,
                task1: "Вводить оценки до ввода -1, затем вычислить среднюю.",
                task2: "Подсчитать, сколько раз ввели одно и то же число подряд.",
                task3: "Протабулировать функцию f(x) = tg(x) на отрезке [0, π/4] с M=10."
            },
            {
                number: 5,
                task1: "Считывать числа, пока пользователь не введет 999, затем вывести сумму всех положительных нечётных чисел.",
                task2: "Вывести сумму всех положительных нечётных чисел из введенных.",
                task3: "Протабулировать функцию f(x) = ctg(x) на отрезке [π/4, π/2] с M=15."
            },
            {
                number: 6,
                task1: "Определить, является ли число простым (делить пока возможно).",
                task2: "Найти среднее арифметическое всех чисел, кроме отрицательных.",
                task3: "Протабулировать функцию f(x) = arctg(x) на отрезке [0, 1] с M=20."
            },
            {
                number: 7,
                task1: "Проверить корректность ввода логина и пароля.",
                task2: "Найти второе по величине число в последовательности (завершение при вводе 0).",
                task3: "Протабулировать функцию f(x) = arccos(x) на отрезке [0.5, 1] с M=10."
            },
            {
                number: 8,
                task1: "Считать вводимые символы до '.', затем вывести их количество.",
                task2: "Проверить, есть ли в последовательности два подряд идущих одинаковых числа.",
                task3: "Протабулировать функцию f(x) = arctg(x) на отрезке [2, 7] с M=15."
            },
            {
                number: 9,
                task1: "Вводить цифры, пока их сумма не станет чётной.",
                task2: "Подсчитать количество чисел, кратных 3, до ввода 0.",
                task3: "Протабулировать функцию f(x) = sin(x) - cos(x) на отрезке [0, π/2] с M=20."
            },
            {
                number: 10,
                task1: "Определить количество введённых положительных чисел.",
                task2: "Найти число, чаще всего встречающееся во вводе (предположить, что числа от 0 до 9).",
                task3: "Протабулировать функцию f(x) = x*sin(x) на отрезке [0, 3π] с M=10."
            },
            {
                number: 11,
                task1: "Вводить температуру, пока она в пределах от -50 до 50.",
                task2: "Считать все вводимые пары чисел и находить их сумму.",
                task3: "Протабулировать функцию f(x) = sin(1/x) на отрезке [π/8, 2/π] с M=15."
            },
            {
                number: 12,
                task1: "Вводить числа, пока пользователь не введёт 0, вывести их количество.",
                task2: "Проверить, является ли число палиндромом.",
                task3: "Протабулировать функцию f(x) = cos(1/x) на отрезке [π/4, 4/π] с M=20."
            },
            {
                number: 13,
                task1: "Подсчитать среднее значение чисел от 1 до 100, введённых пользователем (вводятся числа, пока не будет введен 0, подсчет только чисел в диапазоне 1-100).",
                task2: "Найти сумму квадратов всех чётных чисел до ввода 0.",
                task3: "Протабулировать функцию f(x) = sin(x^2) на отрезке [π/6, 2π/3] с M=10."
            },
            {
                number: 14,
                task1: "Вводить числа до появления отрицательного, затем вывести количество введенных чисел.",
                task2: "Найти произведение нечётных чисел до ввода 0.",
                task3: "Протабулировать функцию f(x) = cos(x^2) на отрезке [π/3, 3π/2] с M=15."
            },
            {
                number: 15,
                task1: "Вводить пары чисел (a, b), пока a < b.",
                task2: "Проверить, сколько чисел больше среднего значения последовательности.",
                task3: "Протабулировать функцию f(x) = sin(x) - tg(x) на отрезке [0, π/4] с M=20."
            }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №5: ОДНОМЕРНЫЕ МАССИВЫ
    // -----------------------------------------------------------------
    {
        id: "lab5",
        title: "Лабораторная работа №5: Разработка, отладка и испытание простых циклических алгоритмов и программ с известным числом повторений обработки массивов",
        title_by: "Лабараторная работа №5: Распрацоўка, адладка і выпрабаванне простых цыклічных алгарытмаў і праграм з вядомым лікам паўтораў апрацоўкі масіваў",
        description: "Цель работы: Освоить основные способы работы с одномерными массивами; научиться применять цикл for для обхода элементов массива; разработать простейшие алгоритмы обработки массивов (нахождение суммы, максимума); отработать навыки отладки и тестирования программ с массивами.",
        difficulty: "intermediate",
        duration: 80,
        points: 400,
        status: "not-started",
        tags: ["массивы", "for", "поиск", "сумма", "среднее", "двумерные массивы"],
        tags_by: ["масівы", "for", "пошук", "сума", "сярэдняе", "двухмерныя масівы"],
        
        // Теоретическая часть
        theory: {
            array_definition: "Массив — это структура данных, позволяющая хранить несколько элементов одного типа под одним именем.",
            array_declaration: "int a[10]; // массив из 10 целых чисел",
            array_for: "for (int i = 0; i < n; i++) { cout << a[i] << \" \"; }",
            matrix_declaration: "int matrix[3][4]; // массив 3 строки на 4 столбца",
            matrix_init: "int matrix[2][3] = { {1,2,3}, {4,5,6} };",
            matrix_for: "for (int i = 0; i < 2; ++i) { for (int j = 0; j < 3; ++j) { cout << matrix[i][j] << \" \"; } cout << endl; }"
        },
        
        // Цели работы
        objectives: [
            "Научиться объявлять и инициализировать одномерные массивы.",
            "Освоить ввод и вывод элементов массива с помощью цикла.",
            "Реализовать алгоритмы подсчета количества и суммы элементов по условию (Задание 1).",
            "Научиться находить и перемещать минимальный/максимальный элемент (Задание 2).",
            "Освоить обработку двумерных массивов (Задание 3)."
        ],
        objectives_by: [
            "Навучыцца аб'яўляць і ініцыялізаваць аднамерныя масівы.",
            "Асвоіць увод і вывад элементаў масіву з дапамогай цыкла.",
            "Рэалізаваць алгарытмы падліку колькасці і сумы элементаў па ўмове (Заданне 1).",
            "Навучыцца знаходзіць і перамяшчаць мінімальны/максімальны элемент (Заданне 2).",
            "Асвоіць апрацоўку двухмерных масіваў (Заданне 3)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое массив? Как объявить массив в C++?", answer: "Массив — это структура данных, хранящая набор элементов одного типа. Объявление: тип_данных имя_массива[размер];" },
            { question: "Чем отличается ввод массива от ввода отдельных переменных?", answer: "Ввод массива обычно производится в цикле, перебирая индексы элементов от 0 до размера-1." },
            { question: "Зачем использовать цикл for при работе с массивами?", answer: "Цикл for позволяет компактно и эффективно перебрать все элементы массива, используя переменную-индекс." },
            { question: "Как обратиться к конкретному элементу массива?", answer: "По индексу в квадратных скобках: arr[3] — обратится к четвертому элементу." },
            { question: "Что произойдёт, если выйти за пределы массива?", answer: "Программа обратится к памяти, не принадлежащей массиву. Это может привести к непредсказуемому поведению, ошибкам или краху программы." },
            { question: "Как определить длину массива?", answer: "Для статических массивов: sizeof(arr)/sizeof(arr[0]). Для динамических и в функциях размер нужно передавать отдельно." },
            { question: "Какие алгоритмы чаще всего применяются к массивам?", answer: "Поиск (максимума, минимума, элемента), сортировка, подсчет суммы, среднего арифметического." },
            { question: "В чём отличие массива от других структур хранения данных?", answer: "Массив хранит элементы одного типа в непрерывной области памяти, доступ по индексу осуществляется быстро." },
            { question: "Что такое сортировка массива? Примеры.", answer: "Процесс упорядочивания элементов. Примеры: пузырьковая сортировка, сортировка вставками." },
            { question: "Что произойдёт, если изменить данные во время обхода массива?", answer: "Это может привести к некорректным результатам, например, если вы удаляете элемент во время цикла." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Условие задания 1. Блок-схема задания 1.",
            "Условие задания 3. Код программы задания 3. Скриншоты вывода задания 3.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Сформировать двумерный массив 4x5 случайными числами от -10 до 10. Посчитать количество положительных чисел.",
            code: `#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main() {
    const int rows = 4, cols = 5;
    int matrix[rows][cols];
    srand(time(0));
    int positiveCount = 0;

    for (int i = 0; i < rows; ++i) {
        for (int j = 0; j < cols; ++j) {
            matrix[i][j] = rand() % 21 - 10;
            cout << matrix[i][j] << "\\t";
            if (matrix[i][j] > 0) positiveCount++;
        }
        cout << endl;
    }
    cout << "\\nКоличество положительных чисел: " << positiveCount << endl;
    return 0;
}`,
            test: "Вывод матрицы и количества положительных чисел."
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №5
// Тема: Обработка одномерных массивов

#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main() {
    const int SIZE = 20;
    int arr[SIZE];
    
    // Заполнение массива случайными числами
    srand(time(0));
    cout << "Исходный массив:" << endl;
    for (int i = 0; i < SIZE; i++) {
        arr[i] = rand() % 100; // от 0 до 99
        cout << arr[i] << " ";
    }
    cout << endl;
    
    // TODO: Задание 1 (по варианту)
    
    // TODO: Задание 2 (по варианту)
    
    // Задание 3: Двумерный массив
    const int ROWS = 4, COLS = 5;
    int matrix[ROWS][COLS];
    
    cout << "\\nДвумерный массив:" << endl;
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            matrix[i][j] = rand() % 21 - 10; // [-10, 10]
            cout << matrix[i][j] << "\\t";
        }
        cout << endl;
    }
    
    // TODO: Задание 3 (по варианту)
    
    return 0;
}`,
        
        // Задание 1 (варианты по таблице из документа ЛР№5)
        task1Variants: [
            { number: 1, task: "Подсчитать количество чисел, принадлежащих промежутку [a, b] и сумму чисел, стоящих на местах, кратных 3." },
            { number: 2, task: "Подсчитать сумму чисел, меньших заданного D, и количество чисел, стоящих на четных местах." },
            { number: 3, task: "Подсчитать произведение всех чисел, стоящих на местах, кратных 4, и количество чисел, небольших заданного А." },
            { number: 4, task: "Подсчитать количество чисел, меньших заданного Х, и произведение всех отрицательных чисел, стоящих на нечетных местах." },
            { number: 5, task: "Подсчитать количество чисел, не принадлежащих промежутку (Х, У], и сумму отрицательных чисел, стоящих на четных местах." },
            { number: 6, task: "Подсчитать сумму чисел, стоящих на местах, кратных 3, и неравных заданному F, подсчитать также количество неотрицательных чисел." },
            { number: 7, task: "Найти среднее арифметическое отрицательных чисел и подсчитать количество чисел стоящих на четных местах." },
            { number: 8, task: "Найти среднее арифметическое положительных чисел, стоящих на нечетных местах, и подсчитать количество этих чисел." },
            { number: 9, task: "Найти среднее арифметическое чисел, принадлежащих промежутку [А, В) и количество положительных чисел, стоящих на местах, кратных 4." },
            { number: 10, task: "Найти среднее арифметическое чисел, неравных заданному числу С, и подсчитать количество неположительных чисел, стоящих на четных местах." },
            { number: 11, task: "Найти среднее арифметическое чисел, больших заданного D и стоящих на нечетных местах, и подсчитать количество чисел, небольших заданного F." },
            { number: 12, task: "Найти среднее арифметическое чисел, непопадающих в промежуток [A, B], и подсчитать количество положительных чисел, стоящих на местах, кратных 3." },
            { number: 13, task: "Найти среднее арифметическое ненулевых чисел и подсчитать количество чисел больших А и стоящих на четных местах." },
            { number: 14, task: "Вычислить произведение чисел, принадлежащих промежутку (A, B] и подсчитать количество отрицательных чисел, стоящих на местах, кратных 3." },
            { number: 15, task: "Найти среднее арифметическое чисел, стоящих на нечетных местах и подсчитать количество чисел, меньших заданного С." }
        ],
        
        // Задание 2 (варианты по таблице из документа ЛР№5)
        task2Variants: [
            { number: 1, task: "Найти максимальное число и поменять его местами с последним элементом массива." },
            { number: 2, task: "Найти минимальное число и поменять его местами с предыдущим элементом массива." },
            { number: 3, task: "Найти минимальное число и поменять его местами с последующим элементом массива." },
            { number: 4, task: "Найти максимальное число и поменять его местами с 6 элементом массива." },
            { number: 5, task: "Найти максимальное число и поменять его местами с четвертым элементом массива." },
            { number: 6, task: "Найти минимальное число и поменять его местами с третьим элементом массива." },
            { number: 7, task: "Найти максимальное число и поменять его местами с предпоследним элементом массива." },
            { number: 8, task: "Найти минимальное число и записать вместо него число N^2+N, где N - размер массива." },
            { number: 9, task: "Найти максимальное число и поменять его местами со вторым элементом массива." },
            { number: 10, task: "Найти минимальное число и поменять его местами с последним элементом массива." },
            { number: 11, task: "Найти максимальное число и вместо него записать значение N+2, где N - размер массива." },
            { number: 12, task: "Найти минимальное число и присвоить это значение третьему элементу массива." },
            { number: 13, task: "Найти минимальное число и вместо него записать значение N^2, где N - размер массива." },
            { number: 14, task: "Найти максимальное число и поменять его со вторым элементом массива." },
            { number: 15, task: "Найти минимальное число и присвоить это значение второму элементу массива." }
        ],
        
        // Задание 3 (двумерные массивы, варианты из документа ЛР№5)
        task3Variants: [
            { number: 1, task: "Найти наибольший элемент в третьем столбце матрицы." },
            { number: 2, task: "Найти сумму всех элементов матрицы." },
            { number: 3, task: "Найти сумму всех положительных элементов матрицы." },
            { number: 4, task: "Найти наименьший элемент в первой строке матрицы." },
            { number: 5, task: "Найти среднее арифметическое значение элементов второго столбца матрицы." },
            { number: 6, task: "Найти произведение элементов третьего столбца матрицы." },
            { number: 7, task: "Найти сумму элементов первой и третьей строк матрицы." },
            { number: 8, task: "Определить, сколько раз встречается число 5 среди элементов всей матрицы." },
            { number: 9, task: "Определить, сколько раз встречается число 1 среди элементов третьей строки матрицы." },
            { number: 10, task: "Найти количество отрицательных элементов в матрице." },
            { number: 11, task: "Найти количество отрицательных элементов в первой строке матрицы." },
            { number: 12, task: "Найти количество неотрицательных элементов во втором столбце матрицы." },
            { number: 13, task: "Найти сумму элементов второй строки матрицы." },
            { number: 14, task: "Найти наибольший элемент в матрице." },
            { number: 15, task: "Найти наименьший элемент в матрице." }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №6: ФУНКЦИИ
    // -----------------------------------------------------------------
    {
        id: "lab6",
        title: "Лабораторная работа №6: Разработка, отладка и испытание алгоритмов и программ с использованием подпрограмм",
        title_by: "Лабараторная работа №6: Распрацоўка, адладка і выпрабаванне алгарытмаў і праграм з выкарыстаннем падпраграм",
        description: "Цель работы: Ознакомиться с принципами построения программ с использованием функций (подпрограмм); научиться разрабатывать и использовать функции с параметрами и возвращаемыми значениями; закрепить навык структурирования программного кода для повышения читаемости и повторного использования.",
        difficulty: "intermediate",
        duration: 65,
        points: 350,
        status: "not-started",
        tags: ["функции", "подпрограммы", "параметры", "табулирование", "возвращаемое значение"],
        tags_by: ["функцыі", "падпраграмы", "параметры", "табуляванне", "вяртаемае значэнне"],
        
        // Теоретическая часть
        theory: {
            function_definition: "Функция — это именованный фрагмент программы, который можно вызывать из любого места основной программы.",
            function_syntax: "тип_возврата имя_функции(параметры) { // тело функции return значение; }",
            void_example: "void greet() { cout << \"Привет, мир!\" << endl; }",
            return_example: "int sum(int a, int b) { return a + b; }"
        },
        
        // Цели работы
        objectives: [
            "Изучить синтаксис объявления и определения функций в C++.",
            "Научиться передавать параметры в функцию и возвращать значения.",
            "Разработать функцию для табулирования заданной функции (Задание 1).",
            "Реализовать вспомогательные функции для решения типовых задач (Задание 2)."
        ],
        objectives_by: [
            "Вывучыць сінтаксіс аб'яўлення і вызначэння функцый у C++.",
            "Навучыцца перадаваць параметры ў функцыю і вяртаць значэнні.",
            "Распрацаваць функцыю для табулявання зададзенай функцыі (Заданне 1).",
            "Рэалізаваць дапаможныя функцыі для рашэння тыпавых задач (Заданне 2)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое функция? Какие преимущества её использования?", answer: "Функция — это именованный блок кода, который можно вызывать многократно. Преимущества: повторное использование, модульность, упрощение отладки." },
            { question: "Что такое параметры функции? Что такое возвращаемое значение?", answer: "Параметры — это входные данные для функции. Возвращаемое значение — результат её работы." },
            { question: "Чем отличается void-функция от функций с возвращаемым значением?", answer: "void-функция не возвращает никакого значения (используется для выполнения действий). Функция с возвращаемым значением должна вернуть результат указанного типа." },
            { question: "Как вызвать функцию?", answer: "По её имени с передачей необходимых аргументов, например: int result = sum(5, 3);" },
            { question: "В чем разница между передачей параметров по значению и по ссылке?", answer: "По значению: в функцию передаётся копия переменной, оригинал не меняется. По ссылке (&): передаётся ссылка на оригинал, функция может изменить исходную переменную." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Блок-схема задания 1.",
            "Условие и листинги программ.",
            "Результаты тестирования.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Протабулировать функцию y = 1 + exp(2*x) на отрезке [1, 5] с шагом 0.25, используя пользовательскую функцию.",
            code: `#include <iostream>
#include <cmath>
#include <iomanip>
using namespace std;

double computeY(double x) {
    return 1 + exp(2 * x);
}

int main() {
    cout << fixed << setprecision(4);
    cout << "Таблица значений функции y = 1 + exp(2 * x)" << endl;
    cout << "----------------------------------------" << endl;
    cout << "|   x   |       y       |" << endl;
    cout << "----------------------------------------" << endl;
    for (double x = 1.0; x <= 5.0; x += 0.25) {
        double y = computeY(x);
        cout << "| " << setw(6) << x << " | " << setw(13) << y << " |" << endl;
    }
    cout << "----------------------------------------" << endl;
    return 0;
}`,
            test: "Таблица значений функции."
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №6
// Тема: Функции в C++

#include <iostream>
#include <cmath>
#include <iomanip>
using namespace std;

// TODO: Объявите вашу пользовательскую функцию для задания 1
double myFunction(double x) {
    // TODO: Реализуйте формулу для вашего варианта
    return x;
}

// TODO: Объявите функцию для задания 2 (по варианту)

int main() {
    // Задание 1: Табулирование функции
    double start = 0.01, end = 0.9, step = 0.01;
    cout << fixed << setprecision(4);
    cout << "Табулирование функции на [" << start << ", " << end << "]:" << endl;
    cout << "------------------------" << endl;
    cout << "|   x   |    y    |" << endl;
    cout << "------------------------" << endl;
    for (double x = start; x <= end + step/2; x += step) {
        double y = myFunction(x);
        cout << "| " << setw(6) << x << " | " << setw(7) << y << " |" << endl;
    }
    cout << "------------------------" << endl;
    
    // Задание 2: Вызов вспомогательной функции (по варианту)
    // Например: проверить чётность числа, найти сумму цифр и т.д.
    
    return 0;
}`,
        
        // Варианты заданий (15 вариантов)
        variants: [
            { number: 1, task1: "y = 1 + exp(2*x - 1)", task2: "Функция проверки чётности числа." },
            { number: 2, task1: "y = sin(2*x + 1)", task2: "Функция нахождения суммы цифр числа." },
            { number: 3, task1: "y = 2*x + 0.33", task2: "Функция подсчета чисел, больших заданного." },
            { number: 4, task1: "y = 2.5 + sin(-x)", task2: "Функция обмена двух значений местами." },
            { number: 5, task1: "y = 2.5 + cos(-x)", task2: "Функция определения корня квадратного уравнения." },
            { number: 6, task1: "y = cos(2*x + 1)", task2: "Функция вычисления факториала." },
            { number: 7, task1: "y = 1 + ln(2*x)", task2: "Функция вычисления длины гипотенузы." },
            { number: 8, task1: "y = arctg(2*x + 1)", task2: "Функция вывода таблицы умножения для числа." },
            { number: 9, task1: "y = 5*x + 0.11", task2: "Функция возведения числа в степень." },
            { number: 10, task1: "y = 2.5 + arctg(x)", task2: "Функция для нахождения максимума среди чисел a+b, b+c и a+c." },
            { number: 11, task1: "y = 2.5 + cos(x)", task2: "Функция определения простого числа." },
            { number: 12, task1: "y = cos(7 + x/3)", task2: "Функция проверки кратности двух чисел." },
            { number: 13, task1: "y = 5/x + 0.11", task2: "Функция генерации случайного числа в заданном диапазоне." },
            { number: 14, task1: "y = 2.5 + sin(x + 1.5)", task2: "Функция определения знака числа." },
            { number: 15, task1: "y = 2.5 - arctg(x/2)", task2: "Функция нахождения площади круга." }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №7: СТРОКИ
    // -----------------------------------------------------------------
    {
        id: "lab7",
        title: "Лабораторная работа №7: Разработка строк, различных по эффективности, применяемым средствам алгоритмов и программ обработки",
        title_by: "Лабараторная работа №7: Распрацоўка радкоў, розных па эфектыўнасці, ужывальным сродкам алгарытмаў і праграм апрацоўкі",
        description: "Цель работы: Изучить различные способы обработки строк в C++; освоить сравнение эффективности строковых алгоритмов; реализовать программы обработки строк с использованием базовых и расширенных средств языка.",
        difficulty: "advanced",
        duration: 80,
        points: 400,
        status: "not-started",
        tags: ["строки", "string", "cctype", "символы", "обработка строк"],
        tags_by: ["радкі", "string", "cctype", "сімвалы", "апрацоўка радкоў"],
        
        // Теоретическая часть
        theory: {
            string_methods: [
                { method: "length()", desc: "Возвращает длину строки" },
                { method: "empty()", desc: "Проверяет, пуста ли строка" },
                { method: "clear()", desc: "Очищает строку" },
                { method: "at(index)", desc: "Возвращает символ по индексу (с проверкой границ)" },
                { method: "[]", desc: "Индексация без проверки границ" },
                { method: "append(str) / +=", desc: "Добавляет строку в конец" },
                { method: "insert(pos, str)", desc: "Вставляет подстроку с позиции pos" },
                { method: "erase(pos, len)", desc: "Удаляет len символов, начиная с позиции pos" },
                { method: "replace(pos, len, s)", desc: "Заменяет подстроку" },
                { method: "substr(pos, len)", desc: "Возвращает подстроку" },
                { method: "find(str)", desc: "Ищет подстроку, возвращает позицию или npos" },
                { method: "rfind(str)", desc: "Ищет подстроку с конца" },
                { method: "c_str()", desc: "Возвращает C-style строку (const char*)" }
            ],
            cctype_functions: [
                { func: "isalnum(c)", desc: "Буква или цифра" },
                { func: "isalpha(c)", desc: "Буква" },
                { func: "isdigit(c)", desc: "Цифра" },
                { func: "isspace(c)", desc: "Пробельный символ" },
                { func: "ispunct(c)", desc: "Знак препинания" },
                { func: "isupper(c)", desc: "Прописная буква" },
                { func: "islower(c)", desc: "Строчная буква" },
                { func: "toupper(c)", desc: "Переводит в верхний регистр" },
                { func: "tolower(c)", desc: "Переводит в нижний регистр" }
            ]
        },
        
        // Цели работы
        objectives: [
            "Освоить работу с классом std::string и функциями из <cctype>.",
            "Реализовать условную обработку строки в зависимости от её свойств (Задание 1).",
            "Научиться преобразовывать формат строки (например, ФИО) с помощью функций (Задание 2)."
        ],
        objectives_by: [
            "Асвоіць працу з класам std::string і функцыямі з <cctype>.",
            "Рэалізаваць умоўную апрацоўку радка ў залежнасці ад яго ўласцівасцей (Заданне 1).",
            "Навучыцца пераўтвараць фармат радка (напрыклад, ПІБ) з дапамогай функцый (Заданне 2)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Какие существуют способы представления строк в C++?", answer: "Массив символов (char[]) и класс std::string." },
            { question: "Чем отличается char[] от std::string?", answer: "char[] — статический массив, требует ручного управления памятью. std::string — динамический класс, предоставляет множество удобных методов для работы со строками." },
            { question: "Какие основные методы предоставляет std::string?", answer: "length(), empty(), append(), insert(), erase(), replace(), find(), substr(), c_str() и другие." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Индивидуальные задания: текст программ, скриншоты результатов работы.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Удалить из строки все цифры. Подсчитать количество удаленных символов.",
            code: `#include <iostream>
#include <string>
#include <cctype>
using namespace std;

int main() {
    string input;
    cout << "Введите строку: ";
    getline(cin, input);
    
    string result = "";
    int removed = 0;
    
    for (char c : input) {
        if (!isdigit(c)) {
            result += c;
        } else {
            removed++;
        }
    }
    
    cout << "Результат: " << result << endl;
    cout << "Удалено цифр: " << removed << endl;
    return 0;
}`,
            test: "Введите строку: abc123def\nРезультат: abcdef\nУдалено цифр: 3"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №7
// Тема: Обработка строк

#include <iostream>
#include <string>
#include <cctype>
using namespace std;

// Функция для задания 2 (преобразование ФИО)
string formatName(const string& fullName) {
    // TODO: Реализуйте логику для преобразования "Фамилия Имя Отчество" -> "Фамилия И.О."
    size_t first_space = fullName.find(' ');
    size_t second_space = fullName.find(' ', first_space + 1);
    
    if (first_space == string::npos || second_space == string::npos) {
        return fullName; // неверный формат
    }
    
    string surname = fullName.substr(0, first_space);
    string name_initial = fullName.substr(first_space + 1, 1);
    string patronymic_initial = fullName.substr(second_space + 1, 1);
    
    return surname + " " + name_initial + "." + patronymic_initial + ".";
}

int main() {
    // Задание 1: Обработка строки по условию варианта
    string s;
    cout << "Введите строку (английские буквы, цифры, пробелы, знаки пунктуации): ";
    getline(cin, s);
    
    // TODO: Логика задания 1 (по варианту)
    
    // Задание 2: Преобразование ФИО
    string name;
    cout << "Введите ФИО (например, Иванов Иван Иванович): ";
    getline(cin, name);
    
    string formatted = formatName(name);
    cout << "Результат: " << formatted << endl;
    
    return 0;
}`,
        
        // Варианты заданий (15 вариантов)
        variants: [
            {
                number: 1,
                task1: "Если длина строки больше 10, удалить все английские гласные. Иначе — записать в начало строки количество пробелов в ней.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 2,
                task1: "Если в строке есть цифры, кратные 3, заменить все буквы на '*'. Иначе — удалить все цифры.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 3,
                task1: "Если длина строки кратна 3, после каждой цифры вставить пробел. Иначе — заменить все английские гласные на '*'.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 4,
                task1: "Если русских букв в строке больше, чем английских — поднять регистр всех букв. Иначе — удалить все цифры.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 5,
                task1: "Если пробелов больше, чем цифр — удалить все пробелы. Иначе — заменить все цифры на '!'.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 6,
                task1: "Если длина строки четная — удалить все английские гласные. Иначе — опустить регистр всех английских букв.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 7,
                task1: "Если в строке цифр больше, чем букв, заменить все цифры на '*'. Иначе — удалить все знаки препинания.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 8,
                task1: "Если длина строки нечетная — после каждой строчной буквы вставить пробел. Иначе — удалить все цифры, кратные 3.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 9,
                task1: "Если длина строки меньше 15, все гласные заменить на '1'. Иначе — записать после каждого знака препинания '0'.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 10,
                task1: "Если длина строки кратна 4, заменить все английские строчные буквы на '*'. Иначе — удалить все гласные буквы.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 11,
                task1: "Если в строке цифр больше, чем английских букв — удалить все цифры, иначе — удалить все строчные английские буквы.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 12,
                task1: "Если в строке количество цифр нечетное — заменить все цифры на '*', иначе — заменить пробелы на '0'.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 13,
                task1: "Если в строке количество пробелов нечетное, удалить все пробелы, иначе — удалить все заглавные буквы.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 14,
                task1: "Если в строке количество прописных символов больше, чем строчных — удалить все гласные, иначе — удалить все согласные.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            },
            {
                number: 15,
                task1: "Если в строке заглавных букв больше, чем строчных, заменить заглавные на '*', иначе — заменить строчные на '$'.",
                task2: "Преобразовать строку формата 'Фамилия Имя Отчество' в 'Фамилия И.О.'."
            }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №8: МНОЖЕСТВА (set)
    // -----------------------------------------------------------------
    {
        id: "lab8",
        title: "Лабораторная работа №8: Разработка алгоритмов и программ обработки множеств",
        title_by: "Лабараторная работа №8: Распрацоўка алгарытмаў і праграм апрацоўкі мностваў",
        description: "Цель работы: Освоить методы представления и обработки множеств в языке C++; изучить алгоритмы объединения, пересечения, разности множеств; разработать программы для решения задач с использованием множеств.",
        difficulty: "advanced",
        duration: 70,
        points: 350,
        status: "not-started",
        tags: ["множества", "set", "unordered_set", "алгоритмы STL", "объединение", "пересечение"],
        tags_by: ["мноствы", "set", "unordered_set", "алгарытмы STL", "аб'яднанне", "перасячэнне"],
        
        // Теоретическая часть
        theory: {
            set_definition: "Множество — это неупорядоченная коллекция уникальных элементов.",
            set_operations: [
                "set_union — объединение множеств (A ∪ B)",
                "set_intersection — пересечение (A ∩ B)",
                "set_difference — разность (A \\ B)",
                "set_symmetric_difference — симметрическая разность",
                "includes — проверка, является ли одно множество подмножеством другого",
                "lower_bound / upper_bound — границы для значения"
            ]
        },
        
        // Цели работы
        objectives: [
            "Изучить контейнер std::set и его возможности.",
            "Научиться выполнять базовые операции над множествами (объединение, пересечение, разность).",
            "Реализовать задачи на поиск уникальных элементов и проверку свойств множеств (Задание 1).",
            "Освоить применение множеств для обработки символьных данных (Задание 2)."
        ],
        objectives_by: [
            "Вывучыць кантэйнер std::set і яго магчымасці.",
            "Навучыцца выконваць базавыя аперацыі над мноствамі (аб'яднанне, перасячэнне, рознасць).",
            "Рэалізаваць задачы на пошук унікальных элементаў і праверку ўласцівасцей мностваў (Заданне 1).",
            "Асвоіць прымяненне мностваў для апрацоўкі сімвальных даных (Заданне 2)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое множество? В чем его особенности?", answer: "Множество — это коллекция уникальных элементов. Особенности: элементы не повторяются, обычно не упорядочены (или упорядочены в set)." },
            { question: "В чем отличие set от unordered_set?", answer: "set хранит элементы в отсортированном виде (красно-черное дерево, O(log n)). unordered_set использует хеш-таблицу (O(1) в среднем), но не сохраняет порядок." },
            { question: "Какие операции над множествами поддерживает STL?", answer: "set_union (объединение), set_intersection (пересечение), set_difference (разность), set_symmetric_difference (симметрическая разность)." },
            { question: "Как добавить элемент в set?", answer: "Метод insert(): s.insert(10);" },
            { question: "Как проверить наличие элемента в множестве?", answer: "Метод find(): if (s.find(10) != s.end()) или count(): if (s.count(10))." },
            { question: "В чем преимущества set по сравнению с массивом?", answer: "Автоматическая уникальность элементов, быстрый поиск (O(log n)), встроенные операции над множествами." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Индивидуальные задания с листингом.",
            "Результаты выполнения (вывод).",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Даны два множества A и B. Найти их объединение, пересечение и разность.",
            code: `#include <iostream>
#include <set>
#include <algorithm>
using namespace std;

void printSet(const set<int>& s) {
    for (int el : s) cout << el << " ";
    cout << endl;
}

int main() {
    set<int> A = {1, 2, 3, 4, 5};
    set<int> B = {3, 4, 5, 6, 7};
    set<int> result;

    set_union(A.begin(), A.end(), B.begin(), B.end(),
              inserter(result, result.begin()));
    cout << "Объединение: "; printSet(result);

    result.clear();
    set_intersection(A.begin(), A.end(), B.begin(), B.end(),
                     inserter(result, result.begin()));
    cout << "Пересечение: "; printSet(result);

    result.clear();
    set_difference(A.begin(), A.end(), B.begin(), B.end(),
                   inserter(result, result.begin()));
    cout << "Разность A\\B: "; printSet(result);

    return 0;
}`,
            test: "Объединение: 1 2 3 4 5 6 7 \nПересечение: 3 4 5 \nРазность A\\B: 1 2"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №8
// Тема: Обработка множеств

#include <iostream>
#include <set>
#include <algorithm>
#include <cctype> // для tolower и проверок
#include <vector>
using namespace std;

void printSet(const set<int>& s) {
    for (int el : s) cout << el << " ";
    cout << endl;
}

void printCharSet(const set<char>& s) {
    for (char el : s) cout << el << " ";
    cout << endl;
}

int main() {
    // TODO: Задание 1 (по варианту)
    
    // TODO: Задание 2 (по варианту)
    
    return 0;
}`,
        
        // Варианты заданий (15 вариантов)
        variants: [
            { number: 1, task1: "Найти второе по величине число в множестве.", task2: "В строке-формуле подсчитать общее количество знаков '+', '-', '*', '/'. Вывести на печать символы этой строки и их ASCII-коды." },
            { number: 2, task1: "Проверить наличие элемента в множестве. Вывести 'YES' или 'NO'.", task2: "Одномерный числовой массив содержит N произвольных целых чисел. Построить множество, содержащее элементы этого массива, принадлежащие интервалу [a, b]." },
            { number: 3, task1: "Найти сумму всех элементов множества.", task2: "Одномерный массив содержит N произвольных целых чисел. Построить множество, содержащее чётные числа из этого массива." },
            { number: 4, task1: "Найти среднее арифметическое элементов множества.", task2: "Дана строка произвольного текста. Построить множество, содержащее гласные буквы английского алфавита, входящие в этот текст, подсчитать их количество. Вывести на печать элементы этого множества и их ASCII-коды." },
            { number: 5, task1: "Проверка подмножества: является ли B подмножеством A?", task2: "Дан одномерный массив, содержащий целые числа из интервала [0..255]. Построить множество, содержащее элементы кратные 3 этого массива." },
            { number: 6, task1: "Проверка равенства множеств. Вывести 'YES' или 'NO'.", task2: "Дана строка произвольного текста. Построить множество, содержащее согласные буквы английского алфавита, входящие в этот текст. Вывести на печать элементы этого множества и их ASCII-коды." },
            { number: 7, task1: "Удаление элемента из множества.", task2: "Одномерный числовой массив содержит N произвольных целых чисел. Построить множество, содержащее элементы этого массива, кратные некоторому заданному числу." },
            { number: 8, task1: "Вставка элемента в множество.", task2: "Создать множество A, содержащее целые числа. Определить, есть ли в нем хотя бы одно простое число." },
            { number: 9, task1: "Подсчёт размера множества.", task2: "Одномерный массив содержит N произвольных целых чисел. Построить множество, содержащее нечётные числа из этого массива." },
            { number: 10, task1: "Минимальный и максимальный элемент множества.", task2: "Дан одномерный массив, содержащий целые числа. Построить множество из элементов одномерного массива, стоящих на нечётных местах." },
            { number: 11, task1: "Разбиение на чётные и нечётные числа из множества. Вывести два множества.", task2: "Дано арифметическое выражение. Определить количественное соответствие в них арифметических скобок: ( ), [ ], { }. Вывести ASCII-коды этих скобок." },
            { number: 12, task1: "Объединение трёх множеств.", task2: "Создать множество A и определить, являются ли все его элементы чётными." },
            { number: 13, task1: "Пересечение трёх множеств.", task2: "Создать множество A. Определить, содержит ли оно хотя бы один отрицательный элемент." },
            { number: 14, task1: "Найти уникальные элементы, которые встречаются только в одном из двух множеств (симметрическая разность).", task2: "Создать два множества A и B. Найти количество элементов, входящих в их объединение." },
            { number: 15, task1: "Удаление дубликатов из массива: дан массив чисел, построить из него множество и вывести результат.", task2: "Создать два множества A и B. Найти количество элементов, входящих в их объединение." }
        ]
    },
    
    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №9: СОРТИРОВКА И ПОИСК (ЧАСТЬ 1)
    // -----------------------------------------------------------------
    {
        id: "lab9_part1",
        title: "Лабораторная работа №9: Разработка алгоритмов и программ с использованием методов внутренней сортировки, методов поиска информации. Проведение сравнительного анализа различных алгоритмов сортировки (Часть 1)",
        title_by: "Лабараторная работа №9: Распрацоўка алгарытмаў і праграм з выкарыстаннем метадаў унутранай сартавання, метадаў пошуку інфармацыі. Правядзенне параўнальнага аналізу розных алгарытмаў сартавання (Частка 1)",
        description: "Цель работы: Ознакомиться с алгоритмами сортировки (внутренней); научиться реализовывать и сравнивать методы сортировки и поиска по критериям скорости и количества операций; освоить применение линейного и бинарного поиска.",
        difficulty: "advanced",
        duration: 90,
        points: 450,
        status: "not-started",
        tags: ["сортировка", "поиск", "bubble sort", "selection sort", "insertion sort", "бинарный поиск", "сравнение"],
        tags_by: ["сартаванне", "пошук", "bubble sort", "selection sort", "insertion sort", "бінарны пошук", "параўнанне"],
        
        // Теоретическая часть
        theory: {
            sorting_algorithms: [
                "Пузырьковая сортировка (Bubble Sort)",
                "Сортировка выбором (Selection Sort)",
                "Сортировка вставками (Insertion Sort)"
            ],
            search_methods: [
                "Линейный поиск — для неотсортированных массивов, O(n)",
                "Бинарный поиск — для отсортированных массивов, O(log n)"
            ]
        },
        
        // Цели работы
        objectives: [
            "Реализовать пузырьковую сортировку, сортировку выбором и вставками (Задание 1).",
            "Научиться измерять время выполнения алгоритмов с помощью <chrono>.",
            "Реализовать усложнённые варианты сортировки (только части массива) (Задание 2).",
            "Провести сравнительный анализ сортировок."
        ],
        objectives_by: [
            "Рэалізаваць пузырковую сартаванне, сартаванне выбарам і ўстаўкамі (Заданне 1).",
            "Навучыцца вымяраць час выканання алгарытмаў з дапамогай <chrono>.",
            "Рэалізаваць ускладненыя варыянты сартавання (толькі часткі масіва) (Заданне 2).",
            "Правесці параўнальны аналіз сартовак."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое внутренняя сортировка?", answer: "Сортировка данных, которые полностью помещаются в оперативной памяти." },
            { question: "В чём отличие быстрой и пузырьковой сортировки?", answer: "Быстрая сортировка (quicksort) имеет среднюю сложность O(n log n), пузырьковая — O(n²). Быстрая работает по принципу 'разделяй и властвуй', пузырьковая — последовательным сравнением соседей." },
            { question: "Когда бинарный поиск неэффективен?", answer: "Когда массив не отсортирован. В неотсортированном массиве нужно применять линейный поиск." },
            { question: "Как можно измерить производительность алгоритма?", answer: "Можно подсчитать количество операций сравнения/обмена или измерить время выполнения с помощью библиотеки <chrono>." },
            { question: "Какие критерии сравнения сортировок применимы?", answer: "Время выполнения, количество сравнений, количество обменов, потребляемая память, стабильность." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Описание алгоритмов (кратко).",
            "Листинг программ.",
            "Сравнение времени выполнения сортировок в 1 и 2 задаче.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Пузырьковая сортировка массива из 10 целых чисел.",
            code: `#include <iostream>
using namespace std;

int main() {
    const int N = 10;
    int arr[N] = {5, 2, 9, 1, 5, 6, 7, 3, 4, 8};

    for (int i = 0; i < N - 1; ++i) {
        for (int j = 0; j < N - i - 1; ++j) {
            if (arr[j] > arr[j + 1]) {
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }

    cout << "Отсортированный массив: ";
    for (int i = 0; i < N; ++i) cout << arr[i] << " ";
    cout << endl;
    return 0;
}`,
            test: "Отсортированный массив: 1 2 3 4 5 5 6 7 8 9"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №9 (Часть 1)
// Тема: Сортировка и поиск

#include <iostream>
#include <chrono>
using namespace std;

void bubbleSort(int arr[], int n) {
    for (int i = 0; i < n-1; i++)
        for (int j = 0; j < n-i-1; j++)
            if (arr[j] > arr[j+1])
                swap(arr[j], arr[j+1]);
}

void selectionSort(int arr[], int n) {
    for (int i = 0; i < n-1; i++) {
        int minIdx = i;
        for (int j = i+1; j < n; j++)
            if (arr[j] < arr[minIdx])
                minIdx = j;
        swap(arr[i], arr[minIdx]);
    }
}

void insertionSort(int arr[], int n) {
    for (int i = 1; i < n; i++) {
        int key = arr[i];
        int j = i-1;
        while (j >= 0 && arr[j] > key) {
            arr[j+1] = arr[j];
            j--;
        }
        arr[j+1] = key;
    }
}

void printArray(int arr[], int n) {
    for (int i = 0; i < n; i++) cout << arr[i] << " ";
    cout << endl;
}

int main() {
    const int N = 10;
    int arr[N];
    cout << "Введите " << N << " элементов: ";
    for (int i = 0; i < N; i++) cin >> arr[i];
    
    cout << "Исходный массив: ";
    printArray(arr, N);
    
    // TODO: Реализуйте задание 1 по вашему варианту
    // Создайте копии массива для каждого метода сортировки
    // Измерьте время выполнения с помощью chrono
    
    // TODO: Реализуйте задание 2 по вашему варианту
    
    return 0;
}`,
        
        // Варианты для задания 1 (из документа ЛР№9)
        task1Variants: [
            { number: 1, task: "Отсортировать массив целых чисел a[10] по возрастанию методом 'пузырька'. Исходные данные вводятся с клавиатуры." },
            { number: 2, task: "Отсортировать массив целых чисел a[10] по возрастанию методом 'выбора'. Исходные данные вводятся с клавиатуры." },
            { number: 3, task: "Отсортировать массив целых чисел a[10] по возрастанию методом 'вставки'. Исходные данные вводятся с клавиатуры." },
            { number: 4, task: "Отсортировать массив целых чисел a[10] по убыванию методом 'пузырька'. Исходные данные вводятся с клавиатуры." },
            { number: 5, task: "Отсортировать массив целых чисел a[10] по убыванию методом 'выбора'. Исходные данные вводятся с клавиатуры." },
            { number: 6, task: "Отсортировать массив целых чисел a[10] по убыванию методом 'вставки'. Исходные данные вводятся с клавиатуры." },
            { number: 7, task: "Отсортировать массив вещественных чисел a[8] по возрастанию методом 'пузырька'. Исходные данные вводятся с клавиатуры." },
            { number: 8, task: "Отсортировать массив вещественных чисел a[8] по возрастанию методом 'выбора'. Исходные данные вводятся с клавиатуры." },
            { number: 9, task: "Отсортировать массив вещественных чисел a[8] по возрастанию методом 'вставки'. Исходные данные вводятся с клавиатуры." },
            { number: 10, task: "Отсортировать массив вещественных чисел a[8] по убыванию методом 'пузырька'. Исходные данные вводятся с клавиатуры." },
            { number: 11, task: "Отсортировать массив вещественных чисел a[8] по убыванию методом 'выбора'. Исходные данные вводятся с клавиатуры." },
            { number: 12, task: "Отсортировать массив вещественных чисел a[8] по убыванию методом 'вставки'. Исходные данные вводятся с клавиатуры." },
            { number: 13, task: "Отсортировать символы строки по возрастанию методом 'вставки'. Исходные данные строки вводятся с клавиатуры." },
            { number: 14, task: "Отсортировать символы строки по убыванию методом 'пузырька'. Исходные данные строки вводятся с клавиатуры." },
            { number: 15, task: "Отсортировать символы строки по убыванию методом 'выбора'. Исходные данные строки вводятся с клавиатуры." }
        ],
        
        // Варианты для задания 2 (из документа ЛР№9)
        task2Variants: [
            { number: 1, task: "Сортировать только первые N элементов массива методом пузырька." },
            { number: 2, task: "Сортировать только последние N элементов массива методом выбора." },
            { number: 3, task: "Отсортировать только элементы с чётными индексами." },
            { number: 4, task: "Отсортировать элементы массива только в пределах индексов [L, R]." },
            { number: 5, task: "Первые K и последние K элементов сортируются отдельно, середина неизменна." },
            { number: 6, task: "Сортировать только положительные числа, отрицательные и нули остаются на своих местах." },
            { number: 7, task: "Сортировать только отрицательные числа, остальные без изменений." },
            { number: 8, task: "Сортировать только элементы, кратные N, остальные на местах." },
            { number: 9, task: "Отсортировать элементы, которые попадают в диапазон [A, B]." },
            { number: 10, task: "Сортировать только первые N элементов методом пузырька." },
            { number: 11, task: "Сортировать только последние N элементов методом выбора." },
            { number: 12, task: "Отсортировать только элементы с нечётными индексами." },
            { number: 13, task: "Сортировать только положительные числа." },
            { number: 14, task: "Сортировать только элементы, некратные N." },
            { number: 15, task: "Сортировать только положительные числа." }
        ]
    },
    
    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №9 (ЧАСТЬ 2): ПОИСК ЭЛЕМЕНТОВ
    // -----------------------------------------------------------------
    {
        id: "lab9_part2",
        title: "Лабораторная работа №9(2): Разработка алгоритмов и программ с использованием методов внутренней сортировки, методов поиска информации. Проведение сравнительного анализа различных алгоритмов сортировки.",
        title_by: "Лабараторная работа №9(2): Распрацоўка алгарытмаў і праграм з выкарыстаннем метадаў унутранай сартавання, метадаў пошуку інфармацыі. Правядзенне параўнальнага аналізу розных алгарытмаў сартавання.",
        description: "Цель работы: Научиться разрабатывать алгоритмы и программы с использованием методов внутренней сортировки, линейного и бинарного поиска элемента в массиве.",
        difficulty: "advanced",
        duration: 70,
        points: 350,
        status: "not-started",
        tags: ["поиск", "линейный поиск", "бинарный поиск", "вставка", "удаление"],
        tags_by: ["пошук", "лінейны пошук", "бінарны пошук", "устаўка", "выдаленне"],
        
        // Теоретическая часть
        theory: {
            search_attributes: [
                "Набор данных — совокупность данных, среди которых осуществляется поиск.",
                "Ключ поиска — величина, по значению которой происходит поиск.",
                "Критерий поиска — условие, которому должно удовлетворять значение ключа поиска."
            ],
            linear_search: "Линейный поиск заключается в последовательном переборе элементов массива и сравнении каждого из них с ключом поиска. Применяется для неупорядоченных массивов.",
            binary_search: "Бинарный поиск применяется для упорядоченных массивов. Массив делится пополам, серединный элемент сравнивается с ключом, и поиск продолжается в одной из половин."
        },
        
        // Цели работы
        objectives: [
            "Освоить алгоритмы линейного и бинарного поиска.",
            "Научиться вставлять и удалять элементы из массива.",
            "Реализовать программу для поиска и модификации массива (Задание 1).",
            "Выполнить задание 2* на сортировку и поиск."
        ],
        objectives_by: [
            "Асвоіць алгарытмы лінейнага і бінарнага пошуку.",
            "Навучыцца ўстаўляць і выдаляць элементы з масіву.",
            "Рэалізаваць праграму для пошуку і мадыфікацыі масіву (Заданне 1).",
            "Выканаць заданне 2* на сартаванне і пошук."
        ],
        
        // Вопросы для самоподготовки
        selfStudyQuestions: [
            "Опишите методы поиска информации.",
            "В чем преимущество бинарного поиска перед линейным?"
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Дата, название и цель лабораторной работы.",
            "Записать подпрограммы предназначенные для удаления и вставки элемента в массиве.",
            "Ответить на вопросы для самоподготовки."
        ],
        
        // Примеры из документа (3 примера)
        examples: [
            {
                title: "Пример 1. Линейный поиск",
                code: `#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int linearSearch(const int arr[], int size, int target) {
    for (int i = 0; i < size; i++) {
        if (arr[i] == target) {
            return i;
        }
    }
    return -1;
}

int main() {
    const int SIZE = 10;
    int a[SIZE];
    
    srand(time(0));
    cout << "Массив: ";
    for (int i = 0; i < SIZE; i++) {
        a[i] = rand() % 20 + 1;
        cout << a[i] << " ";
    }
    cout << endl;
    
    int number;
    cout << "Введите число для поиска: ";
    cin >> number;
    
    int index = linearSearch(a, SIZE, number);
    
    if (index != -1) {
        cout << "Число " << number << " найдено в массиве на позиции " << index << "." << endl;
    } else {
        cout << "Число " << number << " не найдено в массиве." << endl;
    }
    return 0;
}`
            },
            {
                title: "Пример 2. Удаление элемента",
                code: `#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main() {
    const int MAX_SIZE = 100;
    int a[MAX_SIZE];
    int n;
    
    cout << "Введите размер массива (n <= " << MAX_SIZE << "): ";
    cin >> n;
    
    srand(time(0));
    cout << "Исходный массив: ";
    for (int i = 0; i < n; i++) {
        a[i] = rand() % 100;
        cout << a[i] << " ";
    }
    cout << endl;
    
    int index;
    cout << "Введите индекс элемента для удаления (от 0 до " << n-1 << "): ";
    cin >> index;
    
    if (index < 0 || index >= n) {
        cout << "Ошибка: индекс вне диапазона!" << endl;
        return 1;
    }
    
    for (int i = index; i < n-1; i++) {
        a[i] = a[i+1];
    }
    n--;
    
    cout << "Массив после удаления: ";
    for (int i = 0; i < n; i++) {
        cout << a[i] << " ";
    }
    cout << endl;
    return 0;
}`
            },
            {
                title: "Пример 3. Вставка элемента",
                code: `#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main() {
    const int MAX_SIZE = 100;
    int a[MAX_SIZE];
    int n;
    
    cout << "Введите размер массива (n < " << MAX_SIZE << "): ";
    cin >> n;
    
    srand(time(0));
    cout << "Исходный массив: ";
    for (int i = 0; i < n; i++) {
        a[i] = rand() % 100;
        cout << a[i] << " ";
    }
    cout << endl;
    
    int m, k;
    cout << "Введите позицию (индекс) m для вставки (от 0 до " << n << "): ";
    cin >> m;
    cout << "Введите значение элемента k для вставки: ";
    cin >> k;
    
    if (m < 0 || m > n) {
        cout << "Ошибка: индекс вне допустимого диапазона!" << endl;
        return 1;
    }
    
    for (int i = n; i > m; i--) {
        a[i] = a[i-1];
    }
    a[m] = k;
    n++;
    
    cout << "Массив после вставки: ";
    for (int i = 0; i < n; i++) {
        cout << a[i] << " ";
    }
    cout << endl;
    return 0;
}`
            },
            {
                title: "Пример 4. Бинарный поиск",
                code: `#include <iostream>
using namespace std;

int binarySearch(int a[], int size, int target) {
    int l = 0;
    int r = size - 1;
    
    while (l <= r) {
        int m = (l + r) / 2;
        
        if (a[m] == target)
            return m;
        if (a[m] < target)
            l = m + 1;
        else
            r = m - 1;
    }
    return -1;
}

int main() {
    const int SIZE = 10;
    int a[SIZE];
    
    for (int i = 0; i < SIZE; i++) {
        a[i] = i * 5;
    }
    
    cout << "Упорядоченный массив: ";
    for (int i = 0; i < SIZE; i++) {
        cout << a[i] << " ";
    }
    cout << endl;
    
    int x;
    cout << "Введите число для поиска: ";
    cin >> x;
    
    int result = binarySearch(a, SIZE, x);
    
    if (result != -1)
        cout << "Число найдено на позиции " << result << endl;
    else
        cout << "Число не найдено в массиве." << endl;
    
    return 0;
}`
            }
        ],
        
        // Стартовый код
        starterCode: `// Лабораторная работа №9(2)
// Тема: Поиск элементов в массиве

#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

// Функция линейного поиска
int linearSearch(const int arr[], int size, int target) {
    for (int i = 0; i < size; i++) {
        if (arr[i] == target) {
            return i;
        }
    }
    return -1;
}

// Функция бинарного поиска (для отсортированных массивов)
int binarySearch(int arr[], int size, int target) {
    int left = 0, right = size - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (arr[mid] == target) return mid;
        if (arr[mid] < target) left = mid + 1;
        else right = mid - 1;
    }
    return -1;
}

// Функция для удаления элемента по индексу
void deleteElement(int arr[], int& size, int index) {
    for (int i = index; i < size - 1; i++) {
        arr[i] = arr[i + 1];
    }
    size--;
}

// Функция для вставки элемента на позицию
void insertElement(int arr[], int& size, int index, int value) {
    for (int i = size; i > index; i--) {
        arr[i] = arr[i - 1];
    }
    arr[index] = value;
    size++;
}

void printArray(const int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

int main() {
    srand(time(0));
    
    // TODO: Задание 1 (по варианту)
    
    // TODO: Задание 2* (по варианту)
    
    return 0;
}`,
        
        // Варианты для задания 1 (из документа ЛР№9(2))
        task1Variants: [
            { number: 1, task: "Сформировать массив а[1..10], элементы которого выбираются случайным образом из интервала [10,90]. Определить методом последовательного поиска, содержит он заданное число. Если элемент найден, то удалить его из массива." },
            { number: 2, task: "Сформировать массив а[1..8], элементы которого выбираются случайным образом из интервала [-10, 10]. Определить методом последовательного поиска, содержит он заданное число. Если элемент не найден, то вставить его на первое место." },
            { number: 3, task: "Сформировать массив а[1..20], элементы которого выбираются случайным образом из интервала [40, 90]. Определить методом последовательного поиска, содержит он заданное число. Если элемент найден, то удалить его из массива." },
            { number: 4, task: "Сформировать массив а[1..18], элементы которого выбираются случайным образом из интервала [-20, 40]. Определить методом последовательного поиска, содержит он заданное число. Если элемент не найден, то вставить его на последнее место." },
            { number: 5, task: "Сформировать массив а[1..12], элементы которого выбираются случайным образом из интервала [101, 290]. Определить методом последовательного поиска, содержит он заданное число. Если элемент найден, то удалить его из массива." },
            { number: 6, task: "Сформировать массив а[1..14], элементы которого выбираются случайным образом из интервала [-20, 50]. Определить методом последовательного поиска, содержит он заданное число. Если элемент не найден, то вставить его на последнее место." },
            { number: 7, task: "Сформировать массив а[1..11], элементы которого выбираются случайным образом из интервала [-40, 70]. Определить методом последовательного поиска, содержит он заданное число. Если элемент найден, то удалить следующий за ним элемент из массива." },
            { number: 8, task: "Сформировать массив а[1..8], элементы которого выбираются случайным образом из интервала [10, 70]. Определить методом последовательного поиска, содержит он заданное число. Если элемент не найден, то вставить его на второе место." },
            { number: 9, task: "Сформировать массив а[1..16], элементы которого выбираются случайным образом из интервала [100, 200]. Определить методом последовательного поиска, содержит он заданное число. Если элемент найден, то удалить стоящий перед ним элемент из массива." },
            { number: 10, task: "Сформировать массив из 15 целых чисел, выбранных случайным образом из интервала [-10, 30]. Найти минимальный элемент и удалить его из массива." },
            { number: 11, task: "Задан одномерный массив А[1..20]. Найти минимальный элемент среди элементов массива с n-го по k-й (n и k вводятся с клавиатуры)." },
            { number: 12, task: "Сформировать массив а[1..18], элементы которого выбираются случайным образом из интервала [20, 140]. Определить методом последовательного поиска, содержит он заданное число. Если элемент не найден, то вставить его на последнее место." }
        ],
        
        // Задание 2* (подгруппы А и Б)
        task2: {
            groupA: "Дан массив А состоящий из 20 целых чисел. Отсортируйте его по убыванию. Введите с клавиатуры 2 контрольных числа a и b. Определите наличие в массиве чисел, лежащих в диапазоне от a до b. В положительном случае выведите сумму найденных чисел на экран.",
            groupB: "Напишите программу, которая организует хранение в массиве 15 различных целых чисел. Содержимое массива сортируется по убыванию. После этого, с клавиатуры запрашивается контрольное число, наличие которого в массиве необходимо проверить. На экран монитора выводится содержимое массива после \"контрольного числа\"."
        }
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №10: ДВУМЕРНЫЕ МАССИВЫ (ПОШАГОВАЯ ДЕТАЛИЗАЦИЯ)
    // -----------------------------------------------------------------
    {
        id: "lab10",
        title: "Лабораторная работа №10: Разработка алгоритмов и программ методом пошаговой детализации. Обработка двумерных массивов.",
        title_by: "Лабараторная работа №10: Распрацоўка алгарытмаў і праграм метадам пакрокавай дэталізацыі. Апрацоўка двухмерных масіваў.",
        description: "Цель работы: Изучить метод пошаговой детализации при проектировании алгоритма; научиться применять метод детализации для построения программ обработки двумерных массивов; закрепить навыки работы с двумерными массивами в языке C++.",
        difficulty: "advanced",
        duration: 75,
        points: 400,
        status: "not-started",
        tags: ["двумерные массивы", "матрицы", "пошаговая детализация", "функции", "top-down"],
        tags_by: ["двухмерныя масівы", "матрыцы", "пакрокавая дэталізацыя", "функцыі", "top-down"],
        
        // Теоретическая часть
        theory: {
            stepwise_refinement: "Метод пошаговой детализации — это метод разработки алгоритма, при котором решение задачи строится поэтапно, от общего к частному, с уточнением шагов до достижения элементарных операций, реализуемых в коде.",
            stages: [
                "Постановка задачи.",
                "Определение входных и выходных данных.",
                "Выделение основных этапов решения.",
                "Детализация каждого этапа до уровня конкретных операций.",
                "Преобразование детализированного алгоритма в код."
            ]
        },
        
        // Цели работы
        objectives: [
            "Освоить метод пошаговой детализации (top-down design).",
            "Разработать алгоритм решения задачи, разбив его на этапы.",
            "Реализовать каждый этап в виде отдельной функции.",
            "Обработать двумерный массив в соответствии с вариантом."
        ],
        objectives_by: [
            "Асвоіць метад пакрокавай дэталізацыі (top-down design).",
            "Распрацаваць алгарытм рашэння задачы, разбіўшы яго на этапы.",
            "Рэалізаваць кожны этап у выглядзе асобнай функцыі.",
            "Апрацаваць двухмерны масіў у адпаведнасці з варыянтам."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что представляет собой метод пошаговой детализации?", answer: "Метод разработки алгоритма, при котором общая задача последовательно разбивается на всё более мелкие и конкретные шаги, пока они не станут элементарными операциями." },
            { question: "В чём преимущество поэтапного проектирования алгоритма?", answer: "Упрощает понимание и разработку сложных задач, повышает читаемость кода, облегчает отладку и тестирование отдельных частей." },
            { question: "Как объявляется двумерный массив в языке C++?", answer: "тип_данных имя_массива[количество_строк][количество_столбцов];" },
            { question: "Как обращаться к элементам двумерного массива?", answer: "имя_массива[индекс_строки][индекс_столбца];" },
            { question: "Какие существуют способы обхода двумерного массива?", answer: "Построчно (внешний цикл по строкам, внутренний по столбцам), по столбцам (наоборот), по диагоналям." },
            { question: "Что такое главная и побочная диагонали матрицы?", answer: "Главная диагональ: элементы с индексами i==j. Побочная диагональ: элементы с индексами i + j == n - 1 (для квадратной матрицы)." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема и цель работы.",
            "Постановка задачи.",
            "Алгоритм решения (словесное описание + блок-схема).",
            "Текст программы.",
            "Результаты тестирования.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Дан двумерный массив a[4][5]. Найти максимальный элемент в каждом столбце. Реализовать с пошаговой детализацией (функции).",
            code: `#include <iostream>
#include <ctime>
using namespace std;

const int ROWS = 4, COLS = 5;

void fillArray(int a[ROWS][COLS]) {
    srand(time(0));
    for (int i = 0; i < ROWS; i++)
        for (int j = 0; j < COLS; j++)
            a[i][j] = rand() % 100;
}

void printArray(const int a[ROWS][COLS]) {
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++)
            cout << a[i][j] << "\\t";
        cout << endl;
    }
}

void findMaxInColumns(const int a[ROWS][COLS], int maxCol[COLS]) {
    for (int j = 0; j < COLS; j++) {
        int maxVal = a[0][j];
        for (int i = 1; i < ROWS; i++)
            if (a[i][j] > maxVal) maxVal = a[i][j];
        maxCol[j] = maxVal;
    }
}

void print1DArray(const int arr[COLS]) {
    cout << "Максимумы по столбцам: ";
    for (int i = 0; i < COLS; i++) cout << arr[i] << " ";
    cout << endl;
}

int main() {
    int a[ROWS][COLS], maxCol[COLS];
    fillArray(a);
    printArray(a);
    findMaxInColumns(a, maxCol);
    print1DArray(maxCol);
    return 0;
}`,
            test: "Вывод матрицы и массива максимумов."
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №10
// Тема: Пошаговая детализация и двумерные массивы

#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;

const int ROWS = 4;
const int COLS = 5;

// Функция для заполнения массива случайными числами
void fillArray(int a[ROWS][COLS]) {
    srand(time(0));
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            a[i][j] = rand() % 21 - 10; // [-10, 10]
        }
    }
}

// Функция для вывода массива
void printArray(const int a[ROWS][COLS]) {
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            cout << a[i][j] << "\\t";
        }
        cout << endl;
    }
}

// TODO: Объявите остальные функции для вашего варианта

int main() {
    int a[ROWS][COLS];
    
    fillArray(a);
    cout << "Исходный массив:" << endl;
    printArray(a);
    
    // TODO: Вызов функций для решения задач по варианту
    
    return 0;
}`,
        
        // Варианты заданий (все 15)
        taskVariants: [
            { number: 1, tasks: ["Реализовать функцию вычисления суммы элементов строки, сохранить результаты в sumRows[].", "Реализовать функцию подсчёта положительных элементов в каждой строке."] },
            { number: 2, tasks: ["Реализовать функцию нахождения минимального элемента в каждом столбце (результат — minCol[]).", "Реализовать функцию определения строки с наибольшей суммой элементов."] },
            { number: 3, tasks: ["Реализовать функцию транспонирования матрицы a[n][m].", "Реализовать функцию проверки, содержит ли строка только чётные числа."] },
            { number: 4, tasks: ["Реализовать функцию замены отрицательных элементов на 0.", "Реализовать функцию вычисления среднего значения элементов в каждом столбце."] },
            { number: 5, tasks: ["Реализовать функцию обнуления главной диагонали квадратной матрицы a[n][n].", "Реализовать функцию поиска строки с наименьшим числом чётных элементов."] },
            { number: 6, tasks: ["Реализовать функцию нахождения номера столбца с максимальной суммой элементов.", "Реализовать функцию удаления строки с минимальной суммой элементов (создать новую матрицу)."] },
            { number: 7, tasks: ["Реализовать функцию подсчёта нечётных чисел в каждом столбце.", "Реализовать функцию замены элементов главной диагонали квадратной матрицы на сумму их индексов."] },
            { number: 8, tasks: ["Реализовать функцию замены местами первой и последней строки.", "Реализовать функцию проверки, содержит ли столбец одинаковые элементы."] },
            { number: 9, tasks: ["Реализовать функцию сортировки строк по возрастанию суммы элементов (можно использовать любую сортировку).", "Реализовать функцию подсчёта количества строк, содержащих хотя бы один ноль."] },
            { number: 10, tasks: ["Реализовать функцию вычисления среднего арифметического каждой строки.", "Реализовать функцию замены местами строк с минимальным и максимальным средним значением."] },
            { number: 11, tasks: ["Реализовать функцию поиска наибольшего элемента на побочной диагонали (для квадратной матрицы).", "Реализовать функцию подсчёта общего количества положительных элементов в массиве."] },
            { number: 12, tasks: ["Реализовать функцию определения количества столбцов, содержащих только положительные элементы.", "Реализовать функцию замены местами максимального и минимального элементов массива."] },
            { number: 13, tasks: ["Реализовать функцию замены элементов побочной диагонали на 1.", "Реализовать функцию определения строки с максимальным числом нулей."] },
            { number: 14, tasks: ["Реализовать функцию удаления столбца с наименьшим максимальным элементом (создать новую матрицу).", "Реализовать функцию проверки симметричности массива относительно главной диагонали."] },
            { number: 15, tasks: ["Реализовать функцию нахождения суммы элементов выше главной диагонали.", "Реализовать функцию замены всех элементов на границах матрицы на 0."] }
        ]
    },

    // -----------------------------------------------------------------
    // ЛАБОРАТОРНАЯ РАБОТА №11: СТРУКТУРЫ (struct)
    // -----------------------------------------------------------------
    {
        id: "lab11",
        title: "Лабораторная работа №11: Разработка алгоритмов и программ с использованием массивов записей (структур)",
        title_by: "Лабараторная работа №11: Распрацоўка алгарытмаў і праграм з выкарыстаннем масіваў запісаў (структур)",
        description: "Цель работы: Ознакомиться с понятием записей (структур) в языке программирования C++; научиться создавать пользовательские типы данных с помощью структур; освоить приёмы работы с массивами структур; разработать программы, использующие массивы записей для решения задач обработки информации.",
        difficulty: "intermediate",
        duration: 70,
        points: 350,
        status: "not-started",
        tags: ["структуры", "struct", "массив структур", "обработка данных"],
        tags_by: ["структуры", "struct", "масіў структур", "апрацоўка даных"],
        
        // Теоретическая часть
        theory: {
            struct_definition: "Структура (struct) — это составной тип данных, объединяющий несколько переменных (полей) разных типов под одним именем. Используется для логического объединения данных, описывающих один объект.",
            struct_declaration: "struct Student {\n    string name;\n    int age;\n    double average;\n};",
            array_of_structs: "Student group[30]; // массив из 30 студентов",
            access: "group[0].name = \"Ivan\";\ncout << group[0].average;"
        },
        
        // Цели работы
        objectives: [
            "Научиться объявлять структуры с различными полями.",
            "Освоить создание и инициализацию массива структур.",
            "Реализовать основное и дополнительное задание по варианту (поиск, сортировка, статистика)."
        ],
        objectives_by: [
            "Навучыцца аб'яўляць структуры з рознымі палямі.",
            "Асвоіць стварэнне і ініцыялізацыю масіву структур.",
            "Рэалізаваць асноўнае і дадатковае заданне па варыянце (пошук, сартаванне, статыстыка)."
        ],
        
        // Контрольные вопросы
        controlQuestions: [
            { question: "Что такое структура в языке C++?", answer: "Это составной тип данных, объединяющий несколько переменных (полей) разных типов под одним именем." },
            { question: "Как объявить и использовать массив структур?", answer: "Student group[30]; — массив из 30 структур Student. Доступ к полям: group[0].name." },
            { question: "Чем структура отличается от массива?", answer: "Массив хранит элементы одного типа, структура может хранить элементы разных типов." },
            { question: "Как обращаться к полям структуры?", answer: "Через оператор '.' (точка), например: student.name." },
            { question: "Как сортировать массив структур?", answer: "Можно использовать алгоритмы сортировки (пузырьком, вставками), сравнивая нужные поля. Можно также использовать std::sort с компаратором." }
        ],
        
        // Требования к отчёту
        reportRequirements: [
            "Тема, цель работы.",
            "Исходный код.",
            "Примеры ввода и вывода.",
            "Ответы на контрольные вопросы."
        ],
        
        // Пример выполнения (из теоретической части)
        example: {
            task: "Структура 'Book': название, автор, год издания, цена. Вывести книги после 2010 года, найти среднюю цену.",
            code: `#include <iostream>
#include <string>
using namespace std;

struct Book {
    string title;
    string author;
    int year;
    double price;
};

void printRecentBooks(Book books[], int n) {
    for (int i = 0; i < n; i++) {
        if (books[i].year > 2010) {
            cout << books[i].title << " - " << books[i].year << endl;
        }
    }
}

double averagePrice(Book books[], int n) {
    double sum = 0;
    for (int i = 0; i < n; i++) sum += books[i].price;
    return sum / n;
}

int main() {
    Book books[3] = {
        {"Война и мир", "Толстой", 1869, 500.0},
        {"1984", "Оруэлл", 1949, 450.0},
        {"Гарри Поттер", "Роулинг", 2011, 600.0}
    };
    
    cout << "Книги после 2010 года:" << endl;
    printRecentBooks(books, 3);
    cout << "Средняя цена: " << averagePrice(books, 3) << endl;
    return 0;
}`,
            test: "Книги после 2010 года:\nГарри Поттер - 2011\nСредняя цена: 516.667"
        },
        
        // Стартовый код
        starterCode: `// Лабораторная работа №11
// Тема: Структуры в C++

#include <iostream>
#include <string>
using namespace std;

// TODO: Объявите структуру для вашего варианта
struct Item {
    // поля
};

// TODO: Прототипы функций для обработки

void inputItems(Item items[], int n) {
    for (int i = 0; i < n; i++) {
        cout << "Элемент #" << i+1 << ":" << endl;
        // TODO: Ввод полей структуры
    }
}

void printItems(const Item items[], int n) {
    for (int i = 0; i < n; i++) {
        // TODO: Вывод полей структуры
    }
}

int main() {
    int n;
    cout << "Введите количество элементов: ";
    cin >> n;
    cin.ignore(); // очистка буфера после cin
    
    Item items[n];
    
    inputItems(items, n);
    cout << "\\nВведенные данные:" << endl;
    printItems(items, n);
    
    // TODO: Выполните основное задание
    
    // TODO: Выполните дополнительное задание
    
    return 0;
}`,
        
        // Варианты заданий (все 15)
        variants: [
            {
                number: 1,
                struct_def: "Структура «Студент»: ФИО, группа, средний балл.",
                task: "Основное: Найти студентов с баллом выше 8.0. Дополнительно: Отсортировать студентов по убыванию среднего балла."
            },
            {
                number: 2,
                struct_def: "Структура «Товар»: название, цена, количество.",
                task: "Основное: Найти самый дорогой товар. Дополнительно: Вывести список товаров, у которых количество меньше 5."
            },
            {
                number: 3,
                struct_def: "Структура «Работник»: ФИО, должность, стаж.",
                task: "Основное: Вывести работников со стажем более 5 лет. Дополнительно: Найти средний стаж по всем сотрудникам."
            },
            {
                number: 4,
                struct_def: "Структура «Автомобиль»: марка, год выпуска, пробег.",
                task: "Основное: Найти авто с пробегом меньше 10000. Дополнительно: Определить, есть ли среди них машины старше 10 лет."
            },
            {
                number: 5,
                struct_def: "Структура «Книга»: автор, название, год.",
                task: "Основное: Отсортировать по году издания. Дополнительно: Вывести список книг, автор которых начинается на определённую букву."
            },
            {
                number: 6,
                struct_def: "Структура «Фильм»: название, режиссер, рейтинг.",
                task: "Основное: Найти фильм с наивысшим рейтингом. Дополнительно: Определить количество фильмов с рейтингом выше среднего."
            },
            {
                number: 7,
                struct_def: "Структура «Турист»: имя, страна, количество поездок.",
                task: "Основное: Найти туристов с более чем 3 поездками. Дополнительно: Посчитать общее количество поездок всех туристов."
            },
            {
                number: 8,
                struct_def: "Структура «Продукт»: название, срок хранения, вес.",
                task: "Основное: Вывести продукты с весом менее 1 кг. Дополнительно: Найти продукт с наибольшим сроком хранения."
            },
            {
                number: 9,
                struct_def: "Структура «Спортсмен»: имя, вид спорта, результат.",
                task: "Основное: Найти лучший результат в каждом виде спорта. Дополнительно: Подсчитать количество спортсменов по каждому виду спорта."
            },
            {
                number: 10,
                struct_def: "Структура «Абитуриент»: ФИО, баллы по 3 предметам.",
                task: "Основное: Найти тех, у кого средний балл ниже 5. Дополнительно: Вывести ФИО абитуриента с самым высоким баллом по первому предмету."
            },
            {
                number: 11,
                struct_def: "Структура «Банк»: клиент, тип вклада, сумма.",
                task: "Основное: Найти клиента с наибольшей суммой вклада. Дополнительно: Определить общую сумму вкладов по каждому типу."
            },
            {
                number: 12,
                struct_def: "Структура «Фильм»: жанр, название, длительность.",
                task: "Основное: Найти самый длинный фильм. Дополнительно: Посчитать количество фильмов по каждому жанру."
            },
            {
                number: 13,
                struct_def: "Структура «Сотрудник»: имя, отдел, оклад.",
                task: "Основное: Отсортировать по убыванию оклада. Дополнительно: Вывести среднюю зарплату по каждому отделу."
            },
            {
                number: 14,
                struct_def: "Структура «Песня»: название, исполнитель, длительность.",
                task: "Основное: Найти песни короче 3 минут. Дополнительно: Определить исполнителя с наибольшим количеством песен."
            },
            {
                number: 15,
                struct_def: "Структура «Заказ»: номер, товар, стоимость.",
                task: "Основное: Подсчитать общую сумму всех заказов. Дополнительно: Найти заказ с минимальной стоимостью."
            }
        ]
    }
];

</script>
<script>
// Функция для обновления отображения задания в модальном окне лабораторной
function updateLabVariantDisplay() {
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab) return;
    
    const variantSelect = document.getElementById('labVariantSelect');
    if (!variantSelect) return;
    
    const variantIndex = parseInt(variantSelect.value);
    const variant = lab.variants[variantIndex];
    
    // Обновляем текст заданий
    const task1Element = document.getElementById('labTask1');
    const task2Element = document.getElementById('labTask2');
    const task3Element = document.getElementById('labTask3');
    
    if (task1Element) task1Element.textContent = variant.task1;
    if (task2Element) task2Element.textContent = variant.task2;
    if (task3Element) task3Element.textContent = variant.task3;
    
    //  стартовый код с комментариями для конкретного варианта
    const starterCode = `// Лабораторная работа №1 - Вариант ${variant.number}
// Задание 1: ${variant.task1}
// Задание 2: ${variant.task2}
// Задание 3: ${variant.task3}

#include <iostream>
#include <cmath> // для математических функций (sqrt, pow и т.д.)
using namespace std;

int main() {
    // TODO: Объявите переменные для вашего варианта
    // Пример для варианта 1:
    // double a, perimeter;
    
    // TODO: Организуйте ввод данных
    // cout << "Введите значения: ";
    // cin >> a;
    
    // TODO: Выполните вычисления для задания 1
    // perimeter = 4 * a;
    // cout << "Периметр квадрата: " << perimeter << endl;
    
    // TODO: Выполните вычисления для задания 2 (при необходимости)
    
    // TODO: Выполните вычисления для задания 3
    
    return 0;
}`;
    
    //  обновлённый стартовый код в состояние
    const fileName = `lab_${lab.id}_variant_${variant.number}.cpp`;
    appState.current.editor.files[fileName] = starterCode;
    
}



//   openLabModal для отображения выпадающего списка
const originalOpenLabModal = openLabModal;
openLabModal = function(labId) {
    const lab = LABS_DATA.find(l => l.id === labId);
    if (!lab) return;
    
    appState.current.lab = labId;
    
    const modal = document.getElementById('labModal');
    const content = document.getElementById('labModalContent');
    
    const translatedTitle = currentLanguage === 'by' && lab.title_by ? lab.title_by : lab.title;
    const translatedDescription = currentLanguage === 'by' && lab.description_by ? lab.description_by : lab.description;
    
    // выпадающий список вариантов
    let variantsOptions = '';
    lab.variants.forEach((variant, index) => {
        variantsOptions += `<option value="${index}">Вариант ${variant.number}</option>`;
    });
    
    // Основной контент модального окна
    content.innerHTML = `
        <div class="lab-instructions">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap;">
                <div>
                    <h3 style="color: var(--text-primary); margin-bottom: 10px;">${translatedTitle}</h3>
                    <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 15px; flex-wrap: wrap;">
                        <div style="padding: 6px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; 
                             background: rgba(80, 250, 123, 0.2); color: var(--accent-green);">
                            Начинающий
                        </div>
                        <div style="display: flex; gap: 10px; color: var(--accent-purple); font-size: 14px;">
                            <span><i class="fas fa-clock"></i> ${lab.duration} мин</span>
                            <span><i class="fas fa-star"></i> ${lab.points} баллов</span>
                        </div>
                    </div>
                </div>
                
                <!-- Выпадающий список вариантов -->
                <div style="min-width: 200px;">
                    <label style="color: var(--accent-blue); font-weight: 600; margin-bottom: 5px; display: block;">
                        <i class="fas fa-list"></i> Выберите вариант:
                    </label>
                    <select id="labVariantSelect" class="filter-select" style="width: 100%;" onchange="updateLabVariantDisplay()">
                        ${variantsOptions}
                    </select>
                </div>
            </div>
            
            <div style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 25px;">
                ${translatedDescription}
            </div>
            
            <!-- Теоретическая часть -->
            <div class="theory-section" style="margin-top: 20px;">
                <h4><i class="fas fa-book"></i> Теоретическая часть</h4>
                <p><strong>Алгоритм:</strong> ${lab.theory.algorithm_definition}</p>
                <p><strong>Структура программы:</strong></p>
                <pre style="background: rgba(10,25,47,0.5); padding: 10px; border-radius: 8px;">${lab.theory.program_structure}</pre>
                <p><strong>Ввод/вывод:</strong> ${lab.theory.input_output}</p>
            </div>
            
            <!-- Задания для выбранного варианта -->
            <div class="lab-objectives" style="margin-top: 25px;">
                <h4 style="color: var(--accent-blue);"><i class="fas fa-tasks"></i> Ваши задания:</h4>
                <div class="lab-objective" id="labTask1Container">
                    <i class="fas fa-circle" style="color: var(--accent-blue);"></i>
                    <span id="labTask1">${lab.variants[0].task1}</span>
                </div>
                <div class="lab-objective" id="labTask2Container">
                    <i class="fas fa-circle" style="color: var(--accent-blue);"></i>
                    <span id="labTask2">${lab.variants[0].task2}</span>
                </div>
                <div class="lab-objective" id="labTask3Container">
                    <i class="fas fa-circle" style="color: var(--accent-blue);"></i>
                    <span id="labTask3">${lab.variants[0].task3}</span>
                </div>
            </div>
            
            <!-- Пример выполнения -->
            <div style="margin-top: 25px;">
                <h4 style="color: var(--accent-green);"><i class="fas fa-lightbulb"></i> Пример выполнения</h4>
                <div style="background: rgba(80, 250, 123, 0.1); border-radius: 12px; padding: 15px;">
                    <p><strong>Задача:</strong> ${lab.example.task}</p>
                    <p><strong>Формула:</strong> ${lab.example.formula}</p>
                    <p><strong>Блок-схема:</strong> ${lab.example.flowchart}</p>
                    <pre style="background: rgba(10,25,47,0.5); padding: 10px; border-radius: 8px; margin-top: 10px;">${lab.example.code}</pre>
                    <p><strong>Тест:</strong> ${lab.example.test}</p>
                </div>
            </div>
            
            <!-- Контрольные вопросы (первые два для примера) -->
            <div style="margin-top: 25px;">
                <h4 style="color: var(--accent-purple);"><i class="fas fa-question-circle"></i> Контрольные вопросы</h4>
                <ol style="padding-left: 20px;">
                    ${lab.controlQuestions.slice(0, 3).map(q => `<li style="margin-bottom: 10px; color: var(--text-secondary);">${q.question}</li>`).join('')}
                </ol>
            </div>
            
            <!-- Кнопки действий -->
            <div style="display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap;">
                <button class="btn btn-primary" style="flex: 1;" onclick="startLabWithVariant()">
                    <i class="fas fa-play"></i> Начать выполнение
                </button>
                <button class="btn btn-outline" style="flex: 1;" onclick="closeModal()">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
        </div>
    `;
    
    modal.classList.add('active');
    
    // Инициализируем отображение первого варианта
    setTimeout(updateLabVariantDisplay, 100);
};

// Функция для старта лабораторной с выбранным вариантом
function startLabWithVariant() {
    const variantSelect = document.getElementById('labVariantSelect');
    if (!variantSelect) return;
    
    const variantIndex = parseInt(variantSelect.value);
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab) return;
    
    const variant = lab.variants[variantIndex];
    const fileName = `lab_${lab.id}_variant_${variant.number}.cpp`;
    
    //  стартовый код для этого варианта
    if (appState.current.editor.files[fileName]) {
        codeEditor.setValue(appState.current.editor.files[fileName]);
    } else {
        //  файла - нет, создаём базовый шаблон
        const starterCode = `// Лабораторная работа №1 - Вариант ${variant.number}
// ${variant.task1}
// ${variant.task2}
// ${variant.task3}

#include <iostream>
#include <cmath>
using namespace std;

int main() {
    // TODO: Объявите переменные
    double a, b, result;
    
    // TODO: Ввод данных
    cout << "Введите значения: ";
    cin >> a >> b;
    
    // TODO: Вычисления для задания 1
    // result = ...
    // cout << "Результат задания 1: " << result << endl;
    
    // TODO: Вычисления для задания 2
    // result = ...
    // cout << "Результат задания 2: " << result << endl;
    
    // TODO: Вычисления для задания 3
    // result = ...
    // cout << "Результат задания 3: " << result << endl;
    
    return 0;
}`;
        appState.current.editor.files[fileName] = starterCode;
        codeEditor.setValue(starterCode);
    }
    
    appState.current.file = fileName;
    updateFileTabs();
    
    //   раздел практики
    switchSection('practice');
    
    // Закрываем модальное окно
    closeModal();
    
    showNotification(`🚀 Начата лабораторная работа, вариант ${variant.number}`, "success");
    logActivity(`Начал лабораторную работу: вариант ${variant.number}`);
}
                



           // ================ ИГРЫ ================
function loadGames() {
    const container = document.getElementById('gamesContainer');
    
    container.innerHTML = `
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; margin-top: 20px;">
            ${GAMES_DATA.map(game => `
                <div class="game-card" onclick="startGame('${game.id}')">
                    <div class="game-title">${game.icon} ${game.title}</div>
                    <div class="game-description">${game.description}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                        <div class="badge ${game.difficulty === 'beginner' ? 'badge-primary' : 
                                          game.difficulty === 'intermediate' ? 'badge-warning' : 
                                          'badge-danger'}">
                            ${game.difficulty === 'beginner' ? 'Начинающий' : 
                              game.difficulty === 'intermediate' ? 'Средний' : 'Продвинутый'}
                        </div>
                        ${game.highScore > 0 ? `
                            <div style="font-size: 12px; color: var(--accent-yellow);">
                                <i class="fas fa-trophy"></i> Рекорд: ${game.highScore}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('')}
        </div>
    `;
}

function startGame(gameId) {
    switch(gameId) {
        case 'memory_game':
            startMemoryGame();
            break;
        case 'code_racer':
            startCodeRacer();
            break;
        case 'bug_fix':
            startBugFix();
            break;
        case 'memory_simulator':
            startMemorySimulatorGame();
            break;
    }
}

function startCodeRacer() {
    const container = document.getElementById('gamesContainer');
    const targetCode = `#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!";
    return 0;
}`;
    
    container.innerHTML = `
        <div style="text-align: center; padding: 20px;">
            <h3 style="color: var(--accent-blue); margin-bottom: 20px;">🏎️ Гонки кода</h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">Наберите код как можно быстрее:</p>
            
            <div class="code-example" style="text-align: left; margin-bottom: 20px;">
                <pre>${targetCode}</pre>
            </div>
            
            <textarea id="racerInput" style="width: 100%; height: 200px; background: #1e1e1e; color: #fff; 
                border: 1px solid var(--accent-blue); border-radius: 10px; padding: 15px; 
                font-family: 'Consolas', monospace; margin-bottom: 20px;" 
                placeholder="Начните печатать..."></textarea>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-primary" onclick="checkCodeRacer()">
                    <i class="fas fa-check"></i> Проверить
                </button>
                <button class="btn btn-outline" onclick="loadGames()">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
            </div>
        </div>
    `;
    
    window.racerStartTime = Date.now();
}

function checkCodeRacer() {
    const input = document.getElementById('racerInput').value;
    const target = `#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!";
    return 0;
}`;
    
    const timeSpent = Math.floor((Date.now() - window.racerStartTime) / 1000);
    const accuracy = calculateAccuracy(input, target);
    
    if (accuracy > 80) {
        const score = Math.floor(1000 / timeSpent * accuracy);
        addXP(score);
        showNotification(`🎉 Отлично! Время: ${timeSpent}с, Точность: ${accuracy}% +${score} XP`, 'success');
    } else {
        showNotification(`📝 Время: ${timeSpent}с, Точность: ${accuracy}% - Попробуйте еще`, 'info');
    }
}

function startMemoryGame() {
            const container = document.getElementById('gamesContainer');
            
            const operators = [
                { symbol: '+', name: 'Сложение', description: 'Сумма двух значений' },
                { symbol: '-', name: 'Вычитание', description: 'Разность двух значений' },
                { symbol: '*', name: 'Умножение', description: 'Произведение двух значений' },
                { symbol: '/', name: 'Деление', description: 'Частное двух значений' },
                { symbol: '%', name: 'Остаток', description: 'Остаток от деления' },
                { symbol: '=', name: 'Присваивание', description: 'Присвоить значение' },
                { symbol: '==', name: 'Равенство', description: 'Сравнение на равенство' },
                { symbol: '++', name: 'Инкремент', description: 'Увеличение на 1' }
            ];
            
            // Создаем пары карточек
            const cards = [...operators, ...operators]
                .sort(() => Math.random() - 0.5)
                .map((op, i) => ({ ...op, id: i, flipped: false, matched: false }));
            
            container.innerHTML = `
                <div style="text-align: center;">
                    <h3 style="color: var(--accent-blue); margin-bottom: 20px;">🎮 Мемори: Угадай оператор</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 30px;">
                        Найдите пары операторов. Кликните на карточку, чтобы увидеть оператор, затем найдите его пару.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 30px 0;" id="memoryGameGrid">
                        ${cards.map(card => `
                            <div class="memory-game-card" data-id="${card.id}" 
                                 onclick="flipCard(this, '${card.symbol}', '${card.name}', '${card.description}')">
                                <div class="card-front">?</div>
                                <div class="card-back" style="display: none;">
                                    <div style="font-size: 24px; font-weight: bold;">${card.symbol}</div>
                                    <div style="font-size: 12px; margin-top: 5px;">${card.name}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <div style="display: inline-flex; gap: 20px; align-items: center;">
                            <div style="font-size: 18px; color: var(--accent-green);">
                                Ходов: <span id="movesCount">0</span>
                            </div>
                            <div style="font-size: 18px; color: var(--accent-blue);">
                                Время: <span id="gameTimer">00:00</span>
                            </div>
                            <button class="btn btn-outline" onclick="resetMemoryGame()">
                                <i class="fas fa-redo"></i> Начать заново
                            </button>
                            <button class="btn btn-outline" onclick="loadGames()">
                                <i class="fas fa-arrow-left"></i> К списку игр
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Добавляем стили для игры
            const style = document.createElement('style');
            style.textContent = `
                .memory-game-card {
                    aspect-ratio: 1;
                    background: var(--panel-bg);
                    border: 2px solid var(--panel-border);
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 32px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    position: relative;
                    overflow: hidden;
                }
                
                .memory-game-card:hover {
                    transform: translateY(-5px);
                    border-color: var(--accent-blue);
                }
                
                .memory-game-card.flipped {
                    background: rgba(100, 255, 218, 0.1);
                    border-color: var(--accent-blue);
                }
                
                .memory-game-card.matched {
                    background: rgba(80, 250, 123, 0.1);
                    border-color: var(--accent-green);
                    cursor: default;
                }
                
                .card-front, .card-back {
                    position: absolute;
                    width: 100%;
                    height: 100%;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    backface-visibility: hidden;
                    transition: transform 0.6s;
                }
            `;
            document.head.appendChild(style);
            
            window.memoryGameState = {
                cards: cards,
                flippedCards: [],
                moves: 0,
                matches: 0,
                startTime: Date.now(),
                timer: null
            };
            
            // Запускаем таймер
            startGameTimer();
        }

         function startGameTimer() {
            const timerElement = document.getElementById('gameTimer');
            window.memoryGameState.timer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - window.memoryGameState.startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function flipCard(element, symbol, name, description) {
            const game = window.memoryGameState;
            const cardId = parseInt(element.getAttribute('data-id'));
            const card = game.cards.find(c => c.id === cardId);
            
            if (!card || card.flipped || card.matched || game.flippedCards.length >= 2) {
                return;
            }
            
            // Переворачиваем карточку
            card.flipped = true;
            element.classList.add('flipped');
            element.querySelector('.card-front').style.display = 'none';
            element.querySelector('.card-back').style.display = 'flex';
            
            game.flippedCards.push({ element, card, symbol });
            
            // Показываем описание оператора
            showNotification(`Оператор: ${name} (${symbol}) - ${description}`, "info");
            
            if (game.flippedCards.length === 2) {
                game.moves++;
                document.getElementById('movesCount').textContent = game.moves;
                
                const [card1, card2] = game.flippedCards;
                
                if (card1.symbol === card2.symbol) {
                    // Найдена пара
                    setTimeout(() => {
                        card1.element.classList.add('matched');
                        card2.element.classList.add('matched');
                        card1.card.matched = true;
                        card2.card.matched = true;
                        
                        game.matches++;
                        game.flippedCards = [];
                        
                        showNotification("🎉 Найдена пара!", "success");
                        
                        // Проверяем завершение игры
                        if (game.matches === 8) {
                            clearInterval(game.timer);
                            const elapsed = Math.floor((Date.now() - game.startTime) / 1000);
                            const score = Math.max(1000 - (game.moves * 10) - (elapsed * 5), 100);
                            
                            setTimeout(() => {
                                const xpEarned = Math.floor(score / 10);
                                addXP(xpEarned);
                                
                                // Обновляем рекорд
                                const gameData = GAMES_DATA.find(g => g.id === 'memory_game');
                                if (score > gameData.highScore) {
                                    gameData.highScore = score;
                                    showNotification(`🎮 Новый рекорд! ${score} очков! +${xpEarned} XP`, "success");
                                } else {
                                    showNotification(`🎮 Игра завершена! ${score} очков! +${xpEarned} XP`, "success");
                                }
                                
                                logActivity(`Завершил игру "Мемори" за ${game.moves} ходов и ${elapsed} секунд`);
                            }, 500);
                        }
                    }, 500);
                } else {
                    // Не совпали
                    setTimeout(() => {
                        card1.element.classList.remove('flipped');
                        card2.element.classList.remove('flipped');
                        card1.element.querySelector('.card-front').style.display = 'flex';
                        card1.element.querySelector('.card-back').style.display = 'none';
                        card2.element.querySelector('.card-front').style.display = 'flex';
                        card2.element.querySelector('.card-back').style.display = 'none';
                        
                        card1.card.flipped = false;
                        card2.card.flipped = false;
                        game.flippedCards = [];
                    }, 1000);
                }
            }
        }

        function resetMemoryGame() {
            startMemoryGame();
        }


function startBugFix() {
    const container = document.getElementById('gamesContainer');
    const buggyCode = `#include <iostream>
using namespace std

int main() {
    cout << "Привет, мир!" << endl
    return 0
}`;
    
    container.innerHTML = `
        <div style="text-align: center; padding: 20px;">
            <h3 style="color: var(--accent-blue); margin-bottom: 20px;">🔧 Исправь баг</h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">Найдите и исправьте ошибки в коде:</p>
            
            <div class="code-example" style="text-align: left; margin-bottom: 20px;">
                <pre style="color: #ff6b6b;">${buggyCode}</pre>
            </div>
            
            <textarea id="bugFixInput" style="width: 100%; height: 200px; background: #1e1e1e; color: #fff; 
                border: 1px solid var(--accent-blue); border-radius: 10px; padding: 15px; 
                font-family: 'Consolas', monospace; margin-bottom: 20px;" 
                placeholder="Исправьте код..."></textarea>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-primary" onclick="checkBugFix()">
                    <i class="fas fa-check"></i> Проверить
                </button>
                <button class="btn btn-outline" onclick="loadGames()">
                    <i class="fas fa-arrow-left"></i> Назад
                </button>
            </div>
        </div>
    `;
}

function checkBugFix() {
    const input = document.getElementById('bugFixInput').value;
    const required = ['#include <iostream>', 'using namespace std;', 'int main()', 'return 0;'];
    
    let found = 0;
    required.forEach(req => {
        if (input.includes(req)) found++;
    });
    
    const hasSemicolons = input.includes(';') && input.split(';').length > 3;
    
    if (found === required.length && hasSemicolons) {
        addXP(150);
        showNotification('🎉 Все ошибки исправлены! +150 XP', 'success');
    } else {
        showNotification('❌ Еще есть ошибки. Проверьте: ; и синтаксис', 'error');
    }
}

function startMemorySimulatorGame() {
    const container = document.getElementById('gamesContainer');
    const memory = Array(16).fill().map((_, i) => ({
        address: `0x${(0x1000 + i * 4).toString(16).toUpperCase()}`,
        value: Math.floor(Math.random() * 100)
    }));
    
    container.innerHTML = `
        <div style="text-align: center;">
            <h3 style="color: var(--accent-blue); margin-bottom: 20px;">🧠 Симулятор памяти</h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">Кликните на ячейки, чтобы увидеть значения:</p>
            
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 30px;">
                ${memory.map((cell, i) => `
                    <div class="memory-game-card" onclick="revealMemoryCell(this, '${cell.address}', ${cell.value})">
                        <div class="card-front">??</div>
                        <div class="card-back" style="display: none;">
                            <div style="font-size: 12px;">${cell.address}</div>
                            <div style="font-size: 16px; font-weight: bold;">${cell.value}</div>
                        </div>
                    </div>
                `).join('')}
            </div>
            
            <button class="btn btn-outline" onclick="loadGames()">
                <i class="fas fa-arrow-left"></i> Назад
            </button>
        </div>
    `;
}

function revealMemoryCell(cell, address, value) {
    cell.classList.add('flipped');
    cell.querySelector('.card-front').style.display = 'none';
    cell.querySelector('.card-back').style.display = 'flex';
    addXP(5);
    showNotification(`Адрес: ${address} = ${value} (+5 XP)`, 'info');
}

function calculateAccuracy(input, target) {
    let matches = 0;
    for (let i = 0; i < Math.min(input.length, target.length); i++) {
        if (input[i] === target[i]) matches++;
    }
    return Math.round((matches / target.length) * 100);
}
            // ================ ПРОЕКТЫ ================
const PROJECTS_DATA = [
    {
        id: "project1",
        title: "Консольный планировщик задач",
        title_by: "Кансольны планавальнік задач",
        description: "Приложение для управления задачами с возможностью добавления, удаления и редактирования",
        description_by: "Праграма для кіравання задачамі з магчымасцю дадання, выдалення і рэдагавання",
        difficulty: "beginner",
        status: "completed",
        technologies: ["C++", "Файлы", "STL"],
        points: 800,
        progress: 100,
        icon: "fa-tasks",
        features: [
            "Добавление задач с приоритетами",
            "Удаление и редактирование задач",
            "Сохранение в файл"
        ]
    },
    {
        id: "project2",
        title: "Калькулятор выражений",
        title_by: "Калькулятар выразаў",
        description: "Вычисление математических выражений с поддержкой скобок",
        description_by: "Вылічэнне матэматычных выразаў з падтрымкай дужак",
        difficulty: "intermediate",
        status: "in-progress",
        technologies: ["C++", "Алгоритмы", "Стек"],
        points: 1200,
        progress: 65,
        icon: "fa-calculator",
        features: [
            "Поддержка основных операций",
            "Обработка скобок",
            "Математические функции"
        ]
    },
    {
        id: "project3",
        title: "Телефонная книга",
        title_by: "Тэлефонная кніга",
        description: "Приложение для хранения контактов с поиском",
        description_by: "Праграма для захоўвання кантактаў з пошукам",
        difficulty: "beginner",
        status: "not-started",
        technologies: ["C++", "Структуры", "Массивы"],
        points: 600,
        progress: 0,
        icon: "fa-address-book",
        features: [
            "Добавление контактов",
            "Поиск по имени",
            "Редактирование контактов"
        ]
    },
    {
        id: "project4",
        title: "Игра 'Угадай число'",
        title_by: "Гульня 'Адгадай лік'",
        description: "Консольная игра с компьютером",
        description_by: "Кансольная гульня з кампутарам",
        difficulty: "beginner",
        status: "not-started",
        technologies: ["C++", "Случайные числа", "Циклы"],
        points: 400,
        progress: 0,
        icon: "fa-dice",
        features: [
            "Генерация случайного числа",
            "Подсказки больше/меньше",
            "Подсчет попыток"
        ]
    }
];
            // ================ ДОСТИЖЕНИЯ ================
            const ACHIEVEMENTS_DATA = [
                {
                    id: "first_steps",
                    name: "Первые шаги",
                    name_by: "Першыя крокі",
                    description: "Завершить первую тему",
                    description_by: "Завяршыць першую тэму",
                    icon: "🚀",
                    xp: 50,
                    unlocked: true,
                    type: "progress"
                },
                {
                    id: "code_writer",
                    name: "Писатель кода",
                    name_by: "Пісьменнік кода",
                    description: "Написать 100 строк кода",
                    description_by: "Напісаць 100 радкоў кода",
                    icon: "✍️",
                    xp: 100,
                    unlocked: true,
                    type: "skill"
                },
                {
                    id: "lab_master",
                    name: "Мастер лабораторных",
                    name_by: "Майстар лабараторных",
                    description: "Завершить 5 лабораторных",
                    description_by: "Завяршыць 5 лабараторных",
                    icon: "🔬",
                    xp: 150,
                    unlocked: false,
                    type: "progress"
                },
                {
                    id: "theory_expert",
                    name: "Эксперт теории",
                    name_by: "Эксперт тэорыі",
                    description: "Изучить 10 тем",
                    description_by: "Вывучыць 10 тэм",
                    icon: "📚",
                    xp: 200,
                    unlocked: false,
                    type: "progress"
                },
                {
                    id: "test_champion",
                    name: "Чемпион тестов",
                    name_by: "Чэмпіён тэстаў",
                    description: "Пройди тест на 100%",
                    description_by: "Прайсці тэст на 100%",
                    icon: "🏆",
                    xp: 250,
                    unlocked: false,
                    type: "skill"
                }
            ];

            // ================ ИГРЫ ================
const GAMES_DATA = [
    {
        id: "memory_game",
        title: "Мемори: Угадай оператор",
        title_by: "Меморы: Адгадай аператар",
        description: "Тренируйте память и изучайте операторы C++",
        description_by: "Трэніруйце памяць і вывучайце аператары C++",
        icon: "🎮",
        type: "memory",
        difficulty: "beginner",
        unlocked: true,
        highScore: 0
    },
    {
        id: "code_racer",
        title: "Гонки кода",
        title_by: "Гонкі кода",
        description: "Соревнуйтесь в скорости набора кода",
        description_by: "Спаборнічайце ў хуткасці набору кода",
        icon: "🏎️",
        type: "typing",
        difficulty: "intermediate",
        unlocked: true,
        highScore: 0
    },
    {
        id: "bug_fix",
        title: "Исправь баг",
        title_by: "Выпраў баг",
        description: "Найдите и исправьте ошибки в коде",
        description_by: "Знайдзіце і выпраўце памылкі ў кодзе",
        icon: "🔧",
        type: "puzzle",
        difficulty: "advanced",
        unlocked: true,
        highScore: 0
    },
    {
        id: "memory_simulator",
        title: "Симулятор памяти",
        title_by: "Сімулятар памяці",
        description: "Управляйте памятью в программе",
        description_by: "Кіруйце памяццю ў праграме",
        icon: "🧠",
        type: "simulation",
        difficulty: "advanced",
        unlocked: true,
        highScore: 0
    }
];

// ================ ПАГИНАЦИЯ ================
let currentTheoryPage = 1;
let currentLabPage = 1;
const ITEMS_PER_PAGE = 4;

function loadTheoryGrid() {
    const grid = document.getElementById('theoryGrid');
    if (!grid) return;
    
    let allTheoryTopics = [];
    COURSE_STRUCTURE.modules.forEach(module => {
        module.topics.forEach(topic => {
            if (topic.type === 'theory') {
                allTheoryTopics.push({
                    ...topic,
                    moduleName: currentLanguage === 'by' && module.name_by ? module.name_by : module.name,
                    moduleId: module.id
                });
            }
        });
    });
    
    const start = (currentTheoryPage - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const paginatedTopics = allTheoryTopics.slice(start, end);
    const totalPages = Math.ceil(allTheoryTopics.length / ITEMS_PER_PAGE);
    
    grid.innerHTML = '';
    
    paginatedTopics.forEach(topic => {
        const isCompleted = appState.user.completedTopics.includes(topic.id);
        
        const card = document.createElement('div');
        card.className = `lab-card ${isCompleted ? 'completed' : ''}`;
        card.onclick = () => openTheoryModal(topic.id, topic.moduleId);
        
        card.innerHTML = `
            <div class="lab-card-header">
                <div class="lab-title">${topic.title}</div>
                <div class="lab-difficulty difficulty-${topic.difficulty}">
                    ${topic.difficulty === 'beginner' ? 'Начинающий' : 
                      topic.difficulty === 'intermediate' ? 'Средний' : 'Продвинутый'}
                </div>
            </div>
            <div class="lab-description">
                ${topic.content?.overview || 'Теоретическая тема'}
            </div>
            <div class="lab-meta">
                <div class="lab-stats">
                    <div class="lab-stat">
                        <i class="fas fa-clock"></i>
                        <span>${topic.duration || 15} мин</span>
                    </div>
                    <div class="lab-stat">
                        <i class="fas fa-star"></i>
                        <span>${topic.points || 100} баллов</span>
                    </div>
                </div>
                <div class="lab-status ${isCompleted ? 'completed' : ''}">
                    ${isCompleted ? '✅ Изучено' : '📚 Изучить'}
                </div>
            </div>
        `;
        
        grid.appendChild(card);
    });
    
    renderPagination('theory', totalPages, currentTheoryPage);
}

function loadLabsGrid() {
    const grid = document.getElementById('labsGrid');
    if (!grid) return;
    
    const start = (currentLabPage - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const paginatedLabs = LABS_DATA.slice(start, end);
    const totalPages = Math.ceil(LABS_DATA.length / ITEMS_PER_PAGE);
    
    grid.innerHTML = '';
    
    paginatedLabs.forEach(lab => {
        const isCompleted = lab.status === 'completed';
        
        const card = document.createElement('div');
        card.className = `lab-card ${isCompleted ? 'completed' : ''}`;
        card.onclick = () => openLabModal(lab.id);
        
        card.innerHTML = `
            <div class="lab-card-header">
                <div class="lab-title">${lab.title}</div>
                <div class="lab-difficulty difficulty-${lab.difficulty}">
                    ${lab.difficulty === 'beginner' ? 'Начинающий' : 
                      lab.difficulty === 'intermediate' ? 'Средний' : 
                      lab.difficulty === 'advanced' ? 'Продвинутый' : 'Эксперт'}
                </div>
            </div>
            <div class="lab-description">
                ${lab.description}
            </div>
            <div class="lab-meta">
                <div class="lab-stats">
                    <div class="lab-stat">
                        <i class="fas fa-clock"></i>
                        <span>${lab.duration} мин</span>
                    </div>
                    <div class="lab-stat">
                        <i class="fas fa-star"></i>
                        <span>${lab.points} баллов</span>
                    </div>
                </div>
                <div class="lab-status ${isCompleted ? 'completed' : ''}">
                    ${isCompleted ? '✅ Завершена' : 
                      lab.status === 'in-progress' ? '🔄 В процессе' : '📝 Не начата'}
                </div>
            </div>
        `;
        
        grid.appendChild(card);
    });
    
    renderPagination('labs', totalPages, currentLabPage);
}

function renderPagination(type, totalPages, currentPage) {
    const container = document.getElementById(`${type}Pagination`);
    if (!container) return;
    
    let html = '';
    
    html += `<button class="pagination-btn ${currentPage === 1 ? 'disabled' : ''}" 
                onclick="changePage('${type}', ${currentPage - 1})">
                <i class="fas fa-chevron-left"></i>
            </button>`;
    
    for (let i = 1; i <= totalPages; i++) {
        if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
            html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" 
                        onclick="changePage('${type}', ${i})">${i}</button>`;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
            html += `<button class="pagination-btn disabled">...</button>`;
        }
    }
    
    html += `<button class="pagination-btn ${currentPage === totalPages ? 'disabled' : ''}" 
                onclick="changePage('${type}', ${currentPage + 1})">
                <i class="fas fa-chevron-right"></i>
            </button>`;
    
    container.innerHTML = html;
}

function changePage(type, page) {
    if (type === 'theory') {
        currentTheoryPage = page;
        loadTheoryGrid();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    } else if (type === 'labs') {
        currentLabPage = page;
        loadLabsGrid();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}


// ================ ТЕРМИНАЛ ДЛЯ ЛАБ ================
function createLabTerminal(labId) {
    return `
        <div class="lab-terminal" id="labTerminal">
            <div class="terminal-header">
                <span><i class="fas fa-terminal"></i> Терминал проверки</span>
                <span class="badge badge-success" id="terminalStatus">Готов к проверке</span>
            </div>
            <div class="terminal-output" id="terminalOutput">
                <div class="terminal-line">Добро пожаловать в терминал проверки лабораторных работ</div>
                <div class="terminal-line">Нажмите "Проверить" для тестирования вашего кода</div>
            </div>
            <div class="terminal-actions">
                <button class="terminal-check-btn" onclick="checkLabCode('${labId}')">
                    <i class="fas fa-check-circle"></i> Проверить задание
                </button>
                <button class="btn btn-outline" onclick="clearTerminal()">
                    <i class="fas fa-broom"></i> Очистить
                </button>
            </div>
        </div>
    `;
}

function checkLabCode(labId) {
    const code = codeEditor.getValue();
    const output = document.getElementById('terminalOutput');
    const status = document.getElementById('terminalStatus');
    
    if (!output || !status) {
        console.error('Терминал не найден');
        return;
    }
    
    output.innerHTML = '';
    addTerminalLine('Запуск проверки...', 'input');
    
    setTimeout(() => {
        let passed = 0;
        let total = 5;
        let feedback = [];
        
        // Проверка 1: Наличие main()
        if (code.includes('int main()')) {
            addTerminalLine('✓ Присутствует функция main()', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найдена функция main()', 'error');
            feedback.push('Нужно определить функцию main()');
        }
        
        // Проверка 2: Наличие iostream
        if (code.includes('#include <iostream>')) {
            addTerminalLine('✓ Подключена библиотека iostream', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найдена библиотека iostream', 'error');
            feedback.push('Подключите библиотеку iostream (#include <iostream>)');
        }
        
        // Проверка 3: Наличие return 0;
        if (code.includes('return 0;')) {
            addTerminalLine('✓ Есть возврат значения', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Нет return 0;', 'error');
            feedback.push('Добавьте return 0; в конце main()');
        }
        
        // Проверка 4: Наличие using namespace std; (не обязательно, но желательно)
        if (code.includes('using namespace std;')) {
            addTerminalLine('✓ Используется пространство имен std', 'success');
            passed++;
        } else {
            addTerminalLine('⚠️ Не найдено using namespace std; (можно использовать std::cout)', 'info');
            total--; // Уменьшаем общее количество обязательных проверок
        }
        
        // Проверка 5: Наличие std::cout или cout (простой вывод)
        if (code.includes('cout <<') || code.includes('std::cout <<')) {
            addTerminalLine('✓ Есть оператор вывода', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найден вывод на экран (cout)', 'error');
            feedback.push('Добавьте вывод результата с помощью cout');
        }
        
        // Корректируем total, если убрали using namespace std из подсчета
        const finalTotal = total; 
        
        const score = Math.round((passed / finalTotal) * 100);
        
        addTerminalLine('---', 'info');
        
        if (score >= 80) {
            status.innerHTML = '✅ Проверка пройдена!';
            status.className = 'badge badge-success';
            addTerminalLine(`🎉 Результат: ${score}% - Отлично!`, 'success');
            
        } else {
            status.innerHTML = '❌ Требуются исправления';
            status.className = 'badge badge-danger';
            addTerminalLine(`📝 Результат: ${score}% - Нужно доработать`, 'error');
            if (feedback.length > 0) {
                addTerminalLine('Советы:', 'info');
                feedback.forEach(advice => addTerminalLine(`  - ${advice}`, 'info'));
            }
        }
    }, 500);
}
function addTerminalLine(text, type = '') {
    const output = document.getElementById('terminalOutput');
    const line = document.createElement('div');
    line.className = `terminal-line ${type}`;
    line.innerHTML = text;
    output.appendChild(line);
    output.scrollTop = output.scrollHeight;
}

function clearTerminal() {
    const output = document.getElementById('terminalOutput');
    output.innerHTML = '';
    addTerminalLine('Терминал очищен', 'info');
}


            // ================ СОСТОЯНИЕ ПРИЛОЖЕНИЯ ================
            let appState = {
                version: "4.0.0",
                user: {
                    id: 1,
                    name: "Дмитрий",
                    name_by: "Дзмітрый",
                    nickname: "dmitry.makarchikov",
                    email: "dmitry.makarchikov.it@gmail.com",
                    level: 5,
                    xp: 245,
                    maxXp: 500,
                    rank: "46 ТП",
                    rank_by: "46 ТП",
                    streak: 7,
                    completedTopics: ["intro", "variables", "lab1"],
                    completedLabs: 1,
                    completedTests: 0,
                    codeLines: 1247,
                    achievements: ["first_steps", "code_writer"],
                    activity: [],
                    dailyGoals: {
                        lastCompleted: null,
                        streak: 0,
                        today: {
                            topics: 0,
                            labs: 0,
                            code: 0,
                            tests: 0
                        }
                    },
                    settings: {
                        theme: "dark",
                        language: "ru",
                        animations: true,
                        compactMode: false,
                        autoTranslate: false,
                        editor: {
                            fontSize: 14,
                            autocomplete: true,
                            autosave: true,
                            syntaxHighlighting: true,
                            tabSize: 4
                        },
                        notifications: {
                            system: true,
                            achievements: true,
                            progress: true
                        },
                        accessibility: {
                            highContrast: false,
                            largeFont: false,
                            simpleNavigation: false
                        },
                        autoSaveData: true,
                        backups: true
                    },
                    avatar: {
                        current: null,
                        history: [],
                        customizations: []
                    },
                    certificates: [],
                    games: {
                        highScores: {},
                        unlocked: ["memory_game"]
                    }
                },
                current: {
                    section: "home",
                    module: "basics",
                    topic: "intro",
                    test: null,
                    lab: null,
                    file: "main.cpp",
                    editor: {
                        files: {
                            "main.cpp": `#include <iostream>
#include <vector>
#include <string>
#include <algorithm>

using namespace std;

// ====== ДЕМОНСТРАЦИОННАЯ ПРОГРАММА ======
// Основы алгоритмизации - Практическая площадка

// Структура для хранения данных студента
struct Student {
    string name;
    int age;
    double grade;
    
    // Конструктор
    Student(string n, int a, double g) : name(n), age(a), grade(g) {}
    
    // Метод для вывода информации
    void display() const {
        cout << "Имя: " << name << endl;
        cout << "Возраст: " << age << endl;
        cout << "Оценка: " << grade << endl;
        cout << "-------------------" << endl;
    }
};

// Функция для вычисления среднего значения
double calculateAverage(const vector<double>& grades) {
    if (grades.empty()) return 0.0;
    
    double sum = 0;
    for (double grade : grades) {
        sum += grade;
    }
    return sum / grades.size();
}

int main() {
    cout << "=== ДЕМОНСТРАЦИЯ ВОЗМОЖНОСТЕЙ C++ ===" << endl;
    cout << "Основы алгоритмизации и программирования" << endl << endl;
    
    // Демонстрация работы с переменными
    cout << "1. РАБОТА С ПЕРЕМЕННЫМИ:" << endl;
    int number = 42;
    double pi = 3.1415926535;
    string message = "Hello, C++ Developer!";
    bool isActive = true;
    
    cout << "Целое число: " << number << endl;
    cout << "Число Пи: " << pi << endl;
    cout << "Сообщение: " << message << endl;
    cout << "Статус: " << (isActive ? "Активен" : "Неактивен") << endl << endl;
    
    // Демонстрация работы с массивами
    cout << "2. РАБОТА С МАССИВАМИ:" << endl;
    const int ARRAY_SIZE = 5;
    int numbers[ARRAY_SIZE] = {10, 20, 30, 40, 50};
    
    cout << "Элементы массива: ";
    for (int i = 0; i < ARRAY_SIZE; i++) {
        cout << numbers[i] << " ";
    }
    cout << endl << endl;
    
    // Демонстрация работы с векторами
    cout << "3. РАБОТА С ВЕКТОРАМИ (STL):" << endl;
    vector<double> grades = {4.5, 3.8, 4.2, 5.0, 4.7};
    
    cout << "Оценки студентов: ";
    for (double grade : grades) {
        cout << grade << " ";
    }
    cout << endl;
    
    cout << "Средняя оценка: " << calculateAverage(grades) << endl << endl;
    
    // Демонстрация работы с объектами
    cout << "4. ОБЪЕКТНО-ОРИЕНТИРОВАННОЕ ПРОГРАММИРОВАНИЕ:" << endl;
    
    vector<Student> students;
    students.push_back(Student("Дмитрий", 20, 4.5));
    students.push_back(Student("Мария", 21, 4.8));
    students.push_back(Student("Иван", 22, 4.2));
    
    cout << "Список студентов:" << endl;
    for (const Student& student : students) {
        student.display();
    }
    
    cout << "=== ПРОГРАММА ЗАВЕРШЕНА УСПЕШНО ===" << endl;
    cout << "Всего строк кода: " << __LINE__ << endl;
    
    return 0;
}`,
                            "functions.cpp": `#include <iostream>
#include <cmath>

using namespace std;

// ====== БИБЛИОТЕКА ПОЛЕЗНЫХ ФУНКЦИЙ ======

// Функция для вычисления факториала
unsigned long long factorial(int n) {
    if (n < 0) return 0;
    if (n <= 1) return 1;
    
    unsigned long long result = 1;
    for (int i = 2; i <= n; i++) {
        result *= i;
    }
    return result;
}

// Функция для проверки простого числа
bool isPrime(int number) {
    if (number <= 1) return false;
    if (number <= 3) return true;
    if (number % 2 == 0 || number % 3 == 0) return false;
    
    for (int i = 5; i * i <= number; i += 6) {
        if (number % i == 0 || number % (i + 2) == 0) {
            return false;
        }
    }
    return true;
}

// Демонстрационная функция
void demonstrateFunctions() {
    cout << "=== ДЕМОНСТРАЦИЯ РАБОТЫ ФУНКЦИЙ ===" << endl;
    
    cout << "Факториал 5: " << factorial(5) << endl;
    cout << "Число 17 простое? " << (isPrime(17) ? "Да" : "Нет") << endl;
}

int main() {
    demonstrateFunctions();
    return 0;
}`
                        },
                        folders: {
                            "headers": ["utils.h"]
                        }
                    }
                },
                memory: {
                    cells: [],
                    step: 0,
                    variables: []
                },
                progress: {
                    basics: { completed: 650, total: 1000, percentage: 65 },
                    oop: { completed: 300, total: 1500, percentage: 20 },
                    algorithms: { completed: 0, total: 2000, percentage: 0 }
                },
                projects: {
                    active: "project2",
                    templates: [
                        {
                            id: "console_app",
                            name: "Консольное приложение",
                            files: {
                                "main.cpp": `#include <iostream>
#include <string>

using namespace std;

int main() {
    cout << "Добро пожаловать в консольное приложение!" << endl;
    cout << "Это шаблон для создания ваших проектов." << endl;
    return 0;
}`
                            }
                        }
                    ]
                },
                backups: [],
                searchIndex: []
            };

            // ================ ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ================
            let codeEditor;
            let currentTest = null;
            let testAnswers = {};
            let testTimer = null;
            let testTimeLeft = 0;
            let avatarEditor = null;
            let avatarCanvas = null;
            let autoSaveInterval = null;
            let backupInterval = null;
            let searchResults = [];
            let currentLanguage = "ru";
            let progressChart = null;
            let currentLab = null;
            let labTestAnswers = {};

            // ================ ИНИЦИАЛИЗАЦИЯ ================
        document.addEventListener('DOMContentLoaded', function() {
            initLoader();
            initApp();
            
            switchSection('home'); 
            setTimeout(() => {
                loadProgressSummary();
                loadCurrentActivity();
                updateLastActivity('lecture');
                updateLastActivity('lab');
                updateLastActivity('test');
                
                forceProgressUpdate();
            }, 300);
            
            setTimeout(() => {
                showNotification("🎉 Добро пожаловать в Основы алгоритмизации и программирования!", "success");
                logActivity("Пользователь вошел в систему");
                checkDailyGoals();
            }, 1000);
        });

            // ================ ЛОАДЕР ================
            function initLoader() {
                const loader = document.getElementById('loader');
                const progressBar = document.getElementById('loaderProgress');
                const statusText = document.getElementById('loaderStatus');
                
                const steps = [
                    "Загрузка ядра системы...",
                    "Инициализация редактора кода...",
                    "Загрузка учебных материалов...",
                    "Подготовка симулятора памяти...",
                    "Настройка образовательной платформы..."
                ];
                
                let currentStep = 0;
                let progress = 0;
                
                const interval = setInterval(() => {
                    progress += 2 + Math.random() * 3;
                    
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        
                        setTimeout(() => {
                            loader.style.opacity = '0';
                            setTimeout(() => {
                                loader.style.display = 'none';
                            }, 500);
                        }, 500);
                    }
                    
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= (currentStep + 1) * (100 / steps.length)) {
                        if (currentStep < steps.length) {
                            statusText.textContent = steps[currentStep];
                            currentStep++;
                        }
                    }
                }, 50);
            }

        // ================ ИНИЦИАЛИЗАЦИЯ ПРИЛОЖЕНИЯ ================
function initApp() {
    loadUserState();
    initProgressMap();
    initNavigation();
    initCodeEditor();
    initMemorySimulator();
    initModules();
    initLabs();
    initGames();
    initProjects();
    initAchievements();
    initActivityCalendar();
    initSearchIndex();
    initAvatar();
    updateUI();
    initHotkeys();
    initAutoSave();
    loadTheoryGrid();
    loadLabsGrid();
    
    applyTheme(appState.user.settings.theme);
    applyLanguage(appState.user.settings.language);
    
    if (appState.user.settings.compactMode) {
        document.body.classList.add('compact-mode');
    }
    
    if (!appState.user.settings.animations) {
        disableAnimations();
    }
    
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    document.getElementById('homeSection').classList.add('active');
    
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    document.querySelector('.nav-item[data-section="home"]').classList.add('active');
    
    loadProgressSummary();
    loadCurrentActivity();
    updateLastActivity('lecture');
    updateLastActivity('lab');
    updateLastActivity('test');
    initAchievements();
    initActivityCalendar();
    
    setTimeout(() => {
        forceProgressUpdate();
    }, 500);
}
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal-overlay')) {
        closeModal();
    }
});

// скролл для модальных окон
document.querySelectorAll('.modal-body').forEach(modal => {
    modal.addEventListener('scroll', function(e) {
        e.stopPropagation();
    });
});

    // ================ ПРИНУДИТЕЛЬНОЕ ОБНОВЛЕНИЕ ПРОГРЕССА ================
function forceProgressUpdate() {
    // Собираем все теории
    const allTheories = [];
    COURSE_STRUCTURE.modules.forEach(module => {
        module.topics.forEach(topic => {
            if (topic.type === 'theory') {
                allTheories.push({
                    ...topic,
                    moduleName: module.name,
                    moduleId: module.id
                });
            }
        });
    });

    const completedTheories = allTheories.filter(topic => 
        appState.user.completedTopics.includes(topic.id)
    );
    
    const completedLabs = LABS_DATA.filter(lab => lab.status === 'completed').length;
    const totalLabs = LABS_DATA.length;
    const completedTests = appState.user.completedTests || 0;
    const totalTests = Object.keys(TESTS_DATA).length;
    
    const theoryPercentage = allTheories.length > 0 ? 
        Math.round((completedTheories.length / allTheories.length) * 100) : 0;
    const labsPercentage = totalLabs > 0 ? Math.round((completedLabs / totalLabs) * 100) : 0;
    const testsPercentage = totalTests > 0 ? Math.round((completedTests / totalTests) * 100) : 0;
    
    // Обновляем прогресс-бары
    const elements = {
        theoryProgressFill: document.getElementById('theoryProgressFill'),
        labsProgressFill: document.getElementById('labsProgressFill'),
        testsProgressFill: document.getElementById('testsProgressFill'),
        theoryPercentage: document.getElementById('theoryPercentage'),
        labsPercentage: document.getElementById('labsPercentage'),
        testsPercentage: document.getElementById('testsPercentage'),
        theoryPercentageHeader: document.getElementById('theoryPercentageHeader'),
        labsPercentageHeader: document.getElementById('labsPercentageHeader'),
        testsPercentageHeader: document.getElementById('testsPercentageHeader'),
        completedTheoriesCount: document.getElementById('completedTheoriesCount'),
        totalTheoriesCount: document.getElementById('totalTheoriesCount'),
        completedLabsCount: document.getElementById('completedLabsCount'),
        totalLabsCount: document.getElementById('totalLabsCount'),
        completedTestsCount: document.getElementById('completedTestsCount'),
        totalTestsCount: document.getElementById('totalTestsCount')
    };
    
    if (elements.theoryProgressFill) elements.theoryProgressFill.style.width = `${theoryPercentage}%`;
    if (elements.labsProgressFill) elements.labsProgressFill.style.width = `${labsPercentage}%`;
    if (elements.testsProgressFill) elements.testsProgressFill.style.width = `${testsPercentage}%`;
    
    if (elements.theoryPercentage) elements.theoryPercentage.textContent = `${theoryPercentage}%`;
    if (elements.labsPercentage) elements.labsPercentage.textContent = `${labsPercentage}%`;
    if (elements.testsPercentage) elements.testsPercentage.textContent = `${testsPercentage}%`;
    
    if (elements.theoryPercentageHeader) elements.theoryPercentageHeader.textContent = `${theoryPercentage}%`;
    if (elements.labsPercentageHeader) elements.labsPercentageHeader.textContent = `${labsPercentage}%`;
    if (elements.testsPercentageHeader) elements.testsPercentageHeader.textContent = `${testsPercentage}%`;
    
    if (elements.completedTheoriesCount) elements.completedTheoriesCount.textContent = completedTheories.length;
    if (elements.totalTheoriesCount) elements.totalTheoriesCount.textContent = allTheories.length;
    if (elements.completedLabsCount) elements.completedLabsCount.textContent = completedLabs;
    if (elements.totalLabsCount) elements.totalLabsCount.textContent = totalLabs;
    if (elements.completedTestsCount) elements.completedTestsCount.textContent = completedTests;
    if (elements.totalTestsCount) elements.totalTestsCount.textContent = totalTests;
    
    // Обновляем списки
    updateProgressList('theory', allTheories.slice(0, 5));
    updateProgressList('labs', LABS_DATA.filter(l => l.status !== 'locked').slice(0, 5));
    
    // Обновляем последнюю активность на главной
    updateLastActivity('lecture');
    updateLastActivity('lab');
    updateLastActivity('test');
    
    console.log('Прогресс обновлен:', {
        теории: `${completedTheories.length}/${allTheories.length} (${theoryPercentage}%)`,
        лабы: `${completedLabs}/${totalLabs} (${labsPercentage}%)`,
        тесты: `${completedTests}/${totalTests} (${testsPercentage}%)`
    });
}

            // ================ ОБНОВЛЕННАЯ ГЛАВНАЯ СТРАНИЦА ================
        function initHomeContent() {
    loadProgressSummary();
    loadCurrentActivity();
    updateLastActivity('lecture');
    updateLastActivity('lab');
    updateLastActivity('test');
}

function loadProgressSummary() {
    // Подсчет прогресса по теориям
    let allTheories = [];
    COURSE_STRUCTURE.modules.forEach(module => {
        module.topics.forEach(topic => {
            if (topic.type === 'theory') {
                allTheories.push({
                    ...topic,
                    moduleName: module.name,
                    moduleId: module.id
                });
            }
        });
    });

    const completedTheories = allTheories.filter(topic => 
        appState.user.completedTopics.includes(topic.id)
    );
    
    const theoryPercentage = allTheories.length > 0 ? 
        Math.round((completedTheories.length / allTheories.length) * 100) : 0;
    
    // Обновляем блок теории
    updateProgressCategory('theory', completedTheories.length, allTheories.length, theoryPercentage, allTheories);
    
    // Подсчет прогресса по лабораторным
    const completedLabs = LABS_DATA.filter(lab => lab.status === 'completed').length;
    const totalLabs = LABS_DATA.length;
    const labsPercentage = Math.round((completedLabs / totalLabs) * 100);
    
    // Обновляем блок лабораторных
    updateProgressCategory('labs', completedLabs, totalLabs, labsPercentage, LABS_DATA);
    
    // Подсчет прогресса по тестам
    const completedTests = appState.user.completedTests || 0;
    const totalTests = 3; // Всего 3 теста
    const testsPercentage = Math.round((completedTests / totalTests) * 100) || 0;
    
    // Обновляем блок тестов
    updateProgressCategory('tests', completedTests, totalTests, testsPercentage, []);
    forceProgressUpdate();
}

function updateProgressCategory(type, completed, total, percentage, items) {
    const categoryId = `${type}Progress`;
    const categoryElement = document.getElementById(categoryId);
    
    if (!categoryElement) return;
    
    // Обновляем заголовок
    const header = categoryElement.querySelector('.category-header-left');
    if (header) {
        const iconClass = type === 'theory' ? 'fa-book' : 
                         type === 'labs' ? 'fa-flask' : 'fa-graduation-cap';
        const title = type === 'theory' ? 'Теория' : 
                     type === 'labs' ? 'Лабораторные' : 'Тесты';
        
        header.innerHTML = `
            <div class="category-icon">
                <i class="fas ${iconClass}"></i>
            </div>
            <div>
                <div class="category-title">${currentLanguage === 'by' ? 
                    (type === 'theory' ? 'Тэорыя' : 
                     type === 'labs' ? 'Лабараторныя' : 'Тэсты') : 
                    title}</div>
                <div style="font-size: 12px; color: var(--accent-purple);">
                    ${type === 'theory' ? (currentLanguage === 'by' ? 'Тэмы' : 'Темы') : 
                     type === 'labs' ? (currentLanguage === 'by' ? 'Лабы' : 'Лабы') : 
                     (currentLanguage === 'by' ? 'Тэсты' : 'Тесты')}
                </div>
            </div>
        `;
    }
    
    // Обновляем статистику
    const stats = categoryElement.querySelector('.category-stats');
    if (stats) {
        stats.innerHTML = `
            <div class="category-percentage">${percentage}%</div>
            <div class="category-chevron">
                <i class="fas fa-chevron-down"></i>
            </div>
        `;
    }
    
    // Обновляем прогресс-бар
    const progressFill = categoryElement.querySelector('.progress-fill');
    if (progressFill) {
        progressFill.style.width = `${percentage}%`;
    }
    
    // Обновляем текст прогресса
    const progressInfo = categoryElement.querySelector('.progress-info');
    if (progressInfo) {
        const label = type === 'theory' ? (currentLanguage === 'by' ? 'Вывучана' : 'Изучено') :
                     type === 'labs' ? (currentLanguage === 'by' ? 'Выканана' : 'Выполнено') :
                     (currentLanguage === 'by' ? 'Пройдзена' : 'Пройдено');
        
        progressInfo.innerHTML = `
            <span>${label}: <strong>${completed}</strong> из <strong>${total}</strong></span>
            <span>${percentage}%</span>
        `;
    }
    
    // Обновляем список элементов
    const listId = type === 'theory' ? 'theoryTopicsList' : 
                  type === 'labs' ? 'labsList' : 'testsList';
    const listElement = document.getElementById(listId);
    
    if (listElement && items.length > 0) {
        listElement.innerHTML = '';
        
        items.slice(0, 5).forEach(item => {
            const isCompleted = type === 'theory' ? 
                appState.user.completedTopics.includes(item.id) :
                type === 'labs' ? item.status === 'completed' : false;
            
            const itemElement = document.createElement('div');
            itemElement.className = `${type}-item-small ${isCompleted ? 'completed' : ''}`;
            
            const itemTitle = currentLanguage === 'by' && item.title_by ? item.title_by : item.title;
            
            itemElement.innerHTML = `
                <div class="${type}-check-small">
                    ${isCompleted ? '<i class="fas fa-check"></i>' : ''}
                </div>
                <div class="${type}-text-small">
                    <div class="${type}-title-small">${itemTitle}</div>
                    <div class="${type}-meta-small">
                        ${type === 'theory' ? `
                            <span>${item.duration || 15} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                            <span>•</span>
                            <span>${item.moduleName}</span>
                        ` : type === 'labs' ? `
                            <span>${item.duration || 30} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                            <span>•</span>
                            <span class="badge ${item.difficulty}">
                                ${item.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') :
                                 item.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') :
                                 (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый')}
                            </span>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Добавляем обработчик клика
            if (type === 'theory') {
                itemElement.onclick = () => openTheoryModal(item.id, item.moduleId);
            } else if (type === 'labs') {
                itemElement.onclick = () => openLabModal(item.id);
            }
            
            listElement.appendChild(itemElement);
        });
        
        // Добавляем сообщение, если нет элементов
        if (items.length === 0) {
            listElement.innerHTML = `
                <div style="text-align: center; padding: 20px; color: var(--accent-purple);">
                    <i class="fas fa-info-circle"></i><br>
                    ${currentLanguage === 'by' ? 'Няма даступных элементаў' : 'Нет доступных элементов'}
                </div>
            `;
        }
    }
}
                
                // Собираем все темы из всех модулей
                let allTopics = [];
                COURSE_STRUCTURE.modules.forEach(module => {
                    module.topics.forEach(topic => {
                        const translatedTitle = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
                        const translatedTags = currentLanguage === 'by' && topic.tags_by ? topic.tags_by : topic.tags;
                        
                        allTopics.push({
                            ...topic,
                            moduleName: currentLanguage === 'by' && module.name_by ? module.name_by : module.name,
                            title: translatedTitle,
                            tags: translatedTags
                        });
                    });
                });
                
                // Создаем карточки тем
                allTopics.forEach(topic => {
                    const card = document.createElement('div');
                    card.className = `topic-card ${topic.completed ? 'completed' : ''}`;
                    card.onclick = () => {
                        if (topic.type === 'theory') {
                            loadTopic(topic.moduleId || 'basics', topic.id);
                            switchSection('theory');
                        } else if (topic.type === 'lab') {
                            openLabModal(topic.id);
                        }
                    };
                    
                    card.innerHTML = `
                        <div class="topic-card-header">
                            <div class="topic-title">${topic.title}</div>
                            <div class="topic-difficulty difficulty-${topic.difficulty}">
                                ${topic.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') : 
                                  topic.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') : 
                                  (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый')}
                            </div>
                        </div>
                        <div class="topic-description">
                            ${topic.type === 'theory' ? (currentLanguage === 'by' ? 'Тэарэтычная тэма' : 'Теоретическая тема') : 
                              topic.type === 'lab' ? (currentLanguage === 'by' ? 'Лабараторная работа' : 'Лабораторная работа') : 
                              (currentLanguage === 'by' ? 'Тэст' : 'Тест')} • ${topic.moduleName}
                        </div>
                        <div style="display: flex; gap: 6px; margin: 10px 0; flex-wrap: wrap;">
                            ${topic.tags.map(tag => `
                                <span style="padding: 3px 8px; background: rgba(100, 255, 218, 0.1); 
                                      border-radius: 10px; font-size: 10px; color: var(--accent-blue);">
                                    ${tag}
                                </span>
                            `).join('')}
                        </div>
                        <div class="topic-meta">
                            <div class="topic-stats">
                                <div class="topic-stat">
                                    <i class="fas fa-clock"></i>
                                    <span>${topic.duration} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                                </div>
                                <div class="topic-stat">
                                    <i class="fas fa-star"></i>
                                    <span>${topic.points} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}</span>
                                </div>
                            </div>
                            <div class="topic-status ${topic.completed ? 'completed' : ''}">
                                ${topic.completed ? '✅ ' + (currentLanguage === 'by' ? 'Завершана' : 'Завершено') : 
                                 '🔄 ' + (currentLanguage === 'by' ? 'Даступна' : 'Доступно')}
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
            

            function refreshHomeContent() {
                initHomeContent();
                showNotification(currentLanguage === 'by' ? "Змест абноўлены" : "Контент обновлен", "success");
            }

            // ================ ПАНЕЛЬ ПРОГРЕССА ================
            function initProgressPath() {
                const path = document.getElementById('progressPath');
                path.innerHTML = '';
                
                const pathNodes = [
                    { id: "basics", title: "Основы C++", title_by: "Асновы C++", icon: "🏁", completed: true, current: true },
                    { id: "control", title: "Управление потоком", title_by: "Кіраванне патокам", icon: "🔄", completed: false, current: false },
                    { id: "functions", title: "Функции", title_by: "Функцыі", icon: "⚙️", completed: false, current: false },
                    { id: "arrays", title: "Массивы", title_by: "Масівы", icon: "📊", completed: false, current: false },
                    { id: "pointers", title: "Указатели", title_by: "Паказальнікі", icon: "📍", completed: false, current: false },
                    { id: "oop", title: "ООП", title_by: "ААП", icon: "🏗️", completed: false, current: false }
                ];
                
                pathNodes.forEach(node => {
                    const nodeEl = document.createElement('div');
                    nodeEl.className = `path-node ${node.completed ? 'completed' : ''} ${node.current ? 'active' : ''}`;
                    nodeEl.onclick = () => {
                        if (node.completed || node.current) {
                            goToModule(node.id);
                        }
                    };
                    
                    const title = currentLanguage === 'by' && node.title_by ? node.title_by : node.title;
                    
                    nodeEl.innerHTML = `
                        <div class="path-node-icon">
                            ${node.icon}
                        </div>
                        <div class="path-node-info">
                            <div class="path-node-title">${title}</div>
                            <div class="path-node-desc">
                                ${node.completed ? (currentLanguage === 'by' ? 'Завершана' : 'Завершено') : 
                                  node.current ? (currentLanguage === 'by' ? 'Бягучы модуль' : 'Текущий модуль') : 
                                  (currentLanguage === 'by' ? 'Заблакавана' : 'Заблокировано')}
                            </div>
                        </div>
                    `;
                    
                    path.appendChild(nodeEl);
                });
            }

            // ================ НАВИГАЦИЯ И ХЛЕБНЫЕ КРОШКИ ================
            function initNavigation() {
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const section = this.getAttribute('data-section');
                        switchSection(section);
                    });
                });
                
                updateBreadcrumbs();
            }

       function switchSection(sectionId) {
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('data-section') === sectionId) {
            item.classList.add('active');
        }
    });
    
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    
    document.getElementById(`${sectionId}Section`).classList.add('active');
    appState.current.section = sectionId;
    
    updateBreadcrumbs();
    
    switch(sectionId) {
        case 'home':
            loadProgressSummary();
            loadCurrentActivity();
            updateLastActivity('lecture');
            updateLastActivity('lab');
            updateLastActivity('test');
            initAchievements();
            initActivityCalendar();
            break;
        case 'theory':
            currentTheoryPage = 1;
            loadTheoryGrid();
            break;
        case 'labs':
            currentLabPage = 1;
            loadLabsGrid();
            break;
        case 'tests':
            showTestsList();
            break;
        case 'practice':
            focusEditor();
            break;
        case 'games':
            loadGames();
            break;
        case 'projects':
            loadProjects();
            break;
    }
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
    saveUserState();
}

            function updateBreadcrumbs() {
                const breadcrumbs = document.getElementById('breadcrumbs');
                const section = appState.current.section;
                
                let crumbs = `<a href="#" onclick="switchSection('home'); return false;">${currentLanguage === 'by' ? 'Галоўная' : 'Главная'}</a>`;
                
                switch(section) {
                    case 'theory':
                        const module = COURSE_STRUCTURE.modules.find(m => m.id === appState.current.module);
                        const topic = module ? module.topics.find(t => t.id === appState.current.topic) : null;
                        
                        if (module) {
                            const moduleName = currentLanguage === 'by' && module.name_by ? module.name_by : module.name;
                            crumbs += ` > <a href="#" onclick="goToModule('${module.id}'); return false;">${moduleName}</a>`;
                        }
                        
                        if (topic) {
                            const topicTitle = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
                            crumbs += ` > <span>${topicTitle}</span>`;
                        } else {
                            crumbs += ` > <span>${currentLanguage === 'by' ? 'Тэорыя' : 'Теория'}</span>`;
                        }
                        break;
                        
                    case 'labs':
                        crumbs += ` > <span>${currentLanguage === 'by' ? 'Лабараторныя' : 'Лабораторные'}</span>`;
                        break;
                        
                    case 'tests':
                        crumbs += ` > <span>${currentLanguage === 'by' ? 'Тэсты' : 'Тесты'}</span>`;
                        break;
                        
                    case 'practice':
                        crumbs += ` > <span>${currentLanguage === 'by' ? 'Практыка' : 'Практика'}</span>`;
                        if (currentLab) {
                            const lab = LABS_DATA.find(l => l.id === currentLab);
                            if (lab) {
                                const labTitle = currentLanguage === 'by' && lab.title_by ? lab.title_by : lab.title;
                                crumbs += ` > <span>${labTitle}</span>`;
                            }
                        }
                        break;
                        
                    case 'projects':
                        crumbs += ` > <span>${currentLanguage === 'by' ? 'Праекты' : 'Проекты'}</span>`;
                        break;
                        
                    case 'games':
                        crumbs += ` > <span>${currentLanguage === 'by' ? 'Гульні' : 'Игры'}</span>`;
                        break;
                }
                
                breadcrumbs.innerHTML = crumbs;
            }



            // ================ РЕДАКТОР КОДА ================
            function initCodeEditor() {
                codeEditor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
                    mode: "text/x-c++src",
                    theme: "monokai",
                    lineNumbers: true,
                    indentUnit: 4,
                    lineWrapping: true,
                    matchBrackets: true,
                    autoCloseBrackets: true,
                    foldGutter: true,
                    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter", "CodeMirror-lint-markers"],
                    extraKeys: {
                        "Ctrl-Space": "autocomplete",
                        "Ctrl-Enter": runCode,
                        "F5": runCode,
                        "F9": debugCode,
                        "Ctrl-S": saveCode,
                        "Ctrl-/": function(cm) { cm.toggleComment(); },
                        "Ctrl-F": "findPersistent",
                        "Ctrl-H": "replace",
                        "Ctrl-G": "jumpToLine"
                    },
                    lint: true,
                    autocomplete: true,
                    styleActiveLine: true,
                    showCursorWhenSelecting: true,
                    cursorBlinkRate: 530
                });
                
                loadFile(appState.current.file);
                updateFileTabs();
                updateEditorSettings();
            }

            function updateEditorSettings() {
                const settings = appState.user.settings.editor;
                
                codeEditor.getWrapperElement().style.fontSize = settings.fontSize + 'px';
                
                if (settings.autocomplete) {
                    codeEditor.setOption('extraKeys', {
                        ...codeEditor.getOption('extraKeys'),
                        "Ctrl-Space": "autocomplete"
                    });
                } else {
                    const keys = { ...codeEditor.getOption('extraKeys') };
                    delete keys["Ctrl-Space"];
                    codeEditor.setOption('extraKeys', keys);
                }
                
                codeEditor.setOption('indentUnit', settings.tabSize);
                
                if (!settings.syntaxHighlighting) {
                    codeEditor.setOption('theme', 'default');
                } else {
                    codeEditor.setOption('theme', 'monokai');
                }
            }

            function updateFileTabs() {
                const tabs = document.getElementById('fileTabs');
                tabs.innerHTML = '';
                
                Object.keys(appState.current.editor.files).forEach(filename => {
                    const isActive = filename === appState.current.file;
                    const extension = filename.split('.').pop();
                    const tabClass = `file-tab ${extension === 'cpp' ? 'cpp' : extension === 'h' ? 'h' : ''} ${isActive ? 'active' : ''}`;
                    
                    const tab = document.createElement('button');
                    tab.className = tabClass;
                    tab.onclick = () => switchFile(filename);
                    
                    const icon = extension === 'cpp' ? 'fa-file-code' : 
                                extension === 'h' ? 'fa-file-alt' : 'fa-file';
                    
                    tab.innerHTML = `
                        <i class="fas ${icon}"></i>
                        <span>${filename}</span>
                        ${isActive ? '<i class="fas fa-times" onclick="closeFile(event, \'' + filename + '\')"></i>' : ''}
                    `;
                    
                    tabs.appendChild(tab);
                });
            }

            // ================ ПРАКТИКА ================
            function showLabInfo() {
                const panel = document.getElementById('labInfoPanel');
                const btn = document.getElementById('showLabInfoBtn');
               
                }
        

            function toggleLabInfo() {
                const panel = document.getElementById('labInfoPanel');
                const btn = document.getElementById('showLabInfoBtn');
            }

            function startLab() {
                const lab = LABS_DATA.find(l => l.id === appState.current.lab);
                if (!lab) return;
                
                const fileName = `lab_${lab.id}.cpp`;
                appState.current.editor.files[fileName] = lab.starterCode || '// Напишите ваш код здесь';
                appState.current.file = fileName;
                
                codeEditor.setValue(appState.current.editor.files[fileName]);
                updateFileTabs();
                
                switchSection('practice');
                closeModal();

                setTimeout(() => {
                    const practiceContainer = document.querySelector('.practice-container');
                    const oldTerminal = document.getElementById('labTerminal');
                    if (oldTerminal) oldTerminal.remove();
                    
                    const terminalHtml = createLabTerminal(lab.id);
                    practiceContainer.insertAdjacentHTML('beforeend', terminalHtml);
                }, 500);
                
                showNotification(`Начата работа: ${lab.title}`, 'success');
            }

            function setupLabInfoPanel(lab) {
                document.getElementById('labInfoTitle').textContent = (currentLanguage === 'by' && lab.title_by ? lab.title_by : lab.title);
                document.getElementById('labInfoDescription').textContent = currentLanguage === 'by' && lab.description_by ? lab.description_by : lab.description;
                
                const objectivesContainer = document.getElementById('labInfoObjectives');
                objectivesContainer.innerHTML = '';
                
                const objectives = currentLanguage === 'by' && lab.objectives_by ? lab.objectives_by : lab.objectives;
                objectives.forEach((objective, index) => {
                    const objectiveEl = document.createElement('div');
                    objectiveEl.className = 'lab-objective';
                    objectiveEl.innerHTML = `
                        <div style="width: 24px; height: 24px; border-radius: 6px; background: rgba(100, 255, 218, 0.1); 
                             display: flex; align-items: center; justify-content: center; color: var(--accent-blue);">
                            ${index + 1}
                        </div>
                        <span>${objective}</span>
                    `;
                    objectivesContainer.appendChild(objectiveEl);
                });
            
            }

            function submitLabWork() {
                document.getElementById('labSubmissionPanel').style.display = 'block';
                loadLabTestQuestions();
            }

            function loadLabTestQuestions() {
                const lab = LABS_DATA.find(l => l.id === currentLab);
                if (!lab || !lab.testQuestions) return;
                
                const container = document.getElementById('labTestQuestions');
                container.innerHTML = '';
                
                lab.testQuestions.forEach((question, index) => {
                    const questionEl = document.createElement('div');
                    questionEl.className = 'lab-test-question';
                    
                    const questionText = currentLanguage === 'by' && question.question_by ? question.question_by : question.question;
                    
                    questionEl.innerHTML = `
                        <div class="lab-test-question-text">${index + 1}. ${questionText}</div>
                        <div class="lab-test-options">
                            ${question.options.map((option, i) => `
                                <div class="lab-test-option" onclick="selectLabTestAnswer(${index}, ${i})" id="labOption_${index}_${i}">
                                    ${String.fromCharCode(65 + i)}. ${option}
                                </div>
                            `).join('')}
                        </div>
                    `;
                    
                    container.appendChild(questionEl);
                });
            }

            function selectLabTestAnswer(questionIndex, answerIndex) {
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab) return;
    
    labTestAnswers[questionIndex] = answerIndex;
    
    for (let i = 0; i < lab.testQuestions[questionIndex].options.length; i++) {
        const optionEl = document.getElementById(`labOption_${questionIndex}_${i}`);
        if (optionEl) {
            if (i === answerIndex) {
                optionEl.classList.add('selected');
            } else {
                optionEl.classList.remove('selected');
            }
        }
    }
}

// ================ ПРОВЕРКА ЛАБОРАТОРНЫХ РАБОТ ================
function submitLabForGrading() {
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab || !lab.testQuestions) return;
    
    let correctAnswers = 0;
    const totalQuestions = lab.testQuestions.length;
    
    for (let i = 0; i < totalQuestions; i++) {
        if (labTestAnswers[i] === lab.testQuestions[i].correct) {
            correctAnswers++;
        }
    }
    
    const score = Math.round((correctAnswers / totalQuestions) * 100);
    
    if (score >= 80) {
        if (!appState.user.completedLabs.includes(currentLab)) {
            appState.user.completedLabs.push(currentLab);
            appState.user.completedLabsCount = (appState.user.completedLabsCount || 0) + 1;
            
            const xpEarned = lab.points;
            appState.user.xp += xpEarned;
            
            checkLevelUp();
            checkLabAchievements();
            
            showNotification(`🎉 ${currentLanguage === 'by' ? 'Лабараторная праца паспяхова здадзена!' : 'Лабораторная работа успешно сдана!'} (+${xpEarned} XP)`, "success");
            
            document.getElementById('labSubmissionPanel').style.display = 'none';
            
            logActivity(`${currentLanguage === 'by' ? 'Сдаў лабараторную працу:' : 'Сдал лабораторную работу:'} ${lab.title} (${score}%)`);
            
            updateLastActivity('lab');
            forceProgressUpdate();
        }
    } else {
        showNotification(`❌ ${currentLanguage === 'by' ? 'Тэст не пройдзены. Паспрабуйце яшчэ раз.' : 'Тест не пройден. Попробуйте еще раз.'} (${score}%)`, "error");
    }
    
    saveUserState();
}

function runLabTest() {
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab) return;
    
    document.getElementById('labSubmissionPanel').style.display = 'block';
    
    const container = document.getElementById('labTestQuestions');
    container.innerHTML = '';
    
    lab.testQuestions.forEach((question, index) => {
        const questionEl = document.createElement('div');
        questionEl.className = 'lab-test-question';
        
        const questionText = currentLanguage === 'by' && question.question_by ? question.question_by : question.question;
        
        let optionsHtml = '';
        question.options.forEach((option, i) => {
            optionsHtml += `
                <div class="lab-test-option" onclick="selectLabTestAnswer(${index}, ${i})" id="labOption_${index}_${i}">
                    ${String.fromCharCode(65 + i)}. ${option}
                </div>
            `;
        });
        
        questionEl.innerHTML = `
            <div class="lab-test-question-text">${index + 1}. ${questionText}</div>
            <div class="lab-test-options">
                ${optionsHtml}
            </div>
        `;
        
        container.appendChild(questionEl);
    });
}

function loadTheoryGrid() {
    const grid = document.getElementById('theoryGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    // Собираем все ТЕОРЕТИЧЕСКИЕ темы из всех модулей
    let allTheoryTopics = [];
    COURSE_STRUCTURE.modules.forEach(module => {
        module.topics.forEach(topic => {
            if (topic.type === 'theory') {
                const translatedTitle = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
                const translatedDescription = topic.content?.overview ? 
                    (currentLanguage === 'by' && topic.content.overview_by ? 
                     topic.content.overview_by : topic.content.overview) : 
                    (currentLanguage === 'by' && topic.description_by ? topic.description_by : topic.description || 'Теоретическая тема');
                
                allTheoryTopics.push({
                    ...topic,
                    moduleName: currentLanguage === 'by' && module.name_by ? module.name_by : module.name,
                    title: translatedTitle,
                    description: translatedDescription,
                    moduleId: module.id
                });
            }
        });
    });
    
    // --- НАЧАЛО ПАГИНАЦИИ ---
    const totalPages = Math.ceil(allTheoryTopics.length / ITEMS_PER_PAGE);
    const start = (currentTheoryPage - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const paginatedTopics = allTheoryTopics.slice(start, end);
    // --- КОНЕЦ ПАГИНАЦИИ ---

    // Проверяем, есть ли темы
    if (allTheoryTopics.length === 0) {
        grid.innerHTML = `<div style="grid-column: span 3; text-align: center; padding: 50px; color: var(--accent-purple);">...</div>`;
        renderPagination('theory', 1, 1);
        return;
    }
    
    // Создаем карточки тем из paginatedTopics
    paginatedTopics.forEach(topic => {
        const isCompleted = appState.user.completedTopics.includes(topic.id);
        const card = document.createElement('div');
        card.className = `lab-card ${isCompleted ? 'completed' : ''}`;
        card.onclick = () => {
            openTheoryModal(topic.id, topic.moduleId || 'basics');
        };
        
        const difficultyText = topic.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') : topic.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') : (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый');
        
        card.innerHTML = `
            <div class="lab-card-header">
                <div class="lab-title">${topic.title}</div>
                <div class="lab-difficulty difficulty-${topic.difficulty}">${difficultyText}</div>
            </div>
            <div class="lab-description">${topic.description}</div>
            ${topic.tags && topic.tags.length > 0 ? `
                <div style="display: flex; gap: 6px; margin: 10px 0; flex-wrap: wrap;">
                    ${topic.tags.map(tag => {
                        const tagText = currentLanguage === 'by' && topic.tags_by ? topic.tags_by[topic.tags.indexOf(tag)] || tag : tag;
                        return `<span style="padding: 3px 8px; background: rgba(100, 255, 218, 0.1); border-radius: 10px; font-size: 10px; color: var(--accent-blue);">${tagText}</span>`;
                    }).join('')}
                </div>
            ` : ''}
            <div class="lab-meta">
                <div class="lab-stats">
                    <div class="lab-stat"><i class="fas fa-clock"></i><span>${topic.duration || 15} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span></div>
                    <div class="lab-stat"><i class="fas fa-star"></i><span>${topic.points || 100} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}</span></div>
                    <div class="lab-stat"><i class="fas fa-book"></i><span>${topic.moduleName}</span></div>
                </div>
                <div class="lab-status ${isCompleted ? 'completed' : ''}">${isCompleted ? '✅ ' + (currentLanguage === 'by' ? 'Вывучана' : 'Изучено') : '📚 ' + (currentLanguage === 'by' ? 'Вывучаць' : 'Изучить')}</div>
            </div>
        `;
        grid.appendChild(card);
    });
    
    // Пагинация
    renderPagination('theory', totalPages, currentTheoryPage);
}

function loadLabsGrid() {
    const grid = document.getElementById('labsGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    // Есть ли лабораторные
    if (!LABS_DATA || LABS_DATA.length === 0) {
        grid.innerHTML = `<div style="grid-column: span 3; text-align: center; padding: 50px; color: var(--accent-purple);">...</div>`;
        renderPagination('labs', 1, 1);
        return;
    }
    
    // --- НАЧАЛО ПАГИНАЦИИ ---
    const totalPages = Math.ceil(LABS_DATA.length / ITEMS_PER_PAGE);
    const start = (currentLabPage - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const paginatedLabs = LABS_DATA.slice(start, end);
    // --- КОНЕЦ ПАГИНАЦИИ ---
    
    // Создаем карточки  из paginatedLabs
    paginatedLabs.forEach(lab => {
        const isCompleted = lab.status === 'completed';
        const card = document.createElement('div');
        card.className = `lab-card ${isCompleted ? 'completed' : ''} ${lab.status === 'locked' ? 'locked' : ''}`;
        card.onclick = () => {
            if (lab.status === 'locked') {
                showNotification(currentLanguage === 'by' ? 'Гэтая лаба заблакавана. Спачатку вывучыце папярэднія тэмы.' : 'Эта лаба заблокирована. Сначала изучите предыдущие темы.', "warning");
                return;
            }
            openLabModal(lab.id);
        };
        
        const labTitle = currentLanguage === 'by' && lab.title_by ? lab.title_by : lab.title;
        const labDescription = currentLanguage === 'by' && lab.description_by ? lab.description_by : lab.description;
        const difficultyText = lab.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') : lab.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') : lab.difficulty === 'advanced' ? (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый') : (currentLanguage === 'by' ? 'Эксперт' : 'Эксперт');
        const statusText = lab.status === 'completed' ? (currentLanguage === 'by' ? 'Завершана' : 'Завершено') : lab.status === 'in-progress' ? (currentLanguage === 'by' ? 'У працэсе' : 'В процессе') : (currentLanguage === 'by' ? 'Не пачата' : 'Не начата');
        
        card.innerHTML = `
            <div class="lab-card-header">
                <div class="lab-title">${labTitle}</div>
                <div class="lab-difficulty difficulty-${lab.difficulty}">${difficultyText}</div>
            </div>
            <div class="lab-description">${labDescription}</div>
            ${lab.tags && lab.tags.length > 0 ? `
                <div style="display: flex; gap: 6px; margin: 10px 0; flex-wrap: wrap;">
                    ${lab.tags.map(tag => {
                        const tagText = currentLanguage === 'by' && lab.tags_by ? lab.tags_by[lab.tags.indexOf(tag)] || tag : tag;
                        return `<span style="padding: 3px 8px; background: rgba(100, 255, 218, 0.1); border-radius: 10px; font-size: 10px; color: var(--accent-blue);">${tagText}</span>`;
                    }).join('')}
                </div>
            ` : ''}
            <div class="lab-meta">
                <div class="lab-stats">
                    <div class="lab-stat"><i class="fas fa-clock"></i><span>${lab.duration} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span></div>
                    <div class="lab-stat"><i class="fas fa-star"></i><span>${lab.points} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}</span></div>
                    <div class="lab-stat"><i class="fas fa-tasks"></i><span>${lab.objectives ? lab.objectives.length : 0} ${currentLanguage === 'by' ? 'задач' : 'задач'}</span></div>
                </div>
                <div class="lab-status ${isCompleted ? 'completed' : ''} ${lab.status === 'in-progress' ? 'in-progress' : ''}">${isCompleted ? '✅ ' : (lab.status === 'in-progress' ? '🔄 ' : '📝 ')}${statusText}</div>
            </div>
        `;
        grid.appendChild(card);
    });
    
    // Отрисовываем пагинацию
    renderPagination('labs', totalPages, currentLabPage);
}
        function openTheoryModal(topicId, moduleId) {
    const module = COURSE_STRUCTURE.modules.find(m => m.id === moduleId);
    if (!module) return;
    
    const topic = module.topics.find(t => t.id === topicId);
    if (!topic) return;
    
    appState.current.topic = topicId;
    appState.current.module = moduleId;
    
    // Создаем модальное окно, если его нет
    let modal = document.getElementById('theoryModal');
    if (!modal) {
        modal = document.createElement('div');
        modal.className = 'modal-overlay';
        modal.id = 'theoryModal';
        modal.innerHTML = `
            <div class="modal-container" style="max-width: 1150px; max-height: 90vh;">
                <div class="modal-header">
                    <h2><i class="fas fa-book"></i> ${currentLanguage === 'by' ? 'Тэорыя' : 'Теория'}</h2>
                    <button class="btn btn-outline" onclick="closeModal()">
                        <i class="fas fa-times"></i> ${currentLanguage === 'by' ? 'Закрыць' : 'Закрыть'}
                    </button>
                </div>
                <div class="modal-body">
                    <div id="theoryModalContent">
                        <!-- Контент будет загружен динамически -->
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    const content = document.getElementById('theoryModalContent');
    modal.classList.add('active');
    
    // Перевод текста
    const difficultyText = topic.difficulty === 'beginner' ? 
        (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') :
        topic.difficulty === 'intermediate' ? 
        (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') : 
        (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый');
    
    const topicTitle = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
    const topicOverview = topic.content?.overview ? 
        (currentLanguage === 'by' && topic.content.overview_by ? 
         topic.content.overview_by : topic.content.overview) : '';
    
    // Заголовок и информация
    let modalContent = `
        <div style="margin-bottom: 25px;">
            <h3 style="color: var(--accent-blue); margin-bottom: 10px;">
                <i class="fas fa-book"></i> ${topicTitle}
            </h3>
            <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                <div class="badge ${topic.difficulty === 'beginner' ? 'badge-primary' : 
                                topic.difficulty === 'intermediate' ? 'badge-warning' : 
                                'badge-danger'}">
                    ${difficultyText}
                </div>
                <div class="badge badge-success">
                    ${topic.points || 0} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}
                </div>
                <div class="badge badge-primary">
                    ${topic.duration || 15} ${currentLanguage === 'by' ? 'хвілін' : 'минут'}
                </div>
                <div class="badge badge-primary">
                    <i class="fas fa-book"></i> ${currentLanguage === 'by' && module.name_by ? module.name_by : module.name}
                </div>
            </div>
            ${topicOverview ? `
                <div style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; padding: 15px; background: rgba(100, 255, 218, 0.05); border-radius: 10px;">
                    ${topicOverview}
                </div>
            ` : ''}
        </div>
    `;
    
    // Добавляем секции
    if (topic.content && topic.content.sections) {
        modalContent += `<div id="theoryModalSections" style="display: flex; flex-direction: column; gap: 30px;">`;
        
        topic.content.sections.forEach((section, index) => {
            const sectionTitle = currentLanguage === 'by' && section.title_by ? section.title_by : section.title;
            modalContent += `
                <div class="theory-section">
                    <h4>${index + 1}. ${sectionTitle}</h4>
                    <div class="section-content">
                        ${section.content}
                    </div>
                </div>
            `;
        });
        
        modalContent += `</div>`;
    }
    
    // Кнопки действий
    modalContent += `
        <div style="margin-top: 40px; padding-top: 25px; border-top: 1px solid rgba(100, 255, 218, 0.2);">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                <div>
                    <button class="btn btn-outline" onclick="markTopicAsComplete('${topicId}', '${moduleId}')">
                        <i class="fas fa-check-circle"></i> ${currentLanguage === 'by' ? 'Адзначыць як вывучанае' : 'Отметить как изученное'}
                    </button>
                </div>
                <div style="display: flex; gap: 15px;">
                    <button class="btn btn-outline" onclick="takeNotes('${topicId}')">
                        <i class="fas fa-edit"></i> ${currentLanguage === 'by' ? 'Канспект' : 'Конспект'}
                    </button>
                    ${topic.type === 'theory' ? `
                        <button class="btn btn-primary" onclick="startTheoryPractice('${topicId}')">
                            <i class="fas fa-play"></i> ${currentLanguage === 'by' ? 'Практыка' : 'Практика'}
                        </button>
                    ` : ''}
                </div>
            </div>
        </div>
    `;
    
    content.innerHTML = modalContent;
    
    // Применяем стили для интерактивных элементов
    setTimeout(() => {
        // Инициализируем интерактивные элементы, если они есть
        if (document.getElementById('varA')) {
            updateVariableDemo();
        }
    }, 100);
}

// Вспомогательные функции
function markTopicAsComplete(topicId, moduleId) {
    if (!appState.user.completedTopics.includes(topicId)) {
        appState.user.completedTopics.push(topicId);
        
        // Начисляем XP
        const module = COURSE_STRUCTURE.modules.find(m => m.id === moduleId);
        const topic = module?.topics.find(t => t.id === topicId);
        
        if (topic) {
            const xpEarned = topic.points || 100;
            appState.user.xp += xpEarned;
            
            showNotification(`🎉 ${currentLanguage === 'by' ? 'Тэма вывучана!' : 'Тема изучена!'} +${xpEarned} XP`, "success");
            
            // Проверяем повышение уровня
            checkLevelUp();
            
            // Обновляем UI
            loadTheoryGrid();
            updateUserStats();
            
            // Проверяем достижения
            if (appState.user.completedTopics.length >= 5) {
                unlockAchievement("theory_expert");
            }
        }
        
        saveUserState();
    } else {
        showNotification(currentLanguage === 'by' ? 'Тэма ўжо вывучана' : 'Тема уже изучена', "info");
    }
}

function takeNotes(topicId) {
    const notes = prompt(currentLanguage === 'by' ? 
        "Запішыце вашы нататкі па гэтай тэме:" : 
        "Запишите ваши заметки по этой теме:");
    
    if (notes) {
        showNotification(currentLanguage === 'by' ? 
            "Нататкі захаваны" : 
            "Заметки сохранены", "success");
        
        if (!appState.user.notes) {
            appState.user.notes = {};
        }
        appState.user.notes[topicId] = notes;
        saveUserState();
    }
}

function startTheoryPractice(topicId) {
    // Находим тему
    let targetTopic = null;
    let targetModule = null;
    
    for (const module of COURSE_STRUCTURE.modules) {
        const topic = module.topics.find(t => t.id === topicId);
        if (topic) {
            targetTopic = topic;
            targetModule = module;
            break;
        }
    }
    
    if (!targetTopic) return;
    
    // Создаем файл для практики
    const practiceCode = `// Практика: ${currentLanguage === 'by' && targetTopic.title_by ? targetTopic.title_by : targetTopic.title}
// Модуль: ${currentLanguage === 'by' && targetModule.name_by ? targetModule.name_by : targetModule.name}

#include <iostream>
using namespace std;

int main() {
    cout << "Практика по теме: ${currentLanguage === 'by' && targetTopic.title_by ? targetTopic.title_by : targetTopic.title}" << endl;
    cout << "======================================" << endl;
    
    // Здесь будет ваш код для практики
    // Изучите теорию и попробуйте написать свою реализацию
    
    return 0;
}`;
    
    const fileName = `practice_${topicId}_${Date.now()}.cpp`;
    appState.current.editor.files[fileName] = practiceCode;
    appState.current.file = fileName;
    
    updateFileTabs();
    codeEditor.setValue(practiceCode);
    switchSection('practice');
    
    closeModal();
    
    showNotification(`🚀 ${currentLanguage === 'by' ? 
        'Практыка пачатая!' : 
        'Практика начата!'}`, "success");
}

        function createTheoryModal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.id = 'theoryModal';
            modal.innerHTML = `
                <div class="modal-container" style="max-width: 900px; max-height: 90vh;">
                    <div class="modal-header">
                        <h2><i class="fas fa-book"></i> Теория</h2>
                        <button class="btn btn-outline" onclick="closeModal()">
                            <i class="fas fa-times"></i> Закрыть
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="theoryModalContent">
                            <!-- Контент будет загружен динамически -->
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            return modal;
        }
// ================ ТЕСТИРОВАНИЕ ================
function showTestsList() {
    const container = document.getElementById('testContainer');
    
    container.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <div style="font-size: 48px; color: var(--accent-blue); margin-bottom: 20px;">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h3 style="color: var(--text-primary); margin-bottom: 15px;">
                ${currentLanguage === 'by' ? 'Тэсты ведаў' : 'Тесты знаний'}
            </h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto;">
                ${currentLanguage === 'by' ? 
                    'Праверце свае веды па розных тэмах. Кожны правільны адказ прыносіць 10 XP.' : 
                    'Проверьте свои знания по разным темам. Каждый правильный ответ приносит 10 XP.'}
            </p>
            
            <div class="test-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="test-card" style="background: rgba(100, 255, 218, 0.1); border: 1px solid var(--accent-blue); border-radius: 15px; padding: 25px; cursor: pointer; transition: all 0.3s ease;" 
                     onclick="startTest('basics')">
                    <div style="font-size: 32px; color: var(--accent-blue); margin-bottom: 15px;">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">
                        ${currentLanguage === 'by' ? 'Асновы C++' : 'Основы C++'}
                    </h4>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 15px;">
                        10 пытанняў • ${currentLanguage === 'by' ? 'Пачатковы ўзровень' : 'Начальный уровень'}
                    </p>
                    <div style="color: var(--accent-green); font-weight: bold;">
                        ${currentLanguage === 'by' ? '100 ачкоў' : '100 баллов'}
                    </div>
                </div>
                
                <div class="test-card" style="background: rgba(241, 250, 140, 0.1); border: 1px solid var(--accent-yellow); border-radius: 15px; padding: 25px; cursor: pointer; transition: all 0.3s ease;"
                     onclick="startTest('oop')">
                    <div style="font-size: 32px; color: var(--accent-yellow); margin-bottom: 15px;">
                        <i class="fas fa-cube"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">
                        ${currentLanguage === 'by' ? 'Аб\'ектна-арыентаванае праграмаванне' : 'Объектно-ориентированное программирование'}
                    </h4>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 15px;">
                        8 пытанняў • ${currentLanguage === 'by' ? 'Сярэдні ўзровень' : 'Средний уровень'}
                    </p>
                    <div style="color: var(--accent-green); font-weight: bold;">
                        ${currentLanguage === 'by' ? '80 ачкоў' : '80 баллов'}
                    </div>
                </div>
                
                <div class="test-card" style="background: rgba(80, 250, 123, 0.1); border: 1px solid var(--accent-green); border-radius: 15px; padding: 25px; cursor: pointer; transition: all 0.3s ease;"
                     onclick="startTest('algorithms')">
                    <div style="font-size: 32px; color: var(--accent-green); margin-bottom: 15px;">
                        <i class="fas fa-sort-amount-up"></i>
                    </div>
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">
                        ${currentLanguage === 'by' ? 'Алгарытмы' : 'Алгоритмы'}
                    </h4>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 15px;">
                        12 пытанняў • ${currentLanguage === 'by' ? 'Прасунуты ўзровень' : 'Продвинутый уровень'}
                    </p>
                    <div style="color: var(--accent-green); font-weight: bold;">
                        ${currentLanguage === 'by' ? '120 ачкоў' : '120 баллов'}
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Добавляем анимации при наведении
    document.querySelectorAll('.test-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 10px 20px rgba(0, 0, 0, 0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });
}

// ================ ТЕСТЫ ================
function startTest(testId) {
    const testData = TESTS_DATA[testId];
    if (!testData) return;
    
    currentTest = testId;
    testAnswers = {};
    testTimeLeft = testData.timeLimit;
    
    const container = document.getElementById('testContainer');
    
    container.innerHTML = `
        <div class="test-container">
            <div class="test-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(100, 255, 218, 0.2);">
                <div>
                    <h3 style="color: var(--accent-blue);">${currentLanguage === 'by' ? testData.name_by : testData.name}</h3>
                    <p style="color: var(--accent-purple); font-size: 14px;">
                        ${currentLanguage === 'by' ? 'Пытанне 1 з' : 'Вопрос 1 из'} ${testData.questions.length}
                    </p>
                </div>
                <div class="test-timer">
                    <i class="fas fa-clock"></i>
                    <span id="testTimer">${formatTime(testTimeLeft)}</span>
                </div>
            </div>
            
            <div id="testQuestionsContainer">
                ${renderTestQuestion(testData.questions[0], 0)}
            </div>
            
            <div class="test-progress">
                <button class="btn btn-outline" onclick="resetTest()">
                    <i class="fas fa-redo"></i> ${currentLanguage === 'by' ? 'Скінуць' : 'Сбросить'}
                </button>
                <div style="flex: 1; text-align: center;">
                    <div style="display: inline-block; padding: 8px 20px; background: rgba(100, 255, 218, 0.1); border-radius: 12px; color: var(--accent-blue);">
                        ${currentLanguage === 'by' ? 'Пытанне' : 'Вопрос'} <span id="currentQuestionNum">1</span> ${currentLanguage === 'by' ? 'з' : 'из'} ${testData.questions.length}
                    </div>
                </div>
                <button class="btn btn-primary" onclick="nextTestQuestion()" id="nextQuestionBtn">
                    ${currentLanguage === 'by' ? 'Наступнае' : 'Следующее'} <i class="fas fa-chevron-right"></i>
                </button>
                <button class="btn btn-success" onclick="submitTest()" id="submitTestBtn" style="display: none;">
                    <i class="fas fa-check"></i> ${currentLanguage === 'by' ? 'Завяршыць' : 'Завершить'}
                </button>
            </div>
        </div>
    `;
    
    // Запускаем таймер
    startTestTimer();
    
    logActivity(`${currentLanguage === 'by' ? 'Пачаў тэст:' : 'Начал тест:'} ${testData.name}`);
}

function renderTestQuestion(question, index) {
    const questionText = currentLanguage === 'by' && question.question_by ? question.question_by : question.question;
    const options = currentLanguage === 'by' && question.options_by ? question.options_by : question.options;
    
    return `
        <div class="test-question">
            <div class="test-question-number">${currentLanguage === 'by' ? 'Пытанне' : 'Вопрос'} ${index + 1}</div>
            <div class="test-question-text">${questionText}</div>
        </div>
        <div class="test-options">
            ${options.map((option, i) => `
                <div class="test-option ${testAnswers[index] === i ? 'selected' : ''}" 
                     onclick="selectTestAnswer(${index}, ${i})">
                    <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                    <div>${option}</div>
                </div>
            `).join('')}
        </div>
    `;
}

function selectTestAnswer(questionIndex, answerIndex) {
    testAnswers[questionIndex] = answerIndex;
    
    const container = document.getElementById('testQuestionsContainer');
    const options = container.querySelectorAll('.test-option');
    
    options.forEach((option, i) => {
        if (i === answerIndex) {
            option.classList.add('selected');
        } else {
            option.classList.remove('selected');
        }
    });
}

function nextTestQuestion() {
    const testData = TESTS_DATA[currentTest];
    if (!testData) return;
    
    const currentQuestionNum = parseInt(document.getElementById('currentQuestionNum').textContent);
    
    if (currentQuestionNum < testData.questions.length) {
        const container = document.getElementById('testQuestionsContainer');
        container.innerHTML = renderTestQuestion(testData.questions[currentQuestionNum], currentQuestionNum);
        document.getElementById('currentQuestionNum').textContent = currentQuestionNum + 1;
        
        // Показываем кнопку завершения на последнем вопросе
        if (currentQuestionNum + 1 === testData.questions.length) {
            document.getElementById('nextQuestionBtn').style.display = 'none';
            document.getElementById('submitTestBtn').style.display = 'inline-flex';
        }
    }
}
function startTestTimer() {
    if (testTimer) clearInterval(testTimer);
    
    testTimer = setInterval(() => {
        testTimeLeft--;
        
        const timerElement = document.getElementById('testTimer');
        if (timerElement) {
            timerElement.textContent = formatTime(testTimeLeft);
        }
        
        if (testTimeLeft <= 0) {
            clearInterval(testTimer);
            submitTest();
            showNotification(currentLanguage === 'by' ? 'Час скончыўся! Тэст аўтаматычна завершаны.' : 'Время вышло! Тест автоматически завершен.', "warning");
        }
        
        if (testTimeLeft <= 60) {
            const timer = document.querySelector('.test-timer');
            if (timer) {
                timer.style.background = 'rgba(255, 85, 85, 0.2)';
                timer.style.color = 'var(--accent-red)';
            }
        }
    }, 1000);
}

function submitTest() {
    if (testTimer) {
        clearInterval(testTimer);
        testTimer = null;
    }
    
    const testData = TESTS_DATA[currentTest];
    if (!testData) return;
    
    let correctAnswers = 0;
    const totalQuestions = testData.questions.length;
    
    for (let i = 0; i < totalQuestions; i++) {
        if (testAnswers[i] === testData.questions[i].correct) {
            correctAnswers++;
        }
    }
    
    const score = Math.round((correctAnswers / totalQuestions) * 100);
    const xpEarned = correctAnswers * CONFIG.TEST_XP_PER_QUESTION;
    
    appState.user.xp += xpEarned;
    appState.user.completedTests = (appState.user.completedTests || 0) + 1;
    
    checkLevelUp();
    
    if (score === 100) {
        unlockAchievement('test_champion');
    }
    
    showTestResults(testData, correctAnswers, totalQuestions, score, xpEarned);
    document.getElementById('submitTestBtn').style.display = 'none';
    
    updateUserStats();
    logActivity(`${currentLanguage === 'by' ? 'Завяршыў тэст:' : 'Завершил тест:'} ${testData.name} (${score}%)`);
    saveUserState();
}

function showTestResults(testData, correct, total, score, xpEarned) {
    const container = document.getElementById('testContainer');
    
    container.innerHTML = `
        <div class="test-container" style="text-align: center; padding: 40px;">
            <div style="font-size: 72px; color: ${score >= 80 ? 'var(--accent-green)' : 'var(--accent-red)'}; margin-bottom: 20px;">
                ${score >= 80 ? '🎉' : '📊'}
            </div>
            <h2 style="color: var(--text-primary); margin-bottom: 10px;">
                ${currentLanguage === 'by' ? 'Тэст завершаны!' : 'Тест завершен!'}
            </h2>
            <div style="font-size: 48px; font-weight: bold; color: var(--accent-blue); margin: 20px 0;">
                ${score}%
            </div>
            <div style="color: var(--text-secondary); margin-bottom: 30px;">
                ${currentLanguage === 'by' ? 
                    `Вы адказалі правільна на ${correct} з ${total} пытанняў` :
                    `Вы ответили правильно на ${correct} из ${total} вопросов`}
            </div>
            
            <div style="background: rgba(100, 255, 218, 0.1); border-radius: 15px; padding: 20px; margin: 30px 0; text-align: left;">
                <h4 style="color: var(--accent-blue); margin-bottom: 15px;">
                    <i class="fas fa-star"></i> ${currentLanguage === 'by' ? 'Вашы вынікі' : 'Ваши результаты'}
                </h4>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Правільныя адказы' : 'Правильные ответы'}</span>
                    <span style="color: var(--accent-green); font-weight: bold;">${correct}/${total}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Атрымана ачкоў' : 'Получено баллов'}</span>
                    <span style="color: var(--accent-green); font-weight: bold;">+${xpEarned} XP</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Час' : 'Время'}</span>
                    <span style="color: var(--accent-purple); font-weight: bold;">${formatTime(600 - testTimeLeft)}</span>
                </div>
            </div>
            
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="showTestsList()">
                    <i class="fas fa-list"></i> ${currentLanguage === 'by' ? 'Усе тэсты' : 'Все тесты'}
                </button>
                <button class="btn btn-outline" onclick="reviewTestAnswers()">
                    <i class="fas fa-search"></i> ${currentLanguage === 'by' ? 'Паглядзець адказы' : 'Посмотреть ответы'}
                </button>
            </div>
        </div>
    `;
}

function reviewTestAnswers() {
    const testData = TESTS_DATA[currentTest];
    if (!testData) return;
    
    const container = document.getElementById('testContainer');
    let reviewHTML = `
        <div class="test-container">
            <div style="text-align: center; margin-bottom: 30px;">
                <h3 style="color: var(--accent-blue);">
                    <i class="fas fa-search"></i> ${currentLanguage === 'by' ? 'Правільныя адказы' : 'Правильные ответы'}
                </h3>
            </div>
    `;
    
    testData.questions.forEach((question, index) => {
        const userAnswer = testAnswers[index];
        const isCorrect = userAnswer === question.correct;
        const questionText = currentLanguage === 'by' && question.question_by ? question.question_by : question.question;
        const options = currentLanguage === 'by' && question.options_by ? question.options_by : question.options;
        
        reviewHTML += `
            <div class="test-question" style="margin-bottom: 25px; border-bottom: 1px solid rgba(100, 255, 218, 0.1); padding-bottom: 20px;">
                <div class="test-question-number">${currentLanguage === 'by' ? 'Пытанне' : 'Вопрос'} ${index + 1}</div>
                <div class="test-question-text">${questionText}</div>
                
                <div style="margin-top: 15px;">
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <div style="width: 20px; height: 20px; border-radius: 4px; background: ${isCorrect ? 'var(--accent-green)' : 'var(--accent-red)'}; 
                             margin-right: 10px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas ${isCorrect ? 'fa-check' : 'fa-times'}" style="color: white; font-size: 10px;"></i>
                        </div>
                        <span style="color: var(--text-primary); font-weight: 500;">
                            ${currentLanguage === 'by' ? 
                              (isCorrect ? 'Ваш адказ правільны' : 'Ваш адказ няправільны') : 
                              (isCorrect ? 'Ваш ответ правильный' : 'Ваш ответ неправильный')}
                        </span>
                    </div>
                    
                    <div style="display: grid; gap: 8px; margin-top: 15px;">
                        ${options.map((option, i) => {
                            let optionClass = '';
                            if (i === question.correct) {
                                optionClass = 'correct';
                            } else if (i === userAnswer && !isCorrect) {
                                optionClass = 'incorrect';
                            }
                            
                            return `
                                <div class="test-option ${optionClass}">
                                    <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                                    <div>${option}</div>
                                    ${i === question.correct ? 
                                        `<i class="fas fa-check" style="color: var(--accent-green); margin-left: auto;"></i>` : 
                                        (i === userAnswer && !isCorrect ? 
                                         `<i class="fas fa-times" style="color: var(--accent-red); margin-left: auto;"></i>` : '')}
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <div style="margin-top: 15px; padding: 10px; background: rgba(100, 255, 218, 0.05); border-radius: 8px; font-size: 13px; color: var(--text-secondary);">
                        <i class="fas fa-info-circle" style="color: var(--accent-blue); margin-right: 8px;"></i>
                        ${question.explanation}
                    </div>
                </div>
            </div>
        `;
    });
    
    reviewHTML += `
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="showTestsList()">
                    <i class="fas fa-arrow-left"></i> ${currentLanguage === 'by' ? 'Вярнуцца да тэстаў' : 'Вернуться к тестам'}
                </button>
            </div>
        </div>
    `;
    
    container.innerHTML = reviewHTML;
}

function resetTest() {
    if (testTimer) {
        clearInterval(testTimer);
        testTimer = null;
    }
    
    showTestsList();
    document.getElementById('submitTestBtn').style.display = 'none';
}

function getTestData(testId) {
    const tests = {
        basics: {
            name: currentLanguage === 'by' ? 'Асновы C++' : 'Основы C++',
            questions: [
                {
                    question: currentLanguage === 'by' ? 
                        "Які загалоўны файл патрэбны для ўводу/вываду ў C++?" : 
                        "Какой заголовочный файл нужен для ввода/вывода в C++?",
                    options: currentLanguage === 'by' ? 
                        ["iostream", "stdio.h", "conio.h", "streamio"] : 
                        ["iostream", "stdio.h", "conio.h", "streamio"],
                    correct: 0
                },
                {
                    question: currentLanguage === 'by' ? 
                        "Як аб'явіць зменную цэлага тыпу?" : 
                        "Как объявить переменную целого типа?",
                    options: currentLanguage === 'by' ? 
                        ["int x;", "integer x;", "number x;", "var x;"] : 
                        ["int x;", "integer x;", "number x;", "var x;"],
                    correct: 0
                },
                {
                    question: currentLanguage === 'by' ? 
                        "Які аператар выкарыстоўваецца для прысвойвання значэння?" : 
                        "Какой оператор используется для присваивания значения?",
                    options: currentLanguage === 'by' ? 
                        ["=", "==", ":=", "=>"] : 
                        ["=", "==", ":=", "=>"],
                    correct: 0
                }
            ]
        },
        oop: {
            name: currentLanguage === 'by' ? 'Аб\'ектна-арыентаванае праграмаванне' : 'Объектно-ориентированное программирование',
            questions: [
                {
                    question: currentLanguage === 'by' ? 
                        "Што такое клас у C++?" : 
                        "Что такое класс в C++?",
                    options: currentLanguage === 'by' ? 
                        ["Шаблон для стварэння аб'ектаў", "Функцыя", "Пераменная", "Бібліятэка"] : 
                        ["Шаблон для создания объектов", "Функция", "Переменная", "Библиотека"],
                    correct: 0
                }
            ]
        }
    };
    
    return tests[testId];
}

function renderTestQuestion(question, index) {
    return `
        <div class="test-question">
            <div class="test-question-number">${currentLanguage === 'by' ? 'Пытанне' : 'Вопрос'} ${index + 1}</div>
            <div class="test-question-text">${question.question}</div>
        </div>
        <div class="test-options">
            ${question.options.map((option, i) => `
                <div class="test-option ${testAnswers[index] === i ? 'selected' : ''}" 
                     onclick="selectTestAnswer(${index}, ${i})">
                    <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                    <div>${option}</div>
                </div>
            `).join('')}
        </div>
    `;
}

function selectTestAnswer(questionIndex, answerIndex) {
    testAnswers[questionIndex] = answerIndex;
    
    // Обновляем отображение
    const container = document.getElementById('testQuestionsContainer');
    const testData = getTestData(currentTest);
    
    container.querySelectorAll('.test-option').forEach((option, i) => {
        option.classList.remove('selected');
    });
    
    const selectedOption = container.querySelector(`.test-option:nth-child(${answerIndex + 1})`);
    if (selectedOption) {
        selectedOption.classList.add('selected');
    }
}

function nextTestQuestion() {
    const testData = getTestData(currentTest);
    if (!testData) return;
    
    const currentQuestion = document.getElementById('currentQuestionNum').textContent;
    const nextQuestionNum = parseInt(currentQuestion);
    
    if (nextQuestionNum < testData.questions.length) {
        const container = document.getElementById('testQuestionsContainer');
        container.innerHTML = renderTestQuestion(testData.questions[nextQuestionNum], nextQuestionNum);
        
        document.getElementById('currentQuestionNum').textContent = nextQuestionNum + 1;
    } else {
        submitTest();
    }
}

function startTestTimer() {
    if (testTimer) clearInterval(testTimer);
    
    testTimer = setInterval(() => {
        testTimeLeft--;
        
        const timerElement = document.getElementById('testTimer');
        if (timerElement) {
            timerElement.textContent = formatTime(testTimeLeft);
        }
        
        if (testTimeLeft <= 0) {
            clearInterval(testTimer);
            submitTest();
            showNotification(currentLanguage === 'by' ? 'Час скончыўся! Тэст аўтаматычна завершаны.' : 'Время вышло! Тест автоматически завершен.', "warning");
        }
        
        if (testTimeLeft <= 60) { 
            const timer = document.querySelector('.test-timer');
            if (timer) {
                timer.style.background = 'rgba(255, 85, 85, 0.2)';
                timer.style.color = 'var(--accent-red)';
            }
        }
    }, 1000);
}

function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

function submitTest() {
    if (testTimer) {
        clearInterval(testTimer);
        testTimer = null;
    }
    
    const testData = getTestData(currentTest);
    if (!testData) return;
    
    let correctAnswers = 0;
    const totalQuestions = testData.questions.length;
    
    // Проверяем ответы
    for (let i = 0; i < totalQuestions; i++) {
        if (testAnswers[i] === testData.questions[i].correct) {
            correctAnswers++;
        }
    }
    
    const score = Math.round((correctAnswers / totalQuestions) * 100);
    const xpEarned = correctAnswers * CONFIG.TEST_XP_PER_QUESTION;
    
    // Начисляем XP
    appState.user.xp += xpEarned;
    
    // Проверяем повышение уровня
    checkLevelUp();
    
    // Проверяем достижения
    if (score === 100) {
        unlockAchievement('test_champion');
    }
    
    // Показываем результаты
    const container = document.getElementById('testContainer');
    container.innerHTML = `
        <div class="test-container" style="text-align: center; padding: 40px;">
            <div style="font-size: 72px; color: ${score >= 80 ? 'var(--accent-green)' : 'var(--accent-red)'}; margin-bottom: 20px;">
                ${score >= 80 ? '🎉' : '📊'}
            </div>
            <h2 style="color: var(--text-primary); margin-bottom: 10px;">
                ${currentLanguage === 'by' ? 'Тэст завершаны!' : 'Тест завершен!'}
            </h2>
            <div style="font-size: 48px; font-weight: bold; color: var(--accent-blue); margin: 20px 0;">
                ${score}%
            </div>
            <div style="color: var(--text-secondary); margin-bottom: 30px;">
                ${currentLanguage === 'by' ? 
                    `Вы адказалі правільна на ${correctAnswers} з ${totalQuestions} пытанняў` :
                    `Вы ответили правильно на ${correctAnswers} из ${totalQuestions} вопросов`}
            </div>
            
            <div style="background: rgba(100, 255, 218, 0.1); border-radius: 15px; padding: 20px; margin: 30px 0; text-align: left;">
                <h4 style="color: var(--accent-blue); margin-bottom: 15px;">
                    <i class="fas fa-star"></i> ${currentLanguage === 'by' ? 'Вашыя вынікі' : 'Ваши результаты'}
                </h4>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Правільныя адказы' : 'Правильные ответы'}</span>
                    <span style="color: var(--accent-green); font-weight: bold;">${correctAnswers}/${totalQuestions}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Атрымана ачкоў' : 'Получено баллов'}</span>
                    <span style="color: var(--accent-green); font-weight: bold;">+${xpEarned} XP</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">${currentLanguage === 'by' ? 'Час' : 'Время'}</span>
                    <span style="color: var(--accent-purple); font-weight: bold;">${formatTime(600 - testTimeLeft)}</span>
                </div>
            </div>
            
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="showTestsList()">
                    <i class="fas fa-list"></i> ${currentLanguage === 'by' ? 'Усе тэсты' : 'Все тесты'}
                </button>
                <button class="btn btn-outline" onclick="reviewTestAnswers()">
                    <i class="fas fa-search"></i> ${currentLanguage === 'by' ? 'Паглядзець адказы' : 'Посмотреть ответы'}
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('submitTestBtn').style.display = 'none';
    
    showNotification(`${currentLanguage === 'by' ? 'Тэст завершаны!' : 'Тест завершен!'} (+${xpEarned} XP)`, "success");
    
    // Обновляем статистику
    updateUserStats();
    appState.user.completedTests++;
    
    logActivity(`${currentLanguage === 'by' ? 'Завяршыў тэст:' : 'Завершил тест:'} ${testData.name} (${score}%)`);
    
    saveUserState();
}

function resetTest() {
    if (testTimer) {
        clearInterval(testTimer);
        testTimer = null;
    }
    
    showTestsList();
    document.getElementById('submitTestBtn').style.display = 'none';
}

function reviewTestAnswers() {
    const testData = getTestData(currentTest);
    if (!testData) return;
    
    const container = document.getElementById('testContainer');
    let reviewHTML = `
        <div class="test-container">
            <div style="text-align: center; margin-bottom: 30px;">
                <h3 style="color: var(--accent-blue);">
                    <i class="fas fa-search"></i> ${currentLanguage === 'by' ? 'Правільныя адказы' : 'Правильные ответы'}
                </h3>
            </div>
    `;
    
    testData.questions.forEach((question, index) => {
        const userAnswer = testAnswers[index];
        const isCorrect = userAnswer === question.correct;
        
        reviewHTML += `
            <div class="test-question" style="margin-bottom: 25px; border-bottom: 1px solid rgba(100, 255, 218, 0.1); padding-bottom: 20px;">
                <div class="test-question-number">${currentLanguage === 'by' ? 'Пытанне' : 'Вопрос'} ${index + 1}</div>
                <div class="test-question-text">${question.question}</div>
                
                <div style="margin-top: 15px;">
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <div style="width: 20px; height: 20px; border-radius: 4px; background: ${isCorrect ? 'var(--accent-green)' : 'var(--accent-red)'}; 
                             margin-right: 10px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas ${isCorrect ? 'fa-check' : 'fa-times'}" style="color: white; font-size: 10px;"></i>
                        </div>
                        <span style="color: var(--text-primary); font-weight: 500;">
                            ${currentLanguage === 'by' ? 
                              (isCorrect ? 'Ваш адказ правільны' : 'Ваш адказ няправільны') : 
                              (isCorrect ? 'Ваш ответ правильный' : 'Ваш ответ неправильный')}
                        </span>
                    </div>
                    
                    <div style="display: grid; gap: 8px; margin-top: 15px;">
                        ${question.options.map((option, i) => {
                            let optionClass = '';
                            if (i === question.correct) {
                                optionClass = 'correct';
                            } else if (i === userAnswer && !isCorrect) {
                                optionClass = 'incorrect';
                            }
                            
                            return `
                                <div class="test-option ${optionClass}">
                                    <div class="option-letter">${String.fromCharCode(65 + i)}</div>
                                    <div>${option}</div>
                                    ${i === question.correct ? 
                                        `<i class="fas fa-check" style="color: var(--accent-green); margin-left: auto;"></i>` : 
                                        (i === userAnswer && !isCorrect ? 
                                         `<i class="fas fa-times" style="color: var(--accent-red); margin-left: auto;"></i>` : '')}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            </div>
        `;
    });
    
    reviewHTML += `
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="showTestsList()">
                    <i class="fas fa-arrow-left"></i> ${currentLanguage === 'by' ? 'Вярнуцца да тэстаў' : 'Вернуться к тестам'}
                </button>
            </div>
        </div>
    `;
    
    container.innerHTML = reviewHTML;
}

function showAllAchievements() {
    const container = document.getElementById('achievementsGrid');
    if (!container) return;
    
    // Показываем ВСЕ достижения
    container.innerHTML = '';
    
    ACHIEVEMENTS_DATA.forEach(achievement => {
        const name = currentLanguage === 'by' && achievement.name_by ? achievement.name_by : achievement.name;
        
        const achievementEl = document.createElement('div');
        achievementEl.className = `achievement-badge ${achievement.unlocked ? 'unlocked' : 'locked'}`;
        achievementEl.title = name;
        
        achievementEl.innerHTML = `
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-title">${name}</div>
        `;
        
        container.appendChild(achievementEl);
    });
    
    showNotification('Показаны все достижения', 'info');
}

// ================ СИМУЛЯТОР ПАМЯТИ ================
function initMemorySimulator() {
    // Инициализация ячеек памяти
    const cells = [];
    
    // Кодовая область
    for (let i = 0; i < 32; i++) {
        cells.push({
            address: `0x${(0x1000 + i * 4).toString(16).toUpperCase()}`,
            value: i < 8 ? `CODE${i}` : 'NOP',
            type: 'code',
            name: i < 8 ? `func${Math.floor(i/2)}` : null
        });
    }
    
    // Стек
    for (let i = 0; i < 16; i++) {
        cells.push({
            address: `0x${(0x2000 + i * 4).toString(16).toUpperCase()}`,
            value: i === 15 ? 'main' : i === 14 ? '0x1000' : i === 13 ? 'var1' : '...',
            type: 'stack',
            name: i === 15 ? 'RET' : i === 14 ? 'FP' : null
        });
    }
    
    // Куча
    for (let i = 0; i < 16; i++) {
        cells.push({
            address: `0x${(0x3000 + i * 4).toString(16).toUpperCase()}`,
            value: i < 4 ? `data${i}` : Math.floor(Math.random() * 100),
            type: 'heap',
            name: i < 4 ? `*ptr${i}` : null
        });
    }
    
    appState.memory.cells = cells;
    updateMemoryVisualization();
}

function updateMemoryVisualization() {
    const container = document.getElementById('memoryVisualization');
    container.innerHTML = '';
    
    appState.memory.cells.forEach((cell, index) => {
        const cellEl = document.createElement('div');
        cellEl.className = `memory-cell ${cell.type}`;
        cellEl.title = `${cell.name || ''}\nАдрес: ${cell.address}\nЗначение: ${cell.value}`;
        
        cellEl.innerHTML = `
            <div class="memory-address">${cell.address}</div>
            <div class="memory-value">${cell.value}</div>
        `;
        
        container.appendChild(cellEl);
    });
}

function stepMemory() {
    // Симулируем один шаг выполнения программы
    if (appState.memory.step < appState.memory.cells.length - 8) {
        appState.memory.step++;
        
        // Обновляем значения ячеек
        const step = appState.memory.step;
        const cells = [...appState.memory.cells];
        
        // Обновляем стек
        if (step > 0 && step < 4) {
            const stackIndex = 15 - step;
            cells[stackIndex].value = `var${step}`;
            cells[stackIndex].name = `local${step}`;
        }
        
        // Обновляем кучу
        if (step >= 4 && step < 8) {
            const heapIndex = 32 + 16 + (step - 4);
            cells[heapIndex].value = `alloc${step-3}`;
            cells[heapIndex].name = `*dynamic${step-3}`;
        }
        
        appState.memory.cells = cells;
        updateMemoryVisualization();
        
        showNotification(`Шаг ${step}: ${currentLanguage === 'by' ? 'Выканана аперацыя ў памяці' : 'Выполнена операция в памяти'}`, "info");
    } else {
        showNotification(currentLanguage === 'by' ? 'Сімуляцыя завершана' : 'Симуляция завершена', "success");
    }
}

function resetMemory() {
    appState.memory.step = 0;
    initMemorySimulator();
    showNotification(currentLanguage === 'by' ? 'Сімулятар памяці скінуты' : 'Симулятор памяти сброшен', "info");
}

function visualizeMemory() {
    // Показываем анимацию распределения памяти
    const container = document.getElementById('memoryVisualization');
    const cells = container.querySelectorAll('.memory-cell');
    
    cells.forEach((cell, index) => {
        setTimeout(() => {
            cell.style.transform = 'scale(1.1)';
            cell.style.boxShadow = '0 0 15px rgba(100, 255, 218, 0.5)';
            
            setTimeout(() => {
                cell.style.transform = 'scale(1)';
                cell.style.boxShadow = 'none';
            }, 300);
        }, index * 50);
    });
}

function explainMemory() {
    showNotification(`
        💡 ${currentLanguage === 'by' ? 'Тлумачэнне тыпаў памяці:' : 'Объяснение типов памяти:'}
        
        🔵 КОД: Выканальныя інструкцыі праграмы
        🟢 СТЭК: Лакальныя зменныя, аргументы функцый
        🟡 КУЧА: Дынамічная памяць (new/malloc)
        
        ${currentLanguage === 'by' ? 
        'Адрасы паказваюць месцазнаходжанне ў памяці.' :
        'Адреса указывают расположение в памяти.'}
    `, "info");
}   

// ================ ИГРЫ ================

function initGames() {
    loadGames();
}

// ================ ПРОЕКТЫ ================
function initProjects() {
    loadProjects();
}

function loadProjects() {
    const container = document.getElementById('projectsGrid');
    container.innerHTML = '';
    
    PROJECTS_DATA.forEach(project => {
        const translatedTitle = currentLanguage === 'by' && project.title_by ? project.title_by : project.title;
        const translatedDescription = currentLanguage === 'by' && project.description_by ? project.description_by : project.description;
        
        const projectEl = document.createElement('div');
        projectEl.className = `project-card ${project.status === 'completed' ? 'completed' : ''}`;
        projectEl.onclick = () => openProject(project.id);
        
        const difficultyClass = `project-difficulty difficulty-${project.difficulty}`;
        const difficultyText = project.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') :
                              project.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') :
                              (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый');
        
        projectEl.innerHTML = `
            <div class="project-header">
                <div class="project-title">${translatedTitle}</div>
                <div class="${difficultyClass}">${difficultyText}</div>
            </div>
            <div class="project-description">${translatedDescription}</div>
            <div style="display: flex; gap: 6px; margin: 15px 0; flex-wrap: wrap;">
                ${project.technologies.map(tech => `
                    <span style="padding: 4px 10px; background: rgba(100, 255, 218, 0.1); border-radius: 10px; font-size: 11px; color: var(--accent-blue);">
                        ${tech}
                    </span>
                `).join('')}
            </div>
            <div class="project-meta">
                <div style="display: flex; gap: 15px; font-size: 12px; color: var(--accent-purple);">
                    <div class="project-stat">
                        <i class="fas fa-star"></i>
                        <span>${project.points} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}</span>
                    </div>
                    <div class="project-stat">
                        <i class="fas fa-tasks"></i>
                        <span>${project.progress}%</span>
                    </div>
                </div>
                <div class="project-status ${project.status === 'completed' ? 'completed' : ''}">
                    ${project.status === 'completed' ? '✅ ' + (currentLanguage === 'by' ? 'Завершана' : 'Завершено') : 
                     '🔄 ' + (currentLanguage === 'by' ? 'У працэсе' : 'В процессе')}
                </div>
            </div>
        `;
        
        container.appendChild(projectEl);
    });
}

function showAllProjects() {
    loadProjects();
}

function createNewProject() {
    showNotification(currentLanguage === 'by' ? 'Стварэнне новага праекта...' : 'Создание нового проекта...', "info");
    
    // Создаем шаблон проекта
    const template = appState.projects.templates[0];
    const projectId = `project_${Date.now()}`;
    
    const newProject = {
        id: projectId,
        title: currentLanguage === 'by' ? 'Новы праект' : 'Новый проект',
        title_by: 'Новы праект',
        description: currentLanguage === 'by' ? 
            'Апішыце ваш праект тут' : 
            'Опишите ваш проект здесь',
        description_by: 'Апішыце ваш праект тут',
        difficulty: 'beginner',
        status: 'in-progress',
        technologies: ['C++'],
        points: 500,
        progress: 0,
        features: [
            currentLanguage === 'by' ? 'Дадайце функцыянальнасць' : 'Добавьте функциональность'
        ]
    };
    
    PROJECTS_DATA.push(newProject);
    loadProjects();
    
    // Открываем редактор с шаблоном
    Object.keys(template.files).forEach(filename => {
        appState.current.editor.files[filename] = template.files[filename];
    });
    
    appState.current.file = 'main.cpp';
    updateFileTabs();
    codeEditor.setValue(template.files['main.cpp']);
    
    switchSection('practice');
    
    showNotification(`🚀 ${currentLanguage === 'by' ? 'Новы праект створаны!' : 'Новый проект создан!'}`, "success");
    logActivity(currentLanguage === 'by' ? 'Стварыў новы праект' : 'Создал новый проект');
}

function openProject(projectId) {
    const project = PROJECTS_DATA.find(p => p.id === projectId);
    if (!project) return;
    
    // Загружаем код проекта (если есть)
    if (projectId === 'project1') {
        //планировщик задач 
        const taskManagerCode = `#include <iostream>
#include <vector>
#include <string>
#include <fstream>
#include <algorithm>

using namespace std;

// Структура для хранения задачи
struct Task {
    int id;
    string description;
    string priority; // "high", "medium", "low"
    bool completed;
    
    Task(int i, string desc, string prio) 
        : id(i), description(desc), priority(prio), completed(false) {}
    
    void display() const {
        string status = completed ? "[✓]" : "[ ]";
        cout << status << " Задача #" << id << " (" << priority << "): " << description << endl;
    }
};

class TaskManager {
private:
    vector<Task> tasks;
    int nextId;
    
public:
    TaskManager() : nextId(1) {}
    
    void addTask(const string& description, const string& priority) {
        tasks.push_back(Task(nextId++, description, priority));
        cout << "✅ Задача добавлена!" << endl;
    }
    
    void displayTasks() const {
        if (tasks.empty()) {
            cout << "📭 Список задач пуст" << endl;
            return;
        }
        
        cout << "\\n📋 Список задач (" << tasks.size() << "):" << endl;
        cout << "========================================" << endl;
        for (const auto& task : tasks) {
            task.display();
        }
        cout << "========================================\\n" << endl;
    }
    
    void completeTask(int taskId) {
        for (auto& task : tasks) {
            if (task.id == taskId) {
                task.completed = true;
                cout << "✅ Задача #" << taskId << " выполнена!" << endl;
                return;
            }
        }
        cout << "❌ Задача #" << taskId << " не найдена" << endl;
    }
    
    void saveToFile(const string& filename) const {
        ofstream file(filename);
        if (!file) {
            cerr << "❌ Ошибка сохранения файла" << endl;
            return;
        }
        
        for (const auto& task : tasks) {
            file << task.id << "|" << task.description << "|" 
                 << task.priority << "|" << task.completed << endl;
        }
        
        file.close();
        cout << "💾 Задачи сохранены в файл: " << filename << endl;
    }
    
    void loadFromFile(const string& filename) {
        ifstream file(filename);
        if (!file) {
            cerr << "❌ Файл не найден" << endl;
            return;
        }
        
        tasks.clear();
        string line;
        int maxId = 0;
        
        while (getline(file, line)) {
            size_t pos1 = line.find('|');
            size_t pos2 = line.find('|', pos1 + 1);
            size_t pos3 = line.find('|', pos2 + 1);
            
            if (pos1 != string::npos && pos2 != string::npos && pos3 != string::npos) {
                int id = stoi(line.substr(0, pos1));
                string desc = line.substr(pos1 + 1, pos2 - pos1 - 1);
                string prio = line.substr(pos2 + 1, pos3 - pos2 - 1);
                bool completed = line.substr(pos3 + 1) == "1";
                
                tasks.push_back(Task(id, desc, prio));
                tasks.back().completed = completed;
                
                maxId = max(maxId, id);
            }
        }
        
        nextId = maxId + 1;
        file.close();
        cout << "📂 Задачи загружены из файла: " << filename << endl;
    }
    
    void showStats() const {
        int total = tasks.size();
        int completed = count_if(tasks.begin(), tasks.end(), [](const Task& t) { return t.completed; });
        int highPriority = count_if(tasks.begin(), tasks.end(), [](const Task& t) { return t.priority == "high"; });
        
        cout << "\\n📊 Статистика задач:" << endl;
        cout << "   Всего задач: " << total << endl;
        cout << "   Выполнено: " << completed << " (" << (total > 0 ? (completed * 100 / total) : 0) << "%)" << endl;
        cout << "   Высокий приоритет: " << highPriority << endl;
    }
};

void displayMenu() {
    cout << "\\n=== ПЛАНИРОВЩИК ЗАДАЧ ===" << endl;
    cout << "1. 📝 Добавить задачу" << endl;
    cout << "2. 📋 Показать все задачи" << endl;
    cout << "3. ✅ Отметить как выполненную" << endl;
    cout << "4. 💾 Сохранить в файл" << endl;
    cout << "5. 📂 Загрузить из файла" << endl;
    cout << "6. 📊 Показать статистику" << endl;
    cout << "7. 🚪 Выход" << endl;
    cout << "\\nВыберите действие: ";
}

int main() {
    TaskManager manager;
    int choice;
    
    do {
        displayMenu();
        cin >> choice;
        cin.ignore(); // Очищаем буфер
        
        switch(choice) {
            case 1: {
                string description, priority;
                cout << "Введите описание задачи: ";
                getline(cin, description);
                cout << "Приоритет (high/medium/low): ";
                getline(cin, priority);
                manager.addTask(description, priority);
                break;
            }
            case 2:
                manager.displayTasks();
                break;
            case 3: {
                int taskId;
                cout << "Введите ID задачи: ";
                cin >> taskId;
                manager.completeTask(taskId);
                break;
            }
            case 4:
                manager.saveToFile("tasks.txt");
                break;
            case 5:
                manager.loadFromFile("tasks.txt");
                break;
            case 6:
                manager.showStats();
                break;
            case 7:
                cout << "\\n👋 До свидания!" << endl;
                break;
            default:
                cout << "❌ Неверный выбор" << endl;
        }
    } while (choice != 7);
    
    return 0;
}`;
        
        appState.current.editor.files['task_manager.cpp'] = taskManagerCode;
        appState.current.file = 'task_manager.cpp';
        updateFileTabs();
        codeEditor.setValue(taskManagerCode);
    }
    
    switchSection('practice');
    
    const projectTitle = currentLanguage === 'by' && project.title_by ? project.title_by : project.title;
    document.getElementById('practiceTitle').textContent = projectTitle;
    showNotification(`📂 ${currentLanguage === 'by' ? 'Праект адкрыты:' : 'Проект открыт:'} ${projectTitle}`, "info");
    
    logActivity(`${currentLanguage === 'by' ? 'Адкрыў праект:' : 'Открыл проект:'} ${project.title}`);
}

function importProject() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.cpp,.h,.hpp,.txt';
    input.multiple = true;
    
    input.onchange = function(e) {
        const files = e.target.files;
        let importedFiles = 0;
        
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();
            
            reader.onload = function(event) {
                const content = event.target.result;
                appState.current.editor.files[file.name] = content;
                importedFiles++;
                
                if (importedFiles === files.length) {
                    updateFileTabs();
                    
                    if (files.length === 1) {
                        appState.current.file = file.name;
                        codeEditor.setValue(content);
                    }
                    
                    showNotification(`📥 ${currentLanguage === 'by' ? 'Імпартавана файлаў:' : 'Импортировано файлов:'} ${files.length}`, "success");
                    logActivity(`${currentLanguage === 'by' ? 'Імпартаваў праект:' : 'Импортировал проект:'} ${files.length} файлов`);
                }
            };
            
            reader.readAsText(file);
        }
    };
    
    input.click();
}

function saveLabAsProject() {
    const lab = LABS_DATA.find(l => l.id === currentLab);
    if (!lab) return;
    
    const labCode = codeEditor.getValue();
    const projectId = `project_lab_${Date.now()}`;
    
    const newProject = {
        id: projectId,
        title: `${lab.title} (проект)`,
        title_by: `${lab.title_by || lab.title} (праект)`,
        description: `${currentLanguage === 'by' ? 'Лабараторная праца, пераўтвораная ў праект' : 'Лабораторная работа, преобразованная в проект'}: ${currentLanguage === 'by' && lab.description_by ? lab.description_by : lab.description}`,
        description_by: 'Лабараторная праца, пераўтвораная ў праект',
        difficulty: lab.difficulty,
        status: 'in-progress',
        technologies: ['C++', 'STL'],
        points: lab.points * 2,
        progress: 50,
        features: (currentLanguage === 'by' && lab.objectives_by ? lab.objectives_by : lab.objectives) || []
    };
    
    PROJECTS_DATA.push(newProject);
    loadProjects();
    
    // Сохраняем код проекта
    appState.current.editor.files[`lab_project.cpp`] = labCode;
    
    showNotification(`💾 ${currentLanguage === 'by' ? 'Лабараторная праца захавана як праект!' : 'Лабораторная работа сохранена как проект!'}`, "success");
    logActivity(`${currentLanguage === 'by' ? 'Захаваў лабу як праект:' : 'Сохранил лабу как проект:'} ${lab.title}`);
}

// ================ ДОСТИЖЕНИЯ ================
function initAchievements() {
    const container = document.getElementById('achievementsGrid');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (!ACHIEVEMENTS_DATA || ACHIEVEMENTS_DATA.length === 0) {
        container.innerHTML = `
            <div style="grid-column: span 3; text-align: center; padding: 20px; color: var(--accent-purple);">
                <i class="fas fa-trophy"></i><br>
                ${currentLanguage === 'by' ? 'Дасягненні загружаюцца...' : 'Достижения загружаются...'}
            </div>
        `;
        return;
    }
    
    ACHIEVEMENTS_DATA.slice(0, 6).forEach(achievement => {
        const name = currentLanguage === 'by' && achievement.name_by ? achievement.name_by : achievement.name;
        const description = currentLanguage === 'by' && achievement.description_by ? achievement.description_by : achievement.description;
        
        const achievementEl = document.createElement('div');
        achievementEl.className = `achievement-badge ${achievement.unlocked ? 'unlocked' : 'locked'}`;
        achievementEl.title = `${name}: ${description}`;
        achievementEl.onclick = () => showAchievementDetails(achievement);
        
        achievementEl.innerHTML = `
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-title">${name}</div>
        `;
        
        container.appendChild(achievementEl);
    });
}

function showAchievementDetails(achievement) {
    const name = currentLanguage === 'by' && achievement.name_by ? achievement.name_by : achievement.name;
    const description = currentLanguage === 'by' && achievement.description_by ? achievement.description_by : achievement.description;
    
    const status = achievement.unlocked ? 
        `✅ ${currentLanguage === 'by' ? 'Разблакавана' : 'Разблокировано'}` : 
        `🔒 ${currentLanguage === 'by' ? 'Заблакавана' : 'Заблокировано'}`;
    
    const xpText = `${achievement.xp} XP`;
    
    showNotification(`
        ${achievement.icon} <strong>${name}</strong>
        <br>${description}
        <br>${status} • ${xpText}
    `, achievement.unlocked ? "success" : "info");
}

function unlockAchievement(achievementId) {
    const achievement = ACHIEVEMENTS_DATA.find(a => a.id === achievementId);
    if (!achievement || achievement.unlocked) return;
    
    achievement.unlocked = true;
    
    if (!appState.user.achievements.includes(achievementId)) {
        appState.user.achievements.push(achievementId);
        appState.user.xp += achievement.xp;
        
        checkLevelUp();
        
        const name = currentLanguage === 'by' && achievement.name_by ? achievement.name_by : achievement.name;
        
        showNotification(`🏆 ${currentLanguage === 'by' ? 'Дасягненне разблакавана!' : 'Достижение разблокировано!'} <strong>${name}</strong> +${achievement.xp} XP`, "success");
        
        initAchievements();
        updateUserStats();
        
        logActivity(`${currentLanguage === 'by' ? 'Разблакаваў дасягненне:' : 'Разблокировал достижение:'} ${name}`);
        
        saveUserState();
    }
}

// ================ АКТИВНОСТЬ ЗА НЕДЕЛЮ ================
        function initActivityCalendar() {
            const container = document.getElementById('activityCalendar');
            if (!container) {
                console.warn('Контейнер календаря не найден');
                return;
            }
            
            container.innerHTML = '';
            
            const today = new Date();

            if (!appState.user.activity) {
                appState.user.activity = [];
            }
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                
                const day = date.getDate();
                const dayOfWeek = date.getDay();
                
                const activityCount = Math.floor(Math.random() * 5);
                
                const dayEl = document.createElement('div');
                dayEl.className = `calendar-day ${activityCount > 0 ? 'active' : ''}`;
                dayEl.textContent = day;
                dayEl.title = `${date.toLocaleDateString()}: ${activityCount} активностей`;
                
                // Добавляем подсказку
                dayEl.setAttribute('data-tooltip', `${activityCount} активностей`);
                
                container.appendChild(dayEl);
            }
        }

// ================ СИСТЕМА УВЕДОМЛЕНИЙ ================
function showNotification(message, type = "info") {
    if (!appState.user.settings.notifications.system) return;
    
    const container = document.getElementById('notificationContainer');
    
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <div style="display: flex; align-items: flex-start; gap: 15px;">
            <div style="font-size: 20px;">
                ${type === 'success' ? '✅' : 
                  type === 'warning' ? '⚠️' : 
                  type === 'error' ? '❌' : 'ℹ️'}
            </div>
            <div style="flex: 1;">
                ${message}
            </div>
            <div style="cursor: pointer;" onclick="this.parentElement.parentElement.remove()">
                <i class="fas fa-times" style="color: var(--accent-purple);"></i>
            </div>
        </div>
    `;
    
    container.appendChild(notification);
    
    // Показываем с анимацией
    setTimeout(() => {
        notification.classList.add('show');
    }, 10);
    
    // Автоматическое скрытие через 5 секунд
    setTimeout(() => {
        if (notification.parentElement) {
            notification.classList.remove('show');
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 500);
        }
    }, 5000);
}

function logActivity(action) {
    const now = new Date();
    const dateStr = now.toISOString().split('T')[0];
    const timeStr = now.toTimeString().split(' ')[0];
    
    appState.user.activity.push({
        action: action,
        date: dateStr,
        time: timeStr,
        timestamp: now.getTime()
    });
    
    // Ограничиваем историю 100 записями
    if (appState.user.activity.length > 100) {
        appState.user.activity = appState.user.activity.slice(-100);
    }
    
    // Обновляем календарь активности
    initActivityCalendar();
    
    saveUserState();
}

// ================ ЕЖЕДНЕВНЫЕ ЦЕЛИ ================
function checkDailyGoals() {
    const today = new Date().toISOString().split('T')[0];
    
    if (appState.user.dailyGoals.lastCompleted !== today) {
        // Новый день, сбрасываем цели
        appState.user.dailyGoals.today = {
            topics: 0,
            labs: 0,
            code: 0,
            tests: 0
        };
        
        if (appState.user.dailyGoals.lastCompleted && 
            new Date(today) - new Date(appState.user.dailyGoals.lastCompleted) === 86400000) {
            // Пользователь заходил вчера, увеличиваем серию
            appState.user.dailyGoals.streak++;
            appState.user.streak++;
            
            if (appState.user.dailyGoals.streak > 1) {
                showNotification(`🔥 ${currentLanguage === 'by' ? 'Серыя дзён:' : 'Серия дней:'} ${appState.user.dailyGoals.streak}!`, "success");
            }
        } else if (appState.user.dailyGoals.lastCompleted && 
                   new Date(today) - new Date(appState.user.dailyGoals.lastCompleted) > 86400000) {
            // Пропустили день, сбрасываем серию
            appState.user.dailyGoals.streak = 0;
            appState.user.streak = 0;
            showNotification(currentLanguage === 'by' ? 'Серыя парвана. Пачніце наноў!' : 'Серия прервана. Начните заново!', "warning");
        }
        
        appState.user.dailyGoals.lastCompleted = today;
        saveUserState();
    }
    
    if (appState.user.settings.notifications.progress) {
        const goals = appState.user.dailyGoals.today;
        const totalProgress = goals.topics + goals.labs + goals.tests;
        
        if (totalProgress === 0) {
            showNotification(`🎯 ${currentLanguage === 'by' ? 
                'Сённяшнія мэты:' : 'Сегодняшние цели:'}
                <br>• ${currentLanguage === 'by' ? 'Вывучыць 1 тэму' : 'Изучить 1 тему'}
                <br>• ${currentLanguage === 'by' ? 'Выканаць 1 лабу' : 'Выполнить 1 лабу'}
                <br>• ${currentLanguage === 'by' ? 'Напісаць 50 радкоў кода' : 'Написать 50 строк кода'}`, "info");
        }
    }
}

function updateDailyGoal(type) {
    if (!appState.user.dailyGoals.today) return;
    
    switch(type) {
        case 'topics':
            appState.user.dailyGoals.today.topics++;
            break;
        case 'labs':
            appState.user.dailyGoals.today.labs++;
            break;
        case 'code':
            appState.user.dailyGoals.today.code += 50; 
            break;
        case 'tests':
            appState.user.dailyGoals.today.tests++;
            break;
    }
    
    // Проверяем выполнение всех целей
    const goals = appState.user.dailyGoals.today;
    if (goals.topics >= 1 && goals.labs >= 1 && goals.code >= 50) {
        // Награда за выполнение всех целей
        const xpReward = 50;
        appState.user.xp += xpReward;
        
        showNotification(`🎉 ${currentLanguage === 'by' ? 
            'Усе сённяшнія мэты выкананы!' : 
            'Все сегодняшние цели выполнены!'} (+${xpReward} XP)`, "success");
        
        checkLevelUp();
        updateUserStats();
    }
    
    saveUserState();
}

// ================ СИСТЕМА УРОВНЕЙ ================
function checkLevelUp() {
    const maxXpForLevel = calculateMaxXpForLevel(appState.user.level);
    
    if (appState.user.xp >= maxXpForLevel) {
        // Повышение уровня
        appState.user.level++;
        appState.user.xp = appState.user.xp - maxXpForLevel;
        
        // Обновляем ранг
        updateUserRank();
        
        showNotification(`🎊 ${currentLanguage === 'by' ? 
            'Узровень павышаны!' : 
            'Уровень повышен!'} (${appState.user.level - 1} → ${appState.user.level})`, "success");
        
        // Обновляем статистику
        updateUserStats();
        
        // Проверяем достижения
        checkLevelAchievements();
        
        logActivity(`${currentLanguage === 'by' ? 
            'Павысіў узровень да' : 
            'Повысил уровень до'} ${appState.user.level}`);
    }
}

function calculateMaxXpForLevel(level) {
    return Math.floor(CONFIG.BASE_XP * Math.pow(CONFIG.XP_MULTIPLIER, level - 1));
}

function updateUserRank() {
    const level = appState.user.level;
    
    if (level <= 5) {
        appState.user.rank = currentLanguage === 'by' ? 'Пачатковец' : 'Новичок';
        appState.user.rank_by = 'Пачатковец';
    } else if (level <= 10) {
        appState.user.rank = currentLanguage === 'by' ? 'Вучань' : 'Ученик';
        appState.user.rank_by = 'Вучань';
    } else if (level <= 20) {
        appState.user.rank = currentLanguage === 'by' ? 'Знаўца' : 'Знаток';
        appState.user.rank_by = 'Знаўца';
    } else if (level <= 30) {
        appState.user.rank = currentLanguage === 'by' ? 'Эксперт' : 'Эксперт';
        appState.user.rank_by = 'Эксперт';
    } else {
        appState.user.rank = currentLanguage === 'by' ? 'Майстар' : 'Мастер';
        appState.user.rank_by = 'Майстар';
    }
    
    // Обновляем отображение ранга
    document.getElementById('userRank').textContent = currentLanguage === 'by' ? appState.user.rank_by : appState.user.rank;
    document.getElementById('profileRank').textContent = currentLanguage === 'by' ? appState.user.rank_by : appState.user.rank;
    document.getElementById('modalUserRank').textContent = currentLanguage === 'by' ? appState.user.rank_by : appState.user.rank;
}

function checkLevelAchievements() {
    // ДОБАВИТЬ ДОСТИЖЕНИЯ ЗА УРОВНИ!!!!!!!!!!!!!!!!!!!! ПОТОМ ВАЖНО!!!!!!!!!!!!!!!!    
    if (appState.user.level >= 10) {
    }
}

// ================ ОБНОВЛЕНИЕ ИНТЕРФЕЙСА ================
function updateUserStats() {
    // Обновляем статистику в профиле
    document.getElementById('completedTopics').textContent = appState.user.completedTopics.length;
    document.getElementById('completedLabs').textContent = appState.user.completedLabs;
    document.getElementById('codeLines').textContent = appState.user.codeLines;
    document.getElementById('achievementCount').textContent = appState.user.achievements.length;
    
    // Обновляем прогресс XP
    const maxXp = calculateMaxXpForLevel(appState.user.level);
    const xpPercentage = Math.min(100, Math.round((appState.user.xp / maxXp) * 100));
    
    document.getElementById('xpBarFill').style.width = `${xpPercentage}%`;
    document.getElementById('xpText').textContent = `${appState.user.xp}/${maxXp} XP`;
    
    document.getElementById('avatarLevel').textContent = appState.user.level;
    
    // Обновляем имя пользователя
    document.getElementById('userName').textContent = appState.user.name;
    document.getElementById('profileName').textContent = appState.user.name;
    document.getElementById('modalUserName').textContent = appState.user.name;
    
    saveUserState();
}

function updateProgressMap() {
    const map = document.getElementById('progressMap');
    map.innerHTML = '';
    
    // Создаем узлы прогресса
    const nodes = [
        { id: 'basics', title: 'Основы', title_by: 'Асновы', icon: '🏁', progress: 65 },
        { id: 'control', title: 'Управление', title_by: 'Кіраванне', icon: '🔄', progress: 30 },
        { id: 'functions', title: 'Функции', title_by: 'Функцыі', icon: '⚙️', progress: 10 },
        { id: 'arrays', title: 'Массивы', title_by: 'Масівы', icon: '📊', progress: 0 },
        { id: 'pointers', title: 'Указатели', title_by: 'Паказальнікі', icon: '📍', progress: 0 },
        { id: 'oop', title: 'ООП', title_by: 'ААП', icon: '🏗️', progress: 20 },
        { id: 'algorithms', title: 'Алгоритмы', title_by: 'Алгарытмы', icon: '🧮', progress: 0 }
    ];
    
    nodes.forEach((node, index) => {
        const nodeEl = document.createElement('div');
        nodeEl.className = `map-node ${node.progress === 100 ? 'completed' : ''} ${node.progress > 0 && node.progress < 100 ? 'current' : ''} ${node.progress === 0 ? 'locked' : ''}`;
        
        const title = currentLanguage === 'by' && node.title_by ? node.title_by : node.title;
        
        nodeEl.innerHTML = `
            <div class="node-icon">${node.icon}</div>
            <div class="node-label">${title}</div>
            <div class="node-progress">
                <div class="node-progress-bar" style="width: ${node.progress}%"></div>
            </div>
        `;
        
        // Добавляем превью при наведении
        const preview = document.createElement('div');
        preview.className = 'node-preview';
        preview.innerHTML = `
            <div style="font-weight: bold; color: var(--accent-blue); margin-bottom: 8px;">${title}</div>
            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">
                ${node.progress === 100 ? (currentLanguage === 'by' ? 'Завершана' : 'Завершено') :
                  node.progress > 0 ? `${currentLanguage === 'by' ? 'У працэсе' : 'В процессе'} (${node.progress}%)` :
                  (currentLanguage === 'by' ? 'Даступна пазней' : 'Доступно позже')}
            </div>
            <div style="font-size: 11px; color: var(--accent-purple);">
                ${currentLanguage === 'by' ? 'Націсніце, каб пачаць' : 'Нажмите, чтобы начать'}
            </div>
        `;
        
        nodeEl.appendChild(preview);
        
        // Добавляем обработчик клика
        nodeEl.onclick = () => {
            if (node.progress > 0 || index === 0) {
                goToModule(node.id);
            } else {
                showNotification(currentLanguage === 'by' ? 
                    'Спачатку вывучыце папярэднія тэмы' : 
                    'Сначала изучите предыдущие темы', "warning");
            }
        };
        
        map.appendChild(nodeEl);
        
        // Добавляем соединитель (кроме последнего)
        if (index < nodes.length - 1) {
            const connector = document.createElement('div');
            connector.className = 'node-connector';
            map.appendChild(connector);
        }
    });
}

function initModules() {
    // Обновляем модуль "Основы C++"
    const basicsContainer = document.getElementById('basicsTopics');
    basicsContainer.innerHTML = '';
    
    const basicsModule = COURSE_STRUCTURE.modules.find(m => m.id === 'basics');
    if (basicsModule) {
        basicsModule.topics.forEach(topic => {
            const isCompleted = appState.user.completedTopics.includes(topic.id);
            const isCurrent = appState.current.topic === topic.id && appState.current.module === 'basics';
            
            const title = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
            const tags = currentLanguage === 'by' && topic.tags_by ? topic.tags_by : topic.tags;
            
            const topicEl = document.createElement('div');
            topicEl.className = `topic-item ${isCurrent ? 'active' : ''} ${isCompleted ? 'completed' : ''}`;
            topicEl.onclick = () => {
                if (topic.type === 'theory') {
                    loadTopic('basics', topic.id);
                    switchSection('theory');
                } else if (topic.type === 'lab') {
                    openLabModal(topic.id);
                }
            };
            
            topicEl.innerHTML = `
                <div class="topic-checkbox">
                    ${isCompleted ? '<i class="fas fa-check" style="font-size: 10px;"></i>' : ''}
                </div>
                <div class="topic-text">
                    <div class="topic-title">${title}</div>
                    <div class="topic-meta">
                        <span>${topic.duration} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                        <span>•</span>
                        <span>${topic.points} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}</span>
                        ${tags && tags.length > 0 ? `
                            <span>•</span>
                            <span class="topic-tag">${tags[0]}</span>
                        ` : ''}
                    </div>
                </div>
            `;
            
            basicsContainer.appendChild(topicEl);
        });
    }
}

function goToModule(moduleId) {
    const module = COURSE_STRUCTURE.modules.find(m => m.id === moduleId);
    if (!module) return;
    
    // Находим первую доступную тему
    let firstTopic = null;
    
    if (moduleId === 'basics') {
        firstTopic = module.topics[0];
    } else {
        // Для других модулей проверяем прогресс
        firstTopic = module.topics.find(topic => 
            !appState.user.completedTopics.includes(topic.id)
        ) || module.topics[0];
    }
    
    if (firstTopic) {
        if (firstTopic.type === 'theory') {
            loadTopic(moduleId, firstTopic.id);
            switchSection('theory');
        } else if (firstTopic.type === 'lab') {
            openLabModal(firstTopic.id);
        }
    }
}

// ================ КАРТА ПРОГРЕССА (СКРЫТИЕ/ПОКАЗ) ================
function toggleProgressMap() {
    const map = document.getElementById('progressMap');
    const btn = document.getElementById('toggleMapBtn');
    
    map.classList.toggle('collapsed');
    
    if (map.classList.contains('collapsed')) {
        btn.innerHTML = '<i class="fas fa-chevron-down"></i>';
        btn.title = currentLanguage === 'by' ? 'Паказаць карту прагрэсу' : 'Показать карту прогресса';
    } else {
        btn.innerHTML = '<i class="fas fa-chevron-up"></i>';
        btn.title = currentLanguage === 'by' ? 'Схаваць карту прагрэсу' : 'Скрыть карту прогресса';
    }
}




// ================ ЯЗЫК ИНТЕРФЕЙСА ================
function applyLanguage(lang) {
    currentLanguage = lang;
    appState.user.settings.language = lang;
    
    // Обновляем текст в навигации
    document.querySelectorAll('.nav-item').forEach(item => {
        const section = item.getAttribute('data-section');
        let text = '';
        
        switch(section) {
            case 'home':
                text = lang === 'by' ? 'Галоўная' : 'Главная';
                break;
            case 'theory':
                text = lang === 'by' ? 'Тэорыя' : 'Теория';
                break;
            case 'labs':
                text = lang === 'by' ? 'Лабараторныя' : 'Лабораторные';
                break;
            case 'tests':
                text = lang === 'by' ? 'Тэсты' : 'Тесты';
                break;
            case 'practice':
                text = lang === 'by' ? 'Практыка' : 'Практика';
                break;
            case 'games':
                text = lang === 'by' ? 'Гульні' : 'Игры';
                break;
            case 'projects':
                text = lang === 'by' ? 'Праекты' : 'Проекты';
                break;
            case 'games':
                text = lang === 'by' ? 'Гульні' : 'Игры';
                break;
        }
        
        const icon = item.querySelector('i').cloneNode(true);
        item.innerHTML = '';
        item.appendChild(icon);
        item.appendChild(document.createTextNode(' ' + text));
    });
    
    // Обновляем хлебные крошки
    updateBreadcrumbs();
    
    // Обновляем заголовки
    if (appState.current.section === 'theory' && appState.current.topic) {
        const module = COURSE_STRUCTURE.modules.find(m => m.id === appState.current.module);
        if (module) {
            const topic = module.topics.find(t => t.id === appState.current.topic);
            if (topic) {
                const title = lang === 'by' && topic.title_by ? topic.title_by : topic.title;
                document.getElementById('currentTopicTitle').textContent = title;
            }
        }
    }
    
    // Обновляем контент страницы
    switch(appState.current.section) {
        case 'home':
            initHomeContent();
            break;
        case 'labs':
            loadLabsGrid();
            break;
        case 'projects':
            loadProjects();
            break;
    }
    
    // Обновляем прогресс-путь
    initProgressPath();
    
    // Обновляем достижения
    initAchievements();
    
    // Обновляем статистику пользователя
    updateUserRank();
    updateUserStats();

    
    // Показываем уведомление
    const languageName = CONFIG.LANGUAGES[lang];
    showNotification(`🌐 ${currentLanguage === 'by' ? 'Мова зменена на' : 'Язык изменен на'} ${languageName}`, "success");
    
    saveUserState();
}

// ================ ТЕМЫ ОФОРМЛЕНИЯ ================
function applyTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    appState.user.settings.theme = theme;
    
    // Обновляем активную тему в настройках
    document.querySelectorAll('.theme-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    document.querySelector(`.theme-${theme}`).classList.add('selected');
    
    saveUserState();
}

// ================ РЕДАКТОР АВАТАРА ================
let cropper; 

function initAvatar() {
    // Загружаем аватар из состояния
    const avatar = appState.user.avatar.current;
    const avatarElement = document.getElementById('userAvatar');
    const profileAvatar = document.getElementById('profileAvatar');
    
    if (avatar) {
        // Если есть сохраненный аватар
        avatarElement.style.backgroundImage = `url(${avatar})`;
        avatarElement.innerHTML = '';
        profileAvatar.style.backgroundImage = `url(${avatar})`;
        profileAvatar.innerHTML = '';
    } else {
        // Генерируем инициалы
        const initials = appState.user.name.charAt(0).toUpperCase();
        avatarElement.innerHTML = initials;
        avatarElement.style.backgroundImage = '';
        profileAvatar.innerHTML = initials;
        profileAvatar.style.backgroundImage = '';
    }
    
    // Инициализируем историю аватаров
    updateAvatarHistory();
}

function openAvatarEditor() {
    document.body.style.overflow = 'hidden'; 
    document.getElementById('avatarModal').classList.add('active');
    
    // Инициализируем редактор аватара
    const avatarPreview = document.getElementById('avatarPreview');
    const avatarPlaceholder = document.getElementById('avatarPlaceholder');
    const currentAvatar = appState.user.avatar.current;
    
    if (currentAvatar) {
        avatarPreview.src = currentAvatar;
        avatarPreview.style.display = 'block';
        avatarPlaceholder.style.display = 'none';
    } else {
        avatarPreview.style.display = 'none';
        avatarPlaceholder.style.display = 'block';
    }
    
    // Настраиваем перетаскивание файлов
    const dropZone = document.getElementById('avatarDropZone');
    dropZone.addEventListener('dragover', handleDragOver);
    dropZone.addEventListener('drop', handleDrop);
    dropZone.addEventListener('click', () => {
        document.getElementById('avatarUpload').click();
    });
}

function handleAvatarUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    // Проверяем размер файла
    if (file.size > CONFIG.MAX_AVATAR_SIZE) {
        showNotification(currentLanguage === 'by' ? 
            'Файл занадта вялікі. Максімальны памер: 5MB' : 
            'Файл слишком большой. Максимальный размер: 5MB', "error");
        return;
    }
    
    // Проверяем тип файла
    if (!file.type.match('image.*')) {
        showNotification(currentLanguage === 'by' ? 
            'Калі ласка, выберыце выяву' : 
            'Пожалуйста, выберите изображение', "error");
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const avatarPreview = document.getElementById('avatarPreview');
        const avatarPlaceholder = document.getElementById('avatarPlaceholder');
        
        avatarPreview.src = e.target.result;
        avatarPreview.style.display = 'block';
        avatarPlaceholder.style.display = 'none';
        
        // Инициализируем Cropper.js
        if (cropper) {
            cropper.destroy();
        }
        const image = document.getElementById('avatarPreview');
        cropper = new Cropper(image, {
            aspectRatio: 1,
            viewMode: 1,
            autoCropArea: 1,
            background: false,
            cropBoxResizable: true,
            cropBoxMovable: true,
        });
        
        showNotification(currentLanguage === 'by' ? 
            'Выява запампавана паспяхова' : 
            'Изображение загружено успешно', "success");
    };
    
    reader.readAsDataURL(file);
}

function handleDragOver(e) {
    e.preventDefault();
    e.stopPropagation();
    e.dataTransfer.dropEffect = 'copy';
    
    const dropZone = document.getElementById('avatarDropZone');
    dropZone.classList.add('dragover');
}

function handleDrop(e) {
    e.preventDefault();
    e.stopPropagation();
    
    const dropZone = document.getElementById('avatarDropZone');
    dropZone.classList.remove('dragover');
    
    const files = e.dataTransfer.files;
    if (files.length > 0) {
        const file = files[0];
        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);
        document.getElementById('avatarUpload').files = dataTransfer.files;
        
        // Запускаем обработку
        handleAvatarUpload({ target: { files: dataTransfer.files } });
    }
}

function generateAvatar() {
    // Генерируем случайный аватар
    const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];
    const color = colors[Math.floor(Math.random() * colors.length)];
    
    const canvas = document.createElement('canvas');
    canvas.width = 200;
    canvas.height = 200;
    const ctx = canvas.getContext('2d');
    
    // Фон
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, 200, 200);
    
    // Рисуем градиентный круг для красоты
    const gradient = ctx.createRadialGradient(100, 100, 0, 100, 100, 100);
    gradient.addColorStop(0, 'rgba(255,255,255,0.8)');
    gradient.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.arc(100, 100, 100, 0, Math.PI * 2);
    ctx.fill();
    
    // Инициалы
    const initials = appState.user.name.charAt(0).toUpperCase();
    ctx.fillStyle = '#FFFFFF';
    ctx.font = 'bold 80px "Segoe UI", Arial, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(initials, 100, 100);
    
    const avatarUrl = canvas.toDataURL('image/png');
    
    const avatarPreview = document.getElementById('avatarPreview');
    const avatarPlaceholder = document.getElementById('avatarPlaceholder');
    
    avatarPreview.src = avatarUrl;
    avatarPreview.style.display = 'block';
    avatarPlaceholder.style.display = 'none';
    
    // Уничтожаем старый cropper, если есть
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    
    showNotification(currentLanguage === 'by' ? 
        'Аватар згенераваны аўтаматычна' : 
        'Аватар сгенерирован автоматически', "success");
}

function saveAvatar() {
    const avatarPreview = document.getElementById('avatarPreview');
    
    if (!avatarPreview.src || avatarPreview.src === window.location.href || !avatarPreview.src.includes('data:image')) {
        showNotification(currentLanguage === 'by' ? 
            'Калі ласка, загрузіце аватар спачатку' : 
            'Пожалуйста, загрузите аватар сначала', "error");
        return;
    }
    
    let avatarUrl = avatarPreview.src;

    if (cropper) {
        const canvas = cropper.getCroppedCanvas({
            width: 200,
            height: 200,
        });
        avatarUrl = canvas.toDataURL('image/png');
    }
    
    // Сохраняем текущий аватар
    appState.user.avatar.current = avatarUrl;
    
    // Добавляем в историю
    if (!appState.user.avatar.history.includes(avatarUrl)) {
        appState.user.avatar.history.unshift(avatarUrl);
        
        // Ограничиваем историю
        if (appState.user.avatar.history.length > CONFIG.AVATAR_HISTORY_LIMIT) {
            appState.user.avatar.history = appState.user.avatar.history.slice(0, CONFIG.AVATAR_HISTORY_LIMIT);
        }
    }
    
    // Обновляем отображение аватара
    initAvatar();
    updateAvatarHistory();
    
    closeModal();
    
    showNotification(currentLanguage === 'by' ? 
        'Аватар паспяхова захаваны' : 
        'Аватар успешно сохранен', "success");
    
    logActivity(currentLanguage === 'by' ? 
        'Абнавіў аватар прафіля' : 
        'Обновил аватар профиля');
    
    saveUserState();
}

function updateAvatarHistory() {
    const container = document.getElementById('avatarHistory');
    if (!container) return;
    
    container.innerHTML = '';
    
    appState.user.avatar.history.forEach((avatarUrl, index) => {
        const avatarImg = document.createElement('img');
        avatarImg.className = 'history-avatar';
        avatarImg.src = avatarUrl;
        avatarImg.onclick = () => {
            // Удаляем активный класс у всех
            container.querySelectorAll('.history-avatar').forEach(img => {
                img.classList.remove('active');
            });
            
            // Добавляем активный класс выбранному
            avatarImg.classList.add('active');
            
            // Обновляем превью
            const avatarPreview = document.getElementById('avatarPreview');
            avatarPreview.src = avatarUrl;
            avatarPreview.style.display = 'block';
            document.getElementById('avatarPlaceholder').style.display = 'none';
            
            // Уничтожаем старый cropper, если есть
            if (cropper) {
                cropper.destroy();
                cropper = null;
            }
        };
        
        container.appendChild(avatarImg);
    });
}

function applyFilter(filter) {
    if (!cropper) {
        showNotification(currentLanguage === 'by' ? 
            'Спачатку загрузіце выяву' : 
            'Сначала загрузите изображение', "warning");
        return;
    }
    
    const canvas = cropper.getCroppedCanvas();
    const ctx = canvas.getContext('2d');
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;
    
    switch(filter) {
        case 'brightness':
            for (let i = 0; i < data.length; i += 4) {
                data[i] = Math.min(255, data[i] + 30);
                data[i+1] = Math.min(255, data[i+1] + 30);
                data[i+2] = Math.min(255, data[i+2] + 30);
            }
            break;
        case 'contrast':
            const factor = 1.5;
            for (let i = 0; i < data.length; i += 4) {
                data[i] = Math.min(255, Math.max(0, 128 + (data[i] - 128) * factor));
                data[i+1] = Math.min(255, Math.max(0, 128 + (data[i+1] - 128) * factor));
                data[i+2] = Math.min(255, Math.max(0, 128 + (data[i+2] - 128) * factor));
            }
            break;
        case 'grayscale':
            for (let i = 0; i < data.length; i += 4) {
                const gray = 0.3 * data[i] + 0.59 * data[i+1] + 0.11 * data[i+2];
                data[i] = data[i+1] = data[i+2] = gray;
            }
            break;
        case 'sepia':
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i+1];
                const b = data[i+2];
                data[i] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);
                data[i+1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);
                data[i+2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);
            }
            break;
        default:
            return;
    }
    
    ctx.putImageData(imageData, 0, 0);
    
    // Обновляем превью с фильтром
    const filteredImage = canvas.toDataURL('image/png');
    const avatarPreview = document.getElementById('avatarPreview');
    avatarPreview.src = filteredImage;
    
    // Уничтожаем старый cropper и создаем новый для обновленного изображения
    cropper.destroy();
    cropper = new Cropper(avatarPreview, {
        aspectRatio: 1,
        viewMode: 1,
        autoCropArea: 1,
        background: false,
        cropBoxResizable: true,
        cropBoxMovable: true,
    });
    
    showNotification(`${currentLanguage === 'by' ? 'Фільтр ужыты:' : 'Фильтр применен:'} ${filter}`, "info");
}

function addFrame() {
    if (!cropper) {
        showNotification(currentLanguage === 'by' ? 'Спачатку загрузіце выяву' : 'Сначала загрузите изображение', "warning");
        return;
    }
    
    const canvas = cropper.getCroppedCanvas();
    const ctx = canvas.getContext('2d');
    
    // Рисуем рамку
    ctx.strokeStyle = '#64ffda';
    ctx.lineWidth = 8;
    ctx.strokeRect(4, 4, canvas.width - 8, canvas.height - 8);
    
    // Добавляем декоративные уголки
    ctx.fillStyle = '#64ffda';
    ctx.beginPath();
    ctx.moveTo(10, 10);
    ctx.lineTo(30, 10);
    ctx.lineTo(10, 30);
    ctx.closePath();
    ctx.fill();
    
    ctx.beginPath();
    ctx.moveTo(canvas.width - 10, 10);
    ctx.lineTo(canvas.width - 30, 10);
    ctx.lineTo(canvas.width - 10, 30);
    ctx.closePath();
    ctx.fill();
    
    ctx.beginPath();
    ctx.moveTo(10, canvas.height - 10);
    ctx.lineTo(30, canvas.height - 10);
    ctx.lineTo(10, canvas.height - 30);
    ctx.closePath();
    ctx.fill();
    
    ctx.beginPath();
    ctx.moveTo(canvas.width - 10, canvas.height - 10);
    ctx.lineTo(canvas.width - 30, canvas.height - 10);
    ctx.lineTo(canvas.width - 10, canvas.height - 30);
    ctx.closePath();
    ctx.fill();
    
    const framedImage = canvas.toDataURL('image/png');
    const avatarPreview = document.getElementById('avatarPreview');
    avatarPreview.src = framedImage;
    
    // Уничтожаем старый cropper и создаем новый
    cropper.destroy();
    cropper = new Cropper(avatarPreview, {
        aspectRatio: 1,
        viewMode: 1,
        autoCropArea: 1,
        background: false,
        cropBoxResizable: true,
        cropBoxMovable: true,
    });
    
    showNotification(currentLanguage === 'by' ? 'Рамка дададзена' : 'Рамка добавлена', "info");
}

function addSticker() {
    if (!cropper) {
        showNotification(currentLanguage === 'by' ? 'Спачатку загрузіце выяву' : 'Сначала загрузите изображение', "warning");
        return;
    }
    
    const canvas = cropper.getCroppedCanvas();
    const ctx = canvas.getContext('2d');
    
    // Список стикеров (можно расширить)
    const stickers = ['⭐', '❤️', '🔥', '💎', '🚀', '🎓'];
    const randomSticker = stickers[Math.floor(Math.random() * stickers.length)];
    
    ctx.font = 'bold 40px "Segoe UI", Arial, sans-serif';
    ctx.fillStyle = '#ffd700';
    ctx.shadowColor = 'rgba(0,0,0,0.5)';
    ctx.shadowBlur = 10;
    ctx.shadowOffsetX = 2;
    ctx.shadowOffsetY = 2;
    ctx.fillText(randomSticker, canvas.width - 60, 60);
    
    // Сбрасываем тень
    ctx.shadowColor = 'transparent';
    ctx.shadowBlur = 0;
    
    const stickerImage = canvas.toDataURL('image/png');
    const avatarPreview = document.getElementById('avatarPreview');
    avatarPreview.src = stickerImage;
    
    // Уничтожаем старый cropper и создаем новый
    cropper.destroy();
    cropper = new Cropper(avatarPreview, {
        aspectRatio: 1,
        viewMode: 1,
        autoCropArea: 1,
        background: false,
        cropBoxResizable: true,
        cropBoxMovable: true,
    });
    
    showNotification(`${currentLanguage === 'by' ? 'Стыкер дададзены:' : 'Стикер добавлен:'} ${randomSticker}`, "info");
}

function cropAvatar() {
    if (!cropper) {
        showNotification(currentLanguage === 'by' ? 'Спачатку загрузіце выяву' : 'Сначала загрузите изображение', "warning");
        return;
    }
    
    // Cropper уже активен, просто подсвечиваем
    showNotification(currentLanguage === 'by' ? 
        'Выберыце вобласць для кадравання' : 
        'Выберите область для кадрирования', "info");
}

function resetAvatar() {
    const avatarPreview = document.getElementById('avatarPreview');
    const avatarPlaceholder = document.getElementById('avatarPlaceholder');
    
    avatarPreview.style.display = 'none';
    avatarPlaceholder.style.display = 'block';
    
    if (cropper) {
        cropper.destroy();
        cropper = null;
    }
    
    showNotification(currentLanguage === 'by' ? 'Аватар скінуты' : 'Аватар сброшен', "success");
}

function exportAvatar() {
    const avatarPreview = document.getElementById('avatarPreview');
    
    if (!avatarPreview.src || avatarPreview.src === window.location.href) {
        showNotification(currentLanguage === 'by' ? 
            'Няма аватара для экспарту' : 
            'Нет аватара для экспорта', "error");
        return;
    }
    
    // Создаем ссылку для скачивания
    const link = document.createElement('a');
    link.download = `avatar_${appState.user.name}_${Date.now()}.png`;
    link.href = avatarPreview.src;
    link.click();
    
    showNotification(currentLanguage === 'by' ? 
        'Аватар экспартаваны' : 
        'Аватар экспортирован', "success");
}
// ================ СЕРТИФИКАТ ================

            function generateCertificate() {
                document.getElementById('certificateModal').classList.add('active');
                
                // Заполняем данные в сертификате
                const userName = appState.user.name || "Студент";
                const userRank = appState.user.rank || "НАЧИНАЮЩИЙ";
                
                document.getElementById('certificateName').textContent = userName.toUpperCase();
                document.getElementById('certificateLevel').textContent = userRank.toUpperCase();
                
                // Рассчитываем результат на основе прогресса
                const totalLessons = 15; // Общее количество уроков
                const completedLessons = appState.user.progress?.completedLessons?.length || 0;
                const score = Math.min(100, Math.round((completedLessons / totalLessons) * 100));
                
                document.getElementById('certificateScore').textContent = `${score}%`;
                
                // Устанавливаем дату
                const today = new Date();
                const dateStr = today.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                document.getElementById('certificateDate').textContent = dateStr;
                
                // Показываем уведомление
                showNotification(
                    currentLanguage === 'by' 
                        ? 'Сертыфікат створаны! Цяпер вы можаце спампаваць ім або падзяліцца ім.' 
                        : 'Сертификат создан! Теперь вы можете скачать его или поделиться им.',
                    "success"
                );
            }

            function downloadCertificate() {
                const certificate = document.getElementById('certificateCanvas');
                
                // Проверяем, подключена ли библиотека html2canvas
                if (typeof html2canvas === 'undefined') {
                    showNotification(
                        currentLanguage === 'by' 
                            ? 'Падключыце бібліятэку html2canvas для экспарту' 
                            : 'Подключите библиотеку html2canvas для экспорта',
                        "error"
                    );
                    
                    // Альтернативный вариант - предложить ссылку на библиотеку
                    const loadLibrary = confirm(
                        currentLanguage === 'by'
                            ? 'Бібліятэка html2canvas не падключана. Хочаце загрузіць яе цяпер?'
                            : 'Библиотека html2canvas не подключена. Хотите загрузить ее сейчас?'
                    );
                    
                    if (loadLibrary) {
                        const script = document.createElement('script');
                        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                        script.onload = () => {
                            showNotification(
                                currentLanguage === 'by' 
                                    ? 'Бібліятэка загружана. Паспрабуйце зноў.' 
                                    : 'Библиотека загружена. Попробуйте снова.',
                                "success"
                            );
                        };
                        document.head.appendChild(script);
                    }
                    return;
                }
                
                // Показываем загрузку
                showNotification(
                    currentLanguage === 'by' 
                        ? 'Стварэнне выявы сертыфіката...' 
                        : 'Создание изображения сертификата...',
                    "info"
                );
                
                // Используем html2canvas для создания изображения
                html2canvas(certificate, {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: null,
                    logging: false,
                    allowTaint: true
                }).then(canvas => {
                    // Создаем ссылку для скачивания
                    const link = document.createElement('a');
                    link.download = `Сертификат_${appState.user.name || 'Студент'}_${new Date().getFullYear()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    
                    showNotification(
                        currentLanguage === 'by' 
                            ? 'Сертыфікат паспяхова спампаваны!' 
                            : 'Сертификат успешно скачан!',
                        "success"
                    );
                }).catch(error => {
                    console.error('Ошибка при создании сертификата:', error);
                    showNotification(
                        currentLanguage === 'by' 
                            ? 'Памылка пры стварэнні сертыфіката' 
                            : 'Ошибка при создании сертификата',
                        "error"
                    );
                });
            }

            function shareCertificate() {
                if (navigator.share) {
                    navigator.share({
                        title: currentLanguage === 'by' 
                            ? 'Мой сертыфікат па Основах Алгарытмізацыі' 
                            : 'Мой сертификат по Основам Алгоритмизации',
                        text: currentLanguage === 'by' 
                            ? `Я атрымаў сертыфікат па курсе "Асновы алгарытмізацыі і праграмавання"! Узровень: ${appState.user.rank}. Вынік: ${document.getElementById('certificateScore').textContent}` 
                            : `Я получил сертификат по курсу "Основы алгоритмизации и программирования"! Уровень: ${appState.user.rank}. Результат: ${document.getElementById('certificateScore').textContent}`,
                        url: window.location.href
                    }).then(() => {
                        showNotification(
                            currentLanguage === 'by' 
                                ? 'Дзякуй за дзель!' 
                                : 'Спасибо, что поделились!',
                            "success"
                        );
                    }).catch(error => {
                        if (error.name !== 'AbortError') {
                            showNotification(
                                currentLanguage === 'by' 
                                    ? 'Памылка пры дзелі' 
                                    : 'Ошибка при отправке',
                                "error"
                            );
                        }
                    });
                } else {
                    //  для браузеров без поддержки Web Share API
                    const shareText = currentLanguage === 'by' 
                        ? `Я атрымаў сертыфікат па курсе "Асновы алгарытмізацыі і праграмавання"! Узровень: ${appState.user.rank}. Вынік: ${document.getElementById('certificateScore').textContent}. Паглядзець: ${window.location.href}`
                        : `Я получил сертификат по курсу "Основы алгоритмизации и программирования"! Уровень: ${appState.user.rank}. Результат: ${document.getElementById('certificateScore').textContent}. Посмотреть: ${window.location.href}`;
                    
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(shareText).then(() => {
                            showNotification(
                                currentLanguage === 'by' 
                                    ? 'Спасылка скапіявана ў буфер абмену!' 
                                    : 'Ссылка скопирована в буфер обмена!',
                                "success"
                            );
                        });
                    } else {
                        // Старый метод
                        const textArea = document.createElement('textarea');
                        textArea.value = shareText;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        showNotification(
                            currentLanguage === 'by' 
                                ? 'Спасылка скапіявана ў буфер абмену!' 
                                : 'Ссылка скопирована в буфер обмена!',
                            "success"
                        );
                    }
                }
            }

            function printCertificate() {
                // Сохраняем оригинальные стили
                const originalStyles = {};
                const elements = document.querySelectorAll('.certificate-container, .certificate-controls');
                
                elements.forEach(el => {
                    originalStyles[el.className] = {
                        boxShadow: el.style.boxShadow,
                        margin: el.style.margin
                    };
                    
                    // Оптимизируем для печати
                    if (el.classList.contains('certificate-container')) {
                        el.style.boxShadow = 'none';
                        el.style.margin = '0 auto';
                    }
                });
                
                // Скрываем кнопки при печати
                const controls = document.querySelector('.certificate-controls');
                if (controls) {
                    controls.style.display = 'none';
                }
                
                // Печать
                window.print();
                
                // Восстанавливаем стили
                setTimeout(() => {
                    elements.forEach(el => {
                        const styles = originalStyles[el.className];
                        if (styles) {
                            el.style.boxShadow = styles.boxShadow;
                            el.style.margin = styles.margin;
                        }
                    });
                    
                    if (controls) {
                        controls.style.display = 'flex';
                    }
                }, 100);
            }

            // Функция для закрытия модального окна
            function closeCertificateModal() {
                document.getElementById('certificateModal').classList.remove('active');
            }


// ================ ТАБЛИЦА ЛИДЕРОВ ================
function showLeaderboard() {
    document.getElementById('leaderboardModal').classList.add('active');
    changeLeaderboardPeriod('all');
}

function changeLeaderboardPeriod(period) {
    const leaderboardData = getLeaderboardData(period);
    const tbody = document.getElementById('leaderboardBody');
    
    tbody.innerHTML = '';
    
    leaderboardData.forEach((user, index) => {
        const row = document.createElement('tr');
        
        let rankClass = '';
        if (index === 0) rankClass = 'leaderboard-rank-1';
        else if (index === 1) rankClass = 'leaderboard-rank-2';
        else if (index === 2) rankClass = 'leaderboard-rank-3';
        
        row.innerHTML = `
            <td class="leaderboard-rank ${rankClass}">${index + 1}</td>
            <td>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 30px; height: 30px; border-radius: 50%; background: ${user.avatarColor}; 
                         display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                        ${user.name.charAt(0)}
                    </div>
                    <div>
                        <div style="font-weight: 600;">${user.name}</div>
                        <div style="font-size: 11px; color: var(--accent-purple);">${user.rank}</div>
                    </div>
                </div>
            </td>
            <td>${user.level}</td>
            <td><strong style="color: var(--accent-green);">${user.xp}</strong></td>
            <td>${user.topics}</td>
            <td>${user.labs}</td>
        `;
        
        tbody.appendChild(row);
    });
    
    // Обновляем активный фильтр
    document.querySelectorAll('.filter-tag').forEach(tag => tag.classList.remove('active'));
    document.querySelector(`.filter-tag[onclick*="${period}"]`).classList.add('active');
}

function getLeaderboardData(period) {
    // Тестовые данные
    return [
        {
            name: 'Александр',
            rank: currentLanguage === 'by' ? 'Майстар' : 'Мастер',
            level: 12,
            xp: 2450,
            topics: 18,
            labs: 8,
            avatarColor: '#FF6B6B'
        },
        {
            name: 'Мария',
            rank: currentLanguage === 'by' ? 'Эксперт' : 'Эксперт',
            level: 10,
            xp: 1980,
            topics: 15,
            labs: 6,
            avatarColor: '#4ECDC4'
        },
        {
            name: appState.user.name,
            rank: currentLanguage === 'by' ? appState.user.rank_by : appState.user.rank,
            level: appState.user.level,
            xp: appState.user.xp,
            topics: appState.user.completedTopics.length,
            labs: appState.user.completedLabs,
            avatarColor: '#45B7D1'
        },
        {
            name: 'Иван',
            rank: currentLanguage === 'by' ? 'Знаўца' : 'Знаток',
            level: 7,
            xp: 1200,
            topics: 10,
            labs: 4,
            avatarColor: '#96CEB4'
        },
        {
            name: 'Екатерина',
            rank: currentLanguage === 'by' ? 'Вучань' : 'Ученик',
            level: 5,
            xp: 800,
            topics: 8,
            labs: 3,
            avatarColor: '#FFEAA7'
        }
    ].sort((a, b) => b.xp - a.xp);
}

// ================ НАСТРОЙКИ ================
function openSettings() {
    document.getElementById('settingsModal').classList.add('active');
    showSettingsSection('appearance');
}

function showSettingsSection(sectionId) {
    // Обновляем активный пункт меню
    document.querySelectorAll('.settings-nav-item').forEach(item => {
        item.classList.remove('active');
    });
    
    document.querySelector(`.settings-nav-item[onclick*="${sectionId}"]`).classList.add('active');
    
    // Показываем выбранную секцию
    document.querySelectorAll('.settings-section').forEach(section => {
        section.classList.remove('active');
    });
    
    document.getElementById(`${sectionId}Section`).classList.add('active');
}

function toggleCompactMode(enabled) {
    if (enabled) {
        document.body.classList.add('compact-mode');
    } else {
        document.body.classList.remove('compact-mode');
    }
    
    appState.user.settings.compactMode = enabled;
    saveUserState();
}

function toggleAnimations(enabled) {
    appState.user.settings.animations = enabled;
    
    if (!enabled) {
        disableAnimations();
    } else {
        enableAnimations();
    }
    
    saveUserState();
}

function disableAnimations() {
    document.body.classList.add('no-animations');
}

function enableAnimations() {
    document.body.classList.remove('no-animations');
}

function changeEditorFontSize(size) {
    appState.user.settings.editor.fontSize = parseInt(size);
    updateEditorSettings();
    saveUserState();
}

function toggleAutocomplete(enabled) {
    appState.user.settings.editor.autocomplete = enabled;
    updateEditorSettings();
    saveUserState();
}

function toggleAutosave(enabled) {
    appState.user.settings.editor.autosave = enabled;
    
    if (enabled && !autoSaveInterval) {
        initAutoSave();
    } else if (!enabled && autoSaveInterval) {
        clearInterval(autoSaveInterval);
        autoSaveInterval = null;
    }
    
    saveUserState();
}

function toggleSyntaxHighlighting(enabled) {
    appState.user.settings.editor.syntaxHighlighting = enabled;
    updateEditorSettings();
    saveUserState();
}

function changeTabSize(size) {
    appState.user.settings.editor.tabSize = size === 'tab' ? '\t' : parseInt(size);
    updateEditorSettings();
    saveUserState();
}

function updateUserName(name) {
    appState.user.name = name;
    updateUserStats();
    saveUserState();
}

function updateUserNickname(nickname) {
    appState.user.nickname = nickname;
    saveUserState();
}

function updateUserEmail(email) {
    appState.user.email = email;
    saveUserState();
}

function toggleSystemNotifications(enabled) {
    appState.user.settings.notifications.system = enabled;
    saveUserState();
}

function toggleAchievementNotifications(enabled) {
    appState.user.settings.notifications.achievements = enabled;
    saveUserState();
}

function toggleProgressNotifications(enabled) {
    appState.user.settings.notifications.progress = enabled;
    saveUserState();
}

function toggleHighContrast(enabled) {
    appState.user.settings.accessibility.highContrast = enabled;
    
    if (enabled) {
        document.documentElement.setAttribute('data-theme', 'high-contrast');
    } else {
        document.documentElement.setAttribute('data-theme', appState.user.settings.theme);
    }
    
    saveUserState();
}

function toggleLargeFont(enabled) {
    appState.user.settings.accessibility.largeFont = enabled;
    
    if (enabled) {
        document.body.style.fontSize = '18px';
    } else {
        document.body.style.fontSize = '16px';
    }
    
    saveUserState();
}

function toggleSimpleNavigation(enabled) {
    appState.user.settings.accessibility.simpleNavigation = enabled;
    
    if (enabled) {
        // Упрощаем навигацию
        document.querySelector('.main-nav').style.display = 'none';
    } else {
        document.querySelector('.main-nav').style.display = 'flex';
    }
    
    saveUserState();
}

function toggleAutoSaveData(enabled) {
    appState.user.settings.autoSaveData = enabled;
    saveUserState();
}

function toggleBackups(enabled) {
    appState.user.settings.backups = enabled;
    
    if (enabled && !backupInterval) {
        initBackups();
    } else if (!enabled && backupInterval) {
        clearInterval(backupInterval);
        backupInterval = null;
    }
    
    saveUserState();
}

function exportAllData() {
    const dataStr = JSON.stringify(appState, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
    
    const exportFileDefaultName = `algorithmics_backup_${new Date().toISOString().split('T')[0]}.json`;
    
    const linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
    
    showNotification(currentLanguage === 'by' ? 
        'Усе дадзеныя экспартаваныя' : 
        'Все данные экспортированы', "success");
}

function importData() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.json';
    
    input.onchange = function(e) {
        const file = e.target.files[0];
        const reader = new FileReader();
        
        reader.onload = function(event) {
            try {
                const importedData = JSON.parse(event.target.result);
                
                // Проверяем версию
                if (importedData.version && importedData.version === appState.version) {
                    // Обновляем состояние
                    Object.assign(appState, importedData);
                    
                    // Применяем настройки
                    applyTheme(appState.user.settings.theme);
                    applyLanguage(appState.user.settings.language);
                    updateUserStats();
                    initProgressMap();
                    
                    showNotification(currentLanguage === 'by' ? 
                        'Дадзеныя імпартаваныя паспяхова' : 
                        'Данные импортированы успешно', "success");
                    
                    logActivity(currentLanguage === 'by' ? 
                        'Імпартаваў дадзеныя з файла' : 
                        'Импортировал данные из файла');
                } else {
                    showNotification(currentLanguage === 'by' ? 
                        'Няправільны фармат файла альбо версія' : 
                        'Неверный формат файла или версия', "error");
                }
            } catch (error) {
                showNotification(currentLanguage === 'by' ? 
                    'Памылка пры чытанні файла' : 
                    'Ошибка при чтении файла', "error");
                console.error(error);
            }
        };
        
        reader.readAsText(file);
    };
    
    input.click();
}

function clearAllData() {
    if (confirm(currentLanguage === 'by' ? 
        'Вы ўпэўнены, што хочаце ачысціць усе дадзеныя? Гэта дзеянне нельга адмяніць.' : 
        'Вы уверены, что хотите очистить все данные? Это действие нельзя отменить.')) {
        
        // Сбрасываем состояние
        appState = {
            version: "4.0.0",
            user: {
                id: 1,
                name: "Дмитрий",
                name_by: "Дзмітрый",
                nickname: "dmitry.makarchikov",
                email: "dmitry.makarchikov.it@gmail.com",
                level: 1,
                xp: 0,
                maxXp: 100,
                rank: "Новичок",
                rank_by: "Пачатковец",
                streak: 0,
                completedTopics: [],
                completedLabs: 0,
                completedTests: 0,
                codeLines: 0,
                achievements: [],
                activity: [],
                dailyGoals: {
                    lastCompleted: null,
                    streak: 0,
                    today: {
                        topics: 0,
                        labs: 0,
                        code: 0,
                        tests: 0
                    }
                },
                settings: appState.user.settings,
                avatar: {
                    current: null,
                    history: [],
                    customizations: []
                },
                certificates: [],
                games: {
                    highScores: {},
                    unlocked: ["memory_game"]
                }
            },
            current: appState.current,
            memory: appState.memory,
            progress: {
                basics: { completed: 0, total: 1000, percentage: 0 },
                oop: { completed: 0, total: 1500, percentage: 0 },
                algorithms: { completed: 0, total: 2000, percentage: 0 }
            },
            projects: appState.projects,
            backups: [],
            searchIndex: []
        };
        
        // Обновляем интерфейс
        updateUserStats();
        initProgressMap();
        initModules();
        initHomeContent();
        initLabs();
        initProjects();
        initAchievements();
        initActivityCalendar();
        
        // Сбрасываем прогресс
        document.getElementById('xpBarFill').style.width = '0%';
        
        showNotification(currentLanguage === 'by' ? 
            'Усе дадзеныя ачышчаны' : 
            'Все данные очищены', "success");
        
        logActivity(currentLanguage === 'by' ? 
            'Ачысціў усе дадзеныя' : 
            'Очистил все данные');
        
        saveUserState();
    }
}

function changeLanguage(lang) {
    applyLanguage(lang);
}

function toggleAutoTranslate(enabled) {
    appState.user.settings.autoTranslate = enabled;
    saveUserState();
}

// ================ ГОРЯЧИЕ КЛАВИШИ ================
function initHotkeys() {
    document.addEventListener('keydown', function(e) {
        // Ctrl+S - сохранить
        if (e.ctrlKey && e.key === 's') {
            e.preventDefault();
            saveCode();
        }
        
        // Ctrl+Enter - запустить код
        if (e.ctrlKey && e.key === 'Enter') {
            e.preventDefault();
            runCode();
        }
        
        // F1 - справка
        if (e.key === 'F1') {
            e.preventDefault();
            showHelp();
        }
        
        // Ctrl+Shift+L - очистить вывод
        if (e.ctrlKey && e.shiftKey && e.key === 'L') {
            e.preventDefault();
            clearOutput();
        }
        
        // Ctrl+Shift+S - настройки
        if (e.ctrlKey && e.shiftKey && e.key === 'S') {
            e.preventDefault();
            openSettings();
        }
    });
}

function showHelp() {
    showNotification(`
        🎮 <strong>Гарачыя клавішы:</strong>
        <br>• <kbd>Ctrl+S</kbd> - Захаваць код
        <br>• <kbd>Ctrl+Enter</kbd> - Запусціць код
        <br>• <kbd>F1</kbd> - Дапамога
        <br>• <kbd>Ctrl+Shift+L</kbd> - Ачысціць вывад
        <br>• <kbd>Ctrl+Shift+S</kbd> - Налады
    `, "info");
}

// ================ АВТОСОХРАНЕНИЕ ================
function initAutoSave() {
    if (autoSaveInterval) clearInterval(autoSaveInterval);
    
    if (appState.user.settings.editor.autosave) {
        autoSaveInterval = setInterval(() => {
            saveUserState();
            console.log(currentLanguage === 'by' ? 
                'Дадзеныя аўтаматычна захаваны' : 
                'Данные автоматически сохранены');
        }, CONFIG.AUTO_SAVE_INTERVAL);
    }
}

function initBackups() {
    if (backupInterval) clearInterval(backupInterval);
    
    if (appState.user.settings.backups) {
        backupInterval = setInterval(() => {
            const backup = {
                timestamp: new Date().toISOString(),
                data: JSON.parse(JSON.stringify(appState))
            };
            
            appState.backups.push(backup);
            
            // Ограничиваем количество бэкапов
            if (appState.backups.length > 10) {
                appState.backups = appState.backups.slice(-10);
            }
            
            saveUserState();
            console.log(currentLanguage === 'by' ? 
                'Рэзервовая копія створана' : 
                'Резервная копия создана');
        }, CONFIG.BACKUP_INTERVAL);
    }
}

// ================ СОХРАНЕНИЕ И ЗАГРУЗКА СОСТОЯНИЯ ================
function saveUserState() {
    try {
        localStorage.setItem('algorithmics_platform_state', JSON.stringify(appState));
        localStorage.setItem('algorithmics_platform_version', CONFIG.VERSION);
    } catch (error) {
        console.error(currentLanguage === 'by' ? 
            'Памылка захавання дадзеных:' : 
            'Ошибка сохранения данных:', error);
    }
}

function loadUserState() {
    try {
        const savedState = localStorage.getItem('algorithmics_platform_state');
        const savedVersion = localStorage.getItem('algorithmics_platform_version');
        
        if (savedState && savedVersion === CONFIG.VERSION) {
            const parsedState = JSON.parse(savedState);
            
            // Восстанавливаем состояние
            Object.assign(appState, parsedState);
            
            // Восстанавливаем текущий язык
            currentLanguage = appState.user.settings.language;
            
            // Обновляем статистику
            updateUserStats();
            
            console.log(currentLanguage === 'by' ? 
                'Дадзеныя загружаны з лакальнага сховішча' : 
                'Данные загружены из локального хранилища');
        }
    } catch (error) {
        console.error(currentLanguage === 'by' ? 
            'Памылка загрузкі дадзеных:' : 
            'Ошибка загрузки данных:', error);
    }
}

// ================ ОБНОВЛЕНИЕ ИНТЕРФЕЙСА ПРИ ЗАГРУЗКЕ ================
function updateUI() {
    // Обновляем карту прогресса
    updateProgressMap();
    
    // Обновляем путь обучения
    initProgressPath();
    
    // Обновляем модули
    initModules();
    
    // Обновляем достижения
    initAchievements();
    
    // Обновляем календарь активности
    initActivityCalendar();
    
    // Обновляем профиль
    initAvatar();
    
    // Инициализируем горячие клавиши
    initHotkeys();
    
    // Инициализируем автодополнение для редактора кода
    if (appState.user.settings.editor.autocomplete) {
        CodeMirror.registerHelper("hint", "anyword", function(cm, options) {
            var cur = cm.getCursor();
            var curLine = cm.getLine(cur.line);
            var start = cur.ch;
            var end = start;
            
            while (start && /\w/.test(curLine.charAt(start - 1))) --start;
            while (end < curLine.length && /\w/.test(curLine.charAt(end))) ++end;
            
            var curWord = start != end && curLine.slice(start, end);
            
            var list = options.list || [];
            var filtered = list.filter(function(item) {
                return item.startsWith(curWord);
            });
            
            return {
                list: filtered,
                from: CodeMirror.Pos(cur.line, start),
                to: CodeMirror.Pos(cur.line, end)
            };
        });
        
        const cppKeywords = [
            "auto", "bool", "break", "case", "catch", "char", "class", "const", "continue",
            "default", "delete", "do", "double", "else", "enum", "explicit", "export",
            "extern", "false", "float", "for", "friend", "goto", "if", "inline", "int",
            "long", "mutable", "namespace", "new", "operator", "private", "protected",
            "public", "register", "return", "short", "signed", "sizeof", "static",
            "struct", "switch", "template", "this", "throw", "true", "try", "typedef",
            "typename", "union", "unsigned", "using", "virtual", "void", "volatile", "while"
        ];
        
        codeEditor.on("keyup", function(cm, event) {
            if (!cm.state.completionActive && (event.keyCode >= 65 && event.keyCode <= 90)) {
                CodeMirror.commands.autocomplete(cm, null, {
                    list: cppKeywords.concat([
                        "cout", "cin", "endl", "string", "vector", "map", "set",
                        "pair", "make_pair", "sort", "find", "begin", "end"
                    ])
                });
            }
        });
    }
}

// ================ ЗАКРЫТИЕ МОДАЛЬНЫХ ОКОН ================
function closeModal() {
    document.querySelectorAll('.modal-overlay').forEach(modal => {
        modal.classList.remove('active');
    });
    // Возвращаем прокрутку страницы
    document.body.style.overflow = 'auto';
}

// ================ ОТКРЫТИЕ ЛЮБОЙ МОДАЛКИ С ПРОКРУТКОЙ ВВЕРХ ================
function openModalWithScroll(modalId) {
    document.body.style.overflow = 'hidden';
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        // Прокручиваем содержимое модалки вверх
        setTimeout(() => {
            const modalContainer = modal.querySelector('.modal-container');
            if (modalContainer) {
                modalContainer.scrollTop = 0;
            }
        }, 50);
    }
}

// ================ ЭКСПОРТ ДАННЫХ ПОЛЬЗОВАТЕЛЯ ================
function exportUserData() {
    const userData = {
        user: appState.user,
        progress: appState.progress,
        completedTopics: appState.user.completedTopics,
        completedLabs: appState.user.completedLabs,
        achievements: appState.user.achievements,
        certificates: appState.user.certificates,
        stats: {
            level: appState.user.level,
            xp: appState.user.xp,
            rank: appState.user.rank,
            streak: appState.user.streak,
            codeLines: appState.user.codeLines,
            lastActivity: appState.user.activity[appState.user.activity.length - 1]
        }
    };
    
    const dataStr = JSON.stringify(userData, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
    
    const exportFileDefaultName = `user_data_${appState.user.name}_${new Date().toISOString().split('T')[0]}.json`;
    
    const linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
    
    showNotification(currentLanguage === 'by' ? 
        'Дадзеныя карыстальніка экспартаваныя' : 
        'Данные пользователя экспортированы', "success");
}

function resetProgress() {
    if (confirm(currentLanguage === 'by' ? 
        'Вы ўпэўнены, што хочаце скінуць свой прагрэс? Гэта дзеянне нельга адмяніць.' : 
        'Вы уверены, что хотите сбросить свой прогресс? Это действие нельзя отменить.')) {
        
        appState.user.level = 1;
        appState.user.xp = 0;
        appState.user.completedTopics = [];
        appState.user.completedLabs = 0;
        appState.user.completedTests = 0;
        appState.user.codeLines = 0;
        appState.user.achievements = ['first_steps'];
        appState.user.streak = 0;
        appState.user.dailyGoals.streak = 0;
        appState.user.dailyGoals.lastCompleted = null;
        appState.user.dailyGoals.today = {
            topics: 0,
            labs: 0,
            code: 0,
            tests: 0
        };
        
        ACHIEVEMENTS_DATA.forEach(achievement => {
            achievement.unlocked = achievement.id === 'first_steps';
        });
        
        updateUserStats();
        initProgressMap();
        initModules();
        initHomeContent();
        initAchievements();
        
        showNotification(currentLanguage === 'by' ? 
            'Прагрэс паспяхова скінуты' : 
            'Прогресс успешно сброшен', "success");
        
        logActivity(currentLanguage === 'by' ? 
            'Скінуў прагрэс навучання' : 
            'Сбросил прогресс обучения');
        
        saveUserState();
    }
}

// Функция для загрузки и запуска кода
function runCode() {
    const code = codeEditor.getValue();
    const output = document.getElementById('programOutput');
    
    output.innerHTML = '';
    
    // Имитация компиляции и выполнения
    const mockOutput = `
        <div class="output-line success">
            <i class="fas fa-check-circle"></i>
            ${currentLanguage === 'by' ? 'Кампіляцыя паспяховая!' : 'Компиляция успешная!'}
        </div>
        <div class="output-line info">
            <i class="fas fa-terminal"></i>
            ${currentLanguage === 'by' ? 'Запуск праграмы...' : 'Запуск программы...'}
        </div>
    `;
    
    output.innerHTML = mockOutput;
    
    // Имитация вывода программы
    setTimeout(() => {
        const lines = code.split('\n');
        const hasMain = code.includes('int main()');
        const hasHelloWorld = code.includes('Hello') || code.includes('hello');
        
        if (hasMain) {
            if (hasHelloWorld) {
                output.innerHTML += `
                    <div class="output-line">
                        Hello, C++ World!
                    </div>
                    <div class="output-line">
                        Добро пожаловать в Основы алгоритмизации!
                    </div>
                `;
            } else {
                output.innerHTML += `
                    <div class="output-line">
                        === ДЕМОНСТРАЦИЯ ВОЗМОЖНОСТЕЙ C++ ===
                    </div>
                    <div class="output-line">
                        Основы алгоритмизации и программирования
                    </div>
                `;
                
                //  код для имитации вывода
                const variables = extractVariables(code);
                if (variables.length > 0) {
                    output.innerHTML += `
                        <div class="output-line">
                            1. РАБОТА С ПЕРЕМЕННЫМИ:
                        </div>
                    `;
                    
                    variables.forEach(variable => {
                        output.innerHTML += `
                            <div class="output-line">
                                ${variable.type} ${variable.name} = ${variable.value || 'undefined'}
                            </div>
                        `;
                    });
                }
                
                // Имитация вывода массива
                if (code.includes('int numbers[') || code.includes('int arr[')) {
                    output.innerHTML += `
                        <div class="output-line">
                            2. РАБОТА С МАССИВАМИ:
                        </div>
                        <div class="output-line">
                            Элементы массива: 10 20 30 40 50
                        </div>
                    `;
                }
                
                // Имитация ООП
                if (code.includes('class') || code.includes('struct')) {
                    output.innerHTML += `
                        <div class="output-line">
                            3. ОБЪЕКТНО-ОРИЕНТИРОВАННОЕ ПРОГРАММИРОВАНИЕ:
                        </div>
                        <div class="output-line">
                            Создано объектов: 3
                        </div>
                    `;
                }
            }
            
            output.innerHTML += `
                <div class="output-line success">
                    <i class="fas fa-flag-checkered"></i>
                    ${currentLanguage === 'by' ? 'Праграма завершана паспяхова' : 'Программа завершена успешно'}
                </div>
                <div class="output-line info">
                    <i class="fas fa-chart-line"></i>
                    ${currentLanguage === 'by' ? 'Выканана за 0.002 секунды' : 'Выполнена за 0.002 секунды'}
                </div>
            `;
        } else {
            output.innerHTML += `
                <div class="output-line error">
                    <i class="fas fa-exclamation-triangle"></i>
                    ${currentLanguage === 'by' ? 'Памылка: няма функцыі main()' : 'Ошибка: нет функции main()'}
                </div>
            `;
        }
        
        // Прокручиваем вывод вниз
        output.scrollTop = output.scrollHeight;
        
        // Обновляем статистику строк кода
        const newLines = code.split('\n').length;
        appState.user.codeLines += newLines;
        updateUserStats();
        
        // Обновляем ежедневную цель
        updateDailyGoal('code');
        
        logActivity(currentLanguage === 'by' ? 
            'Запусціў код (радкоў:' : 
            'Запустил код (строк:' + newLines + ')');
        
    }, 500);
}
// Функции для интерактивных элементов теории
function updateVariableDemo() {
    const a = parseInt(document.getElementById('varA').value) || 0;
    const b = parseInt(document.getElementById('varB').value) || 1;
    const resultDiv = document.getElementById('variableDemoResult');
    
    resultDiv.innerHTML = `
        <div>A + B = ${a + b}</div>
        <div>A - B = ${a - b}</div>
        <div>A * B = ${a * b}</div>
        <div>A / B = ${b !== 0 ? Math.floor(a / b) : '∞'}</div>
        <div>A % B = ${b !== 0 ? a % b : 'N/A'}</div>
    `;
}

function testFirstProgram() {
    const tasks = [
        document.getElementById('task1').checked,
        document.getElementById('task2').checked,
        document.getElementById('task3').checked
    ];
    
    const completed = tasks.filter(task => task).length;
    const total = tasks.length;
    
    if (completed === total) {
        showNotification('🎉 Отлично! Все задания выполнены! +50 XP', 'success');
        addXP(50);
    } else {
        showNotification(`📝 Выполнено ${completed} из ${total} заданий. Продолжайте!`, 'info');
    }
}

function checkPracticeTask(checkbox) {
    if (checkbox.checked) {
        checkbox.parentElement.style.background = 'rgba(80, 250, 123, 0.1)';
        checkbox.parentElement.style.borderColor = 'var(--accent-green)';
    } else {
        checkbox.parentElement.style.background = '';
        checkbox.parentElement.style.borderColor = '';
    }
}

function addXP(amount) {
    appState.user.xp += amount;
    updateUserStats();
    checkLevelUp();
}

// Инициализация интерактивных элементов
document.addEventListener('DOMContentLoaded', function() {
    // Инициализируем демо переменных
    if (document.getElementById('varA')) {
        updateVariableDemo();
    }
});

function extractVariables(code) {
    const variablePattern = /(int|double|float|char|bool|string|auto)\s+([a-zA-Z_][a-zA-Z0-9_]*)(?:\s*=\s*([^;]+))?;/g;
    const variables = [];
    let match;
    
    while ((match = variablePattern.exec(code)) !== null) {
        variables.push({
            type: match[1],
            name: match[2],
            value: match[3] ? match[3].trim() : null
        });
    }
    
    return variables;
}

function debugCode() {
    const code = codeEditor.getValue();
    const output = document.getElementById('programOutput');
    
    output.innerHTML = `
        <div class="output-line info">
            <i class="fas fa-bug"></i>
            ${currentLanguage === 'by' ? 'Запуск адладкі...' : 'Запуск отладки...'}
        </div>
    `;
    
    // Имитация отладки
    setTimeout(() => {
        output.innerHTML += `
            <div class="output-line success">
                <i class="fas fa-check"></i>
                ${currentLanguage === 'by' ? 'Пераменныя знойдзены:' : 'Переменные найдены:'} 5
            </div>
            <div class="output-line">
                <i class="fas fa-code-branch"></i>
                ${currentLanguage === 'by' ? 'Кропкі спыну:' : 'Точки останова:'} 3
            </div>
            <div class="output-line">
                <i class="fas fa-play"></i>
                ${currentLanguage === 'by' ? 'Паэтапнае выкананне...' : 'Пошаговое выполнение...'}
            </div>
        `;
        
        // Имитация пошагового выполнения
        const lines = code.split('\n').slice(0, 10);
        lines.forEach((line, index) => {
            setTimeout(() => {
                if (line.trim()) {
                    output.innerHTML += `
                        <div class="output-line" style="background: rgba(100, 255, 218, 0.1);">
                            <i class="fas fa-caret-right" style="color: var(--accent-blue);"></i>
                            Строка ${index + 1}: ${line.trim().substring(0, 50)}${line.trim().length > 50 ? '...' : ''}
                        </div>
                    `;
                    output.scrollTop = output.scrollHeight;
                }
            }, index * 300);
        });
        
        setTimeout(() => {
            output.innerHTML += `
                <div class="output-line success">
                    <i class="fas fa-flag-checkered"></i>
                    ${currentLanguage === 'by' ? 'Адладка завершана' : 'Отладка завершена'}
                </div>
            `;
        }, lines.length * 300 + 500);
        
    }, 1000);
}

function clearOutput() {
    document.getElementById('programOutput').innerHTML = '';
}

function saveCode() {
    const fileName = appState.current.file;
    const code = codeEditor.getValue();
    
    appState.current.editor.files[fileName] = code;
    
    showNotification(`💾 ${currentLanguage === 'by' ? 
        'Код захаваны:' : 
        'Код сохранен:'} ${fileName}`, "success");
    
    logActivity(`${currentLanguage === 'by' ? 
        'Захаваў файл:' : 
        'Сохранил файл:'} ${fileName}`);
    
    saveUserState();
}

function switchFile(fileName) {
    if (appState.current.editor.files[fileName]) {
        appState.current.file = fileName;
        codeEditor.setValue(appState.current.editor.files[fileName]);
        updateFileTabs();
    }
}

function createNewFile() {
    const fileName = prompt(currentLanguage === 'by' ? 
        'Увядзіце імя новага файла (напрыклад: program.cpp):' : 
        'Введите имя нового файла (например: program.cpp):', 'new_file.cpp');
    
    if (fileName) {
        appState.current.editor.files[fileName] = '// Новый файл\n#include <iostream>\n\nusing namespace std;\n\nint main() {\n    cout << "Hello, World!" << endl;\n    return 0;\n}';
        appState.current.file = fileName;
        codeEditor.setValue(appState.current.editor.files[fileName]);
        updateFileTabs();
        
        showNotification(`📄 ${currentLanguage === 'by' ? 
            'Створаны новы файл:' : 
            'Создан новый файл:'} ${fileName}`, "success");
    }
}

function createNewFolder() {
    showNotification(currentLanguage === 'by' ? 
        'Стварэнне тэчак у вэб-рэдактары знаходзіцца ў распрацоўцы' : 
        'Создание папок в веб-редакторе находится в разработке', "info");
}

function deleteFile() {
    const fileName = appState.current.file;
    
    if (Object.keys(appState.current.editor.files).length > 1) {
        if (confirm(currentLanguage === 'by' ? 
            `Вы ўпэўнены, што хочаце выдаліць файл "${fileName}"?` : 
            `Вы уверены, что хотите удалить файл "${fileName}"?`)) {
            
            delete appState.current.editor.files[fileName];
            
            // Переключаемся на другой файл
            const remainingFiles = Object.keys(appState.current.editor.files);
            if (remainingFiles.length > 0) {
                appState.current.file = remainingFiles[0];
                codeEditor.setValue(appState.current.editor.files[remainingFiles[0]]);
            }
            
            updateFileTabs();
            
            showNotification(`🗑️ ${currentLanguage === 'by' ? 
                'Файл выдалены:' : 
                'Файл удален:'} ${fileName}`, "success");
        }
    } else {
        showNotification(currentLanguage === 'by' ? 
            'Нельга выдаліць адзіны файл' : 
            'Нельзя удалить единственный файл', "error");
    }
}

function renameFile() {
    const oldFileName = appState.current.file;
    const newFileName = prompt(currentLanguage === 'by' ? 
        'Увядзіце новае імя файла:' : 
        'Введите новое имя файла:', oldFileName);
    
    if (newFileName && newFileName !== oldFileName) {
        if (appState.current.editor.files[newFileName]) {
            showNotification(currentLanguage === 'by' ? 
                'Файл з такім імем ужо існуе' : 
                'Файл с таким именем уже существует', "error");
            return;
        }
        
        appState.current.editor.files[newFileName] = appState.current.editor.files[oldFileName];
        delete appState.current.editor.files[oldFileName];
        appState.current.file = newFileName;
        
        updateFileTabs();
        
        showNotification(`✏️ ${currentLanguage === 'by' ? 
            'Файл перайменаваны:' : 
            'Файл переименован:'} ${oldFileName} → ${newFileName}`, "success");
    }
}

function closeFile(event, fileName) {
    event.stopPropagation();
    
    if (Object.keys(appState.current.editor.files).length > 1) {
        delete appState.current.editor.files[fileName];
        
        if (appState.current.file === fileName) {
            const remainingFiles = Object.keys(appState.current.editor.files);
            if (remainingFiles.length > 0) {
                appState.current.file = remainingFiles[0];
                codeEditor.setValue(appState.current.editor.files[remainingFiles[0]]);
            }
        }
        
        updateFileTabs();
    }
}

function focusEditor() {
    if (codeEditor) {
        codeEditor.focus();
    }
}

// Инициализация при загрузке страницы
window.onload = function() {
};

// Экспортируем функции в глобальную область видимости
window.copyCode = function(id) {
    const codeElement = document.getElementById(id);
    if (codeElement) {
        navigator.clipboard.writeText(codeElement.textContent);
        showNotification(currentLanguage === 'by' ? 
            'Код скапіяваны ў буфер абмену' : 
            'Код скопирован в буфер обмена', "success");
    }
};

window.runExample = function(id) {
    const codeElement = document.getElementById(id);
    if (codeElement) {
        codeEditor.setValue(codeElement.textContent);
        showNotification(currentLanguage === 'by' ? 
            'Прыклад загружаны ў рэдактар' : 
            'Пример загружен в редактор', "success");
        focusEditor();
    }
};

window.checkAnswer = function(button, answer, isCorrect) {
    const buttons = button.parentElement.querySelectorAll('button');
    buttons.forEach(btn => {
        btn.disabled = true;
        if (btn === button) {
            if (isCorrect) {
                btn.style.background = 'var(--accent-green)';
                btn.style.color = 'white';
                btn.innerHTML = '<i class="fas fa-check"></i> ' + btn.textContent;
            } else {
                btn.style.background = 'var(--accent-red)';
                btn.style.color = 'white';
                btn.innerHTML = '<i class="fas fa-times"></i> ' + btn.textContent;
            }
        }
    });
    
    if (isCorrect) {
        showNotification('✅ ' + (currentLanguage === 'by' ? 
            'Правільна! Вы атрымалі +10 XP' : 
            'Правильно! Вы получили +10 XP'), "success");
        
        // Начисляем XP
        appState.user.xp += 10;
        checkLevelUp();
        updateUserStats();
    }
};

//  appState доступным для отладки в консоли
window.appState = appState;
window.COURSE_STRUCTURE = COURSE_STRUCTURE;
window.LABS_DATA = LABS_DATA;

// ================ ОТКРЫТИЕ МОДАЛЬНОГО ОКНА ЛАБОРАТОРНОЙ ================
function openLabModal(labId) {
    const lab = LABS_DATA.find(l => l.id === labId);
    if (!lab) return;
    
    document.body.style.overflow = 'hidden'; 
    appState.current.lab = labId;
    
    const modal = document.getElementById('labModal');
    const content = document.getElementById('labModalContent');
    
    // Перевод текста
    const labTitle = currentLanguage === 'by' && lab.title_by ? lab.title_by : lab.title;
    const labDescription = currentLanguage === 'by' && lab.description_by ? lab.description_by : lab.description;
    const difficultyText = lab.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') :
                         lab.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') :
                         lab.difficulty === 'advanced' ? (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый') : 'Эксперт';
    
    // Создаем HTML для вариантов, если они есть
    let variantsHTML = '';
    if (lab.variants && lab.variants.length > 0) {
        let options = '';
        lab.variants.forEach((variant, index) => {
            options += `<option value="${index}">Вариант ${variant.number}</option>`;
        });
        
        variantsHTML = `
            <div style="margin-top: 20px;">
                <label style="color: var(--accent-blue); font-weight: 600; margin-bottom: 5px; display: block;">
                    <i class="fas fa-list"></i> Выберите вариант:
                </label>
                <select id="labVariantSelect" class="filter-select" style="width: 100%; padding: 10px;" onchange="updateLabVariantDisplay()">
                    ${options}
                </select>
            </div>
        `;
    }
    
    // Задания для отображения (первые три)
    let tasksHTML = '';
    if (lab.variants && lab.variants[0]) {
        const variant = lab.variants[0];
        tasksHTML = `
            <div class="lab-objectives" style="margin-top: 25px;">
                <h4 style="color: var(--accent-blue);"><i class="fas fa-tasks"></i> Ваши задания:</h4>
                <div class="lab-objective"><i class="fas fa-circle" style="color: var(--accent-blue);"></i> <span id="labTask1">${variant.task1 || 'Задание 1'}</span></div>
                <div class="lab-objective"><i class="fas fa-circle" style="color: var(--accent-blue);"></i> <span id="labTask2">${variant.task2 || 'Задание 2'}</span></div>
                <div class="lab-objective"><i class="fas fa-circle" style="color: var(--accent-blue);"></i> <span id="labTask3">${variant.task3 || 'Задание 3'}</span></div>
            </div>
        `;
    } else {
        tasksHTML = `
            <div class="lab-objectives" style="margin-top: 25px;">
                <h4 style="color: var(--accent-blue);"><i class="fas fa-tasks"></i> Цели работы:</h4>
                ${lab.objectives.map(obj => `<div class="lab-objective"><i class="fas fa-circle" style="color: var(--accent-blue);"></i> <span>${obj}</span></div>`).join('')}
            </div>
        `;
    }
    
    content.innerHTML = `
        <div class="lab-instructions">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap;">
                <div style="flex: 1;">
                    <h3 style="color: var(--text-primary); margin-bottom: 10px;">${labTitle}</h3>
                    <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 15px; flex-wrap: wrap;">
                        <div style="padding: 6px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; 
                             background: ${lab.difficulty === 'beginner' ? 'rgba(80, 250, 123, 0.2)' : 
                                        lab.difficulty === 'intermediate' ? 'rgba(241, 250, 140, 0.2)' : 
                                        'rgba(255, 85, 85, 0.2)'}; 
                             color: ${lab.difficulty === 'beginner' ? 'var(--accent-green)' : 
                                    lab.difficulty === 'intermediate' ? 'var(--accent-yellow)' : 
                                    'var(--accent-red)'};">
                            ${difficultyText}
                        </div>
                        <div style="display: flex; gap: 10px; color: var(--accent-purple); font-size: 14px;">
                            <span><i class="fas fa-clock"></i> ${lab.duration} мин</span>
                            <span><i class="fas fa-star"></i> ${lab.points} баллов</span>
                        </div>
                    </div>
                </div>
                ${variantsHTML}
            </div>
            
            <div style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 25px; padding: 15px; background: rgba(100, 255, 218, 0.05); border-radius: 10px;">
                ${labDescription}
            </div>
            
            ${tasksHTML}
            
            <!-- Контрольные вопросы (первые три) -->
            ${lab.controlQuestions ? `
                <div style="margin-top: 25px;">
                    <h4 style="color: var(--accent-purple);"><i class="fas fa-question-circle"></i> Контрольные вопросы</h4>
                    <ol style="padding-left: 20px;">
                        ${lab.controlQuestions.slice(0, 3).map(q => `<li style="margin-bottom: 10px; color: var(--text-secondary);">${q.question}</li>`).join('')}
                    </ol>
                </div>
            ` : ''}
            
            <div style="display: flex; gap: 15px; margin-top: 30px;">
                <button class="btn btn-primary" style="flex: 1;" onclick="startLabFromModal()">
                    <i class="fas fa-play"></i> Начать выполнение
                </button>
                <button class="btn btn-outline" style="flex: 1;" onclick="closeModal()">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
        </div>
    `;
    
    modal.classList.add('active');
    
    // Прокручиваем модальное окно вверх
    setTimeout(() => {
        modal.querySelector('.modal-container').scrollTop = 0;
    }, 100);
}

// ================ СТАРТ ЛАБОРАТОРНОЙ ИЗ МОДАЛЬНОГО ОКНА ================
function startLabFromModal() {
    const lab = LABS_DATA.find(l => l.id === appState.current.lab);
    if (!lab) return;
    
    let starterCode = lab.starterCode || '// Напишите ваш код здесь\n\n#include <iostream>\nusing namespace std;\n\nint main() {\n    // Ваш код\n    return 0;\n}';
    
    // Если есть выбор варианта
    const variantSelect = document.getElementById('labVariantSelect');
    if (variantSelect) {
        const variantIndex = parseInt(variantSelect.value);
        const variant = lab.variants[variantIndex];
        const fileName = `lab_${lab.id}_variant_${variant.number}.cpp`;
        
        starterCode = `// Лабораторная работа - Вариант ${variant.number}
// ${variant.task1 || ''}
// ${variant.task2 || ''}
// ${variant.task3 || ''}

#include <iostream>
#include <cmath>
using namespace std;

int main() {
    // TODO: Объявите переменные
    
    // TODO: Ввод данных
    
    // TODO: Вычисления
    
    // TODO: Вывод результата
    
    return 0;
}`;
        
        appState.current.editor.files[fileName] = starterCode;
        appState.current.file = fileName;
    } else {
        const fileName = `lab_${lab.id}.cpp`;
        appState.current.editor.files[fileName] = starterCode;
        appState.current.file = fileName;
    }
    
    codeEditor.setValue(starterCode);
    updateFileTabs();
    
    // Переключаемся на раздел практики
    switchSection('practice');
    closeModal();
    
    // Добавляем терминал с ID лабораторной
    setTimeout(() => {
        const practiceContainer = document.querySelector('.practice-container');
        // Удаляем старый терминал, если он есть
        const oldTerminal = document.getElementById('labTerminal');
        if (oldTerminal) oldTerminal.remove();
        
        const terminalHtml = createLabTerminal(lab.id);
        practiceContainer.insertAdjacentHTML('beforeend', terminalHtml);
    }, 500);
    
    showNotification(`🚀 Начата работа: ${lab.title}`, 'success');
    logActivity(`Начал лабораторную работу: ${lab.title}`);
}

// ================ ТЕРМИНАЛ ДЛЯ ЛАБ ================
function createLabTerminal(labId) {
    return `
        <div class="lab-terminal" id="labTerminal" data-lab-id="${labId}">
            <div class="terminal-header">
                <span><i class="fas fa-terminal"></i> Терминал проверки</span>
                <span class="badge badge-success" id="terminalStatus">Готов к проверке</span>
            </div>
            <div class="terminal-output" id="terminalOutput">
                <div class="terminal-line">Добро пожаловать в терминал проверки лабораторных работ</div>
                <div class="terminal-line">Нажмите "Проверить" для тестирования вашего кода</div>
            </div>
            <div class="terminal-actions">
                <button class="terminal-check-btn" onclick="checkLabCode('${labId}')">
                    <i class="fas fa-check-circle"></i> Проверить задание
                </button>
                <button class="btn btn-outline" onclick="clearTerminal()">
                    <i class="fas fa-broom"></i> Очистить
                </button>
            </div>
        </div>
    `;
}

// ================ ПРОВЕРКА КОДА В ТЕРМИНАЛЕ ================
function checkLabCode(labId) {
    const code = codeEditor.getValue();
    const output = document.getElementById('terminalOutput');
    const status = document.getElementById('terminalStatus');
    
    if (!output || !status) {
        console.error('Терминал не найден');
        return;
    }
    
    output.innerHTML = '';
    addTerminalLine('Запуск проверки...', 'input');
    
    setTimeout(() => {
        let passed = 0;
        let total = 4;
        let feedback = [];
        
        // Проверка 1: Наличие main()
        if (code.includes('int main()')) {
            addTerminalLine('✓ Присутствует функция main()', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найдена функция main()', 'error');
            feedback.push('Нужно определить функцию main()');
        }
        
        // Проверка 2: Наличие iostream
        if (code.includes('#include <iostream>')) {
            addTerminalLine('✓ Подключена библиотека iostream', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найдена библиотека iostream', 'error');
            feedback.push('Подключите библиотеку iostream (#include <iostream>)');
        }
        
        // Проверка 3: Наличие return 0;
        if (code.includes('return 0;')) {
            addTerminalLine('✓ Есть возврат значения', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Нет return 0;', 'error');
            feedback.push('Добавьте return 0; в конце main()');
        }
        
        // Проверка 4: Наличие cout (вывод)
        if (code.includes('cout <<') || code.includes('std::cout <<')) {
            addTerminalLine('✓ Есть оператор вывода', 'success');
            passed++;
        } else {
            addTerminalLine('✗ Не найден вывод на экран (cout)', 'error');
            feedback.push('Добавьте вывод результата с помощью cout');
        }
        
        const score = Math.round((passed / total) * 100);
        
        addTerminalLine('---', 'info');
        
        if (score >= 75) {
            status.innerHTML = '✅ Проверка пройдена!';
            status.className = 'badge badge-success';
            addTerminalLine(`🎉 Результат: ${score}% - Отлично!`, 'success');
            
            // Отмечаем лабораторную как выполненную
            markLabAsCompleted(labId);
        } else {
            status.innerHTML = '❌ Требуются исправления';
            status.className = 'badge badge-danger';
            addTerminalLine(`📝 Результат: ${score}% - Нужно доработать`, 'error');
            if (feedback.length > 0) {
                addTerminalLine('Советы:', 'info');
                feedback.forEach(advice => addTerminalLine(`  - ${advice}`, 'info'));
            }
        }
    }, 500);
}

// ================ ОТМЕТИТЬ ЛАБОРАТОРНУЮ КАК ВЫПОЛНЕННУЮ ================
function markLabAsCompleted(labId) {
    const labIndex = LABS_DATA.findIndex(l => l.id === labId);
    if (labIndex !== -1 && LABS_DATA[labIndex].status !== 'completed') {
        LABS_DATA[labIndex].status = 'completed';
        appState.user.completedLabs = (appState.user.completedLabs || 0) + 1;
        
        // Начисляем XP
        const xpEarned = LABS_DATA[labIndex].points || 200;
        appState.user.xp += xpEarned;
        
        checkLevelUp();
        forceProgressUpdate();
        saveUserState();
        
        showNotification(`🎉 Лабораторная работа выполнена! +${xpEarned} XP`, 'success');
    }
}

// ================ ДОБАВЛЕНИЕ СТРОКИ В ТЕРМИНАЛ ================
function addTerminalLine(text, type = '') {
    const output = document.getElementById('terminalOutput');
    if (!output) return;
    
    const line = document.createElement('div');
    line.className = `terminal-line ${type}`;
    line.innerHTML = text;
    output.appendChild(line);
    output.scrollTop = output.scrollHeight;
}

// ================ ОЧИСТКА ТЕРМИНАЛА ================
function clearTerminal() {
    const output = document.getElementById('terminalOutput');
    if (output) {
        output.innerHTML = '';
        addTerminalLine('Терминал очищен', 'info');
    }
}

function copyLabCode(labId) {
    const codeElement = document.getElementById(`labStarterCode_${labId}`);
    if (codeElement) {
        navigator.clipboard.writeText(codeElement.textContent);
        showNotification(currentLanguage === 'by' ? 
            'Стартавы код скапіяваны' : 
            'Стартовый код скопирован', "success");
    }
}

function reviewLab(labId) {
    const lab = LABS_DATA.find(l => l.id === labId);
    if (!lab || !lab.solution) return;
    
    codeEditor.setValue(lab.solution);
    switchSection('practice');
    closeModal();
    
    showNotification(currentLanguage === 'by' ? 
        'Рашэнне загружана ў рэдактар' : 
        'Решение загружено в редактор', "success");
}
        function filterTheories(filter) {
            const theories = document.querySelectorAll('.lab-card');
            
            theories.forEach(theory => {
                const isCompleted = theory.classList.contains('completed');
                
                if (filter === 'all') {
                    theory.style.display = 'block';
                } else if (filter === 'completed') {
                    theory.style.display = isCompleted ? 'block' : 'none';
                }
            });
        }

        function filterTheoriesByModule(moduleId) {
            const tags = document.querySelectorAll('.filter-tag');
            tags.forEach(tag => tag.classList.remove('active'));
            
            document.getElementById(`theoryTag${moduleId.charAt(0).toUpperCase() + moduleId.slice(1)}`).classList.add('active');
            
            const theories = document.querySelectorAll('.lab-card');
            theories.forEach(theory => {
                if (moduleId === 'all') {
                    theory.style.display = 'block';
                } else {
                    const moduleInfo = theory.querySelector('.lab-stat:nth-child(3) span').textContent;
                    const moduleMap = {
                        'Основы C++': 'basics',
                        'Объектно-ориентированное программирование': 'oop',
                        'Алгоритмы и структуры данных': 'algorithms'
                    };
                    
                    theory.style.display = (moduleMap[moduleInfo] === moduleId) ? 'block' : 'none';
                }
            });
        }

        function searchTheories(query) {
            const theories = document.querySelectorAll('.lab-card');
            const normalizedQuery = query.toLowerCase();
            
            theories.forEach(theory => {
                const title = theory.querySelector('.lab-title').textContent.toLowerCase();
                const description = theory.querySelector('.lab-description').textContent.toLowerCase();
                
                if (title.includes(normalizedQuery) || description.includes(normalizedQuery)) {
                    theory.style.display = 'block';
                } else {
                    theory.style.display = 'none';
                }
            });
        }

        function markTopicAsComplete(topicId, moduleId) {
            if (!appState.user.completedTopics.includes(topicId)) {
                appState.user.completedTopics.push(topicId);
                
                // Начисляем XP
                const topic = COURSE_STRUCTURE.modules.find(m => m.id === moduleId)
                    ?.topics.find(t => t.id === topicId);
                
                if (topic) {
                    const xpEarned = topic.points || 100;
                    addXP(xpEarned);
                    
                    showNotification(`Тема "${topic.title}" изучена! +${xpEarned} XP`, "success");
                    
                    // Обновляем прогресс модуля
                    updateModuleProgress(moduleId);
                    
                    // Обновляем UI
                    loadTheoryGrid();
                    
                    // Проверяем достижения
                    if (appState.user.completedTopics.length >= 10) {
                        unlockAchievement("theory_expert");
                    }
                }
            }
            
            saveUserState();
        }

        function updateModuleProgress(moduleId) {
            const module = COURSE_STRUCTURE.modules.find(m => m.id === moduleId);
            if (!module) return;
            
            // Подсчитываем завершенные темы
            const completedTopics = module.topics.filter(topic => 
                appState.user.completedTopics.includes(topic.id)
            );
            
            const completedPoints = completedTopics.reduce((sum, topic) => sum + (topic.points || 0), 0);
            const percentage = Math.round((completedPoints / module.totalPoints) * 100);
            
            // Обновляем прогресс
            appState.progress[moduleId] = {
                completed: completedPoints,
                total: module.totalPoints,
                percentage: percentage
            };
        }

        function startTheoryPractice(topicId) {
            // Находим тему
            let targetTopic = null;
            let targetModule = null;
            
            for (const module of COURSE_STRUCTURE.modules) {
                const topic = module.topics.find(t => t.id === topicId);
                if (topic) {
                    targetTopic = topic;
                    targetModule = module;
                    break;
                }
            }
            
            if (!targetTopic) return;
            
            // Загружаем практический пример
            const practiceCode = `// Практика: ${targetTopic.title}
        // Модуль: ${targetModule.name}

        #include <iostream>
        using namespace std;

        int main() {
            cout << "Практика по теме: ${targetTopic.title}" << endl;
            cout << "======================================" << endl;
            
            // Здесь будет ваш код для практики
            // Изучите теорию и попробуйте написать свою реализацию
            
            return 0;
        }`;
            
            // Создаем новый файл для практики
            const fileName = `practice_${topicId}_${Date.now()}.cpp`;
            appState.current.editor.files[fileName] = practiceCode;
            appState.current.file = fileName;
            
            // Обновляем вкладки и переключаемся на практику
            updateFileTabs();
            switchSection('practice');
            
            showNotification(`Практика по теме "${targetTopic.title}" начата`, "success");
            logActivity(`Начал практику по теме: ${targetTopic.title}`);
        }

        function startLearningPath() {
            // Находим первую не завершенную тему
            let nextTopic = null;
            let nextModule = null;
            
            for (const module of COURSE_STRUCTURE.modules) {
                for (const topic of module.topics) {
                    if (!appState.user.completedTopics.includes(topic.id) && topic.type === 'theory') {
                        nextTopic = topic;
                        nextModule = module;
                        break;
                    }
                }
                if (nextTopic) break;
            }
            
            if (nextTopic) {
                openTheoryModal(nextTopic.id, nextModule.id);
            } else {
                showNotification("🎉 Поздравляем! Вы изучили все темы!", "success");
            }
        }



       // ================ ОБНОВЛЕНИЕ ПОСЛЕДНЕЙ АКТИВНОСТИ НА ГЛАВНОЙ ================
function updateLastActivity(type) {
    if (type === 'lecture') {
        const lastLecture = getLastLecture();
        const emptyState = document.getElementById('emptyLectureState');
        const lectureInfo = document.getElementById('lastLectureInfo');
        
        if (lastLecture && emptyState && lectureInfo) {
            emptyState.style.display = 'none';
            lectureInfo.style.display = 'block';
            
            document.getElementById('lastLectureTitle').textContent = lastLecture.title;
            document.getElementById('lastLectureDescription').textContent = lastLecture.content?.overview || 'Теоретическая тема';
            document.getElementById('lastLectureDuration').textContent = lastLecture.duration || 15;
            document.getElementById('lastLecturePoints').textContent = lastLecture.points || 100;
            
            const difficultySpan = document.getElementById('lastLectureDifficulty');
            difficultySpan.textContent = lastLecture.difficulty === 'beginner' ? 'Начинающий' :
                                       lastLecture.difficulty === 'intermediate' ? 'Средний' : 'Продвинутый';
            difficultySpan.className = `badge ${lastLecture.difficulty}`;
            
            document.getElementById('continueLastLectureBtn').onclick = () => {
                openTheoryModal(lastLecture.id, lastLecture.moduleId);
            };
        } else if (emptyState) {
            emptyState.style.display = 'block';
            if (lectureInfo) lectureInfo.style.display = 'none';
        }
    } else if (type === 'lab') {
        const lastLab = getLastLab();
        const emptyState = document.getElementById('emptyLabState');
        const labInfo = document.getElementById('lastLabInfo');
        
        if (lastLab && emptyState && labInfo) {
            emptyState.style.display = 'none';
            labInfo.style.display = 'block';
            
            document.getElementById('lastLabTitle').textContent = lastLab.title;
            document.getElementById('lastLabDescription').textContent = lastLab.description;
            document.getElementById('lastLabDuration').textContent = lastLab.duration || 30;
            document.getElementById('lastLabPoints').textContent = lastLab.points || 200;
            
            const difficultySpan = document.getElementById('lastLabDifficulty');
            difficultySpan.textContent = lastLab.difficulty === 'beginner' ? 'Начинающий' :
                                       lastLab.difficulty === 'intermediate' ? 'Средний' : 
                                       lastLab.difficulty === 'advanced' ? 'Продвинутый' : 'Эксперт';
            difficultySpan.className = `badge ${lastLab.difficulty}`;
            
            document.getElementById('continueLastLabBtn').onclick = () => {
                openLabModal(lastLab.id);
            };
        } else if (emptyState) {
            emptyState.style.display = 'block';
            if (labInfo) labInfo.style.display = 'none';
        }
    } else if (type === 'test') {
        const lastTest = getLastTest();
        const emptyState = document.getElementById('emptyTestState');
        const testInfo = document.getElementById('lastTestInfo');
        
        if (lastTest && emptyState && testInfo) {
            emptyState.style.display = 'none';
            testInfo.style.display = 'block';
            
            document.getElementById('lastTestTitle').textContent = lastTest.name;
            document.getElementById('lastTestScore').textContent = `${lastTest.score}%`;
            document.getElementById('lastTestCorrect').textContent = lastTest.correct;
            document.getElementById('lastTestTotal').textContent = lastTest.total;
            document.getElementById('lastTestTime').textContent = lastTest.time;
            document.getElementById('lastTestDate').textContent = lastTest.date;
            
            const circle = document.getElementById('testScoreCircle');
            if (circle) {
                const dashOffset = 283 - (283 * lastTest.score / 100);
                circle.style.strokeDashoffset = dashOffset;
            }
            
            document.getElementById('retryLastTestBtn').onclick = () => {
                startTest(lastTest.id);
            };
        } else if (emptyState) {
            emptyState.style.display = 'block';
            if (testInfo) testInfo.style.display = 'none';
        }
    }
}

function getLastLecture() {
    const allTopics = [];
    COURSE_STRUCTURE.modules.forEach(module => {
        module.topics.forEach(topic => {
            if (topic.type === 'theory') {
                allTopics.push({
                    ...topic,
                    moduleId: module.id,
                    completed: appState.user.completedTopics.includes(topic.id)
                });
            }
        });
    });
    
    const completed = allTopics.filter(t => t.completed);
    return completed.length > 0 ? completed[completed.length - 1] : null;
}

// ================ ПОЛУЧЕНИЕ ПОСЛЕДНЕЙ ЛАБОРАТОРНОЙ ================
function getLastLab() {
    // Ищем последнюю завершенную лабораторную работу
    const completed = LABS_DATA.filter(lab => lab.status === 'completed');
    if (completed.length > 0) {
        return completed[completed.length - 1];
    }
    
    // Если нет завершенных, ищем работу "в процессе"
    const inProgress = LABS_DATA.filter(lab => lab.status === 'in-progress');
    if (inProgress.length > 0) {
        return inProgress[inProgress.length - 1];
    }
    
    // Если ничего нет, возвращаем первую доступную (для кнопки "Начать")
    const available = LABS_DATA.filter(lab => lab.status !== 'locked');
    return available.length > 0 ? available[0] : null;
}


// ================ ПОЛУЧЕНИЕ ПОСЛЕДНЕГО ТЕСТА ================
function getLastTest() {
    // Ищем последнюю активность по тестам
    const testActivities = appState.user.activity
        .filter(a => a.action.includes('Завяршыў тэст') || a.action.includes('Завершил тест') || 
                     a.action.includes('Пачаў тэст') || a.action.includes('Начал тест'));
    
    if (testActivities.length === 0) {
        return null;
    }
    
    const lastTestActivity = testActivities[testActivities.length - 1];
    
    // Пытаемся извлечь данные из строки активности
    const scoreMatch = lastTestActivity.action.match(/(\d+)%/);
    const score = scoreMatch ? parseInt(scoreMatch[1]) : 0;
    
    let testName = lastTestActivity.action.split('(')[0].trim();
    if (testName.includes(':')) {
        testName = testName.split(':')[1]?.trim() || testName;
    }
    
    // Определяем ID теста по названию
    let testId = 'basics';
    const nameLower = testName.toLowerCase();
    if (nameLower.includes('объект') || nameLower.includes('аб\'ект')) testId = 'oop';
    if (nameLower.includes('алгоритм') || nameLower.includes('алгарытм')) testId = 'algorithms';
    if (nameLower.includes('разветвл') || nameLower.includes('разгалін')) testId = 'branching';
    if (nameLower.includes('цикл') || nameLower.includes('цыкл')) testId = 'loops';
    if (nameLower.includes('массив') || nameLower.includes('масіў')) testId = 'arrays';
    
    return {
        id: testId,
        name: testName,
        score: score,
        correct: Math.floor(score / 10),
        total: 10,
        time: '5:00',
        date: new Date(lastTestActivity.timestamp).toLocaleDateString()
    };
}


// ================ ТЕСТЫ ================
function showTestsList() {
    const container = document.getElementById('testContainer');
    
    container.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <div style="font-size: 48px; color: var(--accent-blue); margin-bottom: 20px;">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h3 style="color: var(--text-primary); margin-bottom: 15px;">
                ${currentLanguage === 'by' ? 'Тэсты ведаў' : 'Тесты знаний'}
            </h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto;">
                ${currentLanguage === 'by' ? 
                    'Праверце свае веды па розных тэмах. Кожны правільны адказ прыносіць 10 XP.' : 
                    'Проверьте свои знания по разным темам. Каждый правильный ответ приносит 10 XP.'}
            </p>
            
            <div class="test-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                ${Object.values(TESTS_DATA).map(test => `
                    <div class="test-card" style="background: ${test.difficulty === 'beginner' ? 'rgba(100, 255, 218, 0.1)' : 
                                                               test.difficulty === 'intermediate' ? 'rgba(241, 250, 140, 0.1)' : 
                                                               'rgba(80, 250, 123, 0.1)'}; 
                         border: 1px solid ${test.difficulty === 'beginner' ? 'var(--accent-blue)' : 
                                           test.difficulty === 'intermediate' ? 'var(--accent-yellow)' : 
                                           'var(--accent-green)'}; 
                         border-radius: 15px; padding: 25px; cursor: pointer; transition: all 0.3s ease;" 
                         onclick="startTest('${test.id}')">
                        <div style="font-size: 32px; color: ${test.difficulty === 'beginner' ? 'var(--accent-blue)' : 
                                                              test.difficulty === 'intermediate' ? 'var(--accent-yellow)' : 
                                                              'var(--accent-green)'}; margin-bottom: 15px;">
                            <i class="fas ${test.difficulty === 'beginner' ? 'fa-play-circle' : 
                                          test.difficulty === 'intermediate' ? 'fa-cube' : 
                                          'fa-sort-amount-up'}"></i>
                        </div>
                        <h4 style="color: var(--text-primary); margin-bottom: 10px;">
                            ${currentLanguage === 'by' ? test.name_by : test.name}
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 15px;">
                            ${test.questions.length} ${currentLanguage === 'by' ? 'пытанняў' : 'вопросов'} • 
                            ${test.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы ўзровень' : 'Начальный уровень') :
                              test.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні ўзровень' : 'Средний уровень') :
                              (currentLanguage === 'by' ? 'Прасунуты ўзровень' : 'Продвинутый уровень')}
                        </p>
                        <div style="color: var(--accent-green); font-weight: bold;">
                            ${test.points} ${currentLanguage === 'by' ? 'ачкоў' : 'баллов'}
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
    
    document.querySelectorAll('.test-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 10px 20px rgba(0, 0, 0, 0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });
}

// ================ ПРОФИЛЬ ================
function openProfileModal() {
    document.body.style.overflow = 'hidden';
    document.getElementById('profileModal').classList.add('active');
    initProgressChart();
    initSkillsChart();
    initModalAchievements();
}

function initProgressChart() {
    const ctx = document.getElementById('progressChart').getContext('2d');
    
    if (progressChart) {
        progressChart.destroy();
    }
    
    const modules = COURSE_STRUCTURE.modules.map(m => 
        currentLanguage === 'by' && m.name_by ? m.name_by : m.name
    );
    
    const progressData = modules.map((module, index) => {
        const moduleId = COURSE_STRUCTURE.modules[index].id;
        return appState.progress[moduleId] ? appState.progress[moduleId].percentage : 0;
    });
    
    const colors = [
        'rgba(100, 255, 218, 0.8)',
        'rgba(80, 250, 123, 0.8)',
        'rgba(241, 250, 140, 0.8)',
        'rgba(255, 184, 108, 0.8)',
        'rgba(189, 147, 249, 0.8)'
    ];
    
    progressChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: modules,
            datasets: [{
                label: currentLanguage === 'by' ? 'Прагрэс (%)' : 'Прогресс (%)',
                data: progressData,
                backgroundColor: colors,
                borderColor: colors.map(c => c.replace('0.8', '1')),
                borderWidth: 2,
                borderRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    ticks: {
                        color: 'var(--text-secondary)'
                    },
                    grid: {
                        color: 'rgba(100, 255, 218, 0.1)'
                    }
                },
                x: {
                    ticks: {
                        color: 'var(--text-secondary)',
                        maxRotation: 45
                    },
                    grid: {
                        color: 'rgba(100, 255, 218, 0.1)'
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: 'var(--text-primary)'
                    }
                }
            }
        }
    });
}

function initSkillsChart() {
    const container = document.getElementById('skillsChart');
    container.innerHTML = '';
    
    const skills = [
        { name: currentLanguage === 'by' ? 'Сінтаксіс C++' : 'Синтаксис C++', value: 85 },
        { name: currentLanguage === 'by' ? 'Аб\'екты і класы' : 'Объекты и классы', value: 60 },
        { name: currentLanguage === 'by' ? 'Алгарытмы' : 'Алгоритмы', value: 45 },
        { name: currentLanguage === 'by' ? 'STL бібліятэка' : 'STL библиотека', value: 70 },
        { name: currentLanguage === 'by' ? 'Апрацоўка памылак' : 'Обработка ошибок', value: 55 }
    ];
    
    skills.forEach(skill => {
        const skillEl = document.createElement('div');
        skillEl.className = 'skill-item';
        skillEl.innerHTML = `
            <div class="skill-name">${skill.name}</div>
            <div class="skill-bar">
                <div class="skill-progress" style="width: ${skill.value}%"></div>
            </div>
            <div class="skill-value">${skill.value}%</div>
        `;
        container.appendChild(skillEl);
    });
}

// ================ ЗАГРУЗКА ДОСТИЖЕНИЙ В МОДАЛЬНОЕ ОКНО ================
function initModalAchievements() {
    const container = document.getElementById('modalAchievements');
    if (!container) return;
    
    container.innerHTML = '';
    
    ACHIEVEMENTS_DATA.forEach(achievement => {
        const name = currentLanguage === 'by' && achievement.name_by ? achievement.name_by : achievement.name;
        const description = currentLanguage === 'by' && achievement.description_by ? achievement.description_by : achievement.description;
        
        const achievementEl = document.createElement('div');
        achievementEl.className = `achievement-badge ${achievement.unlocked ? 'unlocked' : 'locked'}`;
        achievementEl.title = `${name}: ${description}`;
        achievementEl.onclick = () => showAchievementDetails(achievement);
        
        achievementEl.innerHTML = `
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-title">${name}</div>
        `;
        
        container.appendChild(achievementEl);
    });
    
    // Загружаем активность
    const activityList = document.getElementById('modalActivityList');
    if (activityList) {
        activityList.innerHTML = '';
        
        const recentActivities = appState.user.activity.slice(-5).reverse();
        if (recentActivities.length === 0) {
            activityList.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--accent-purple);">Нет активности</div>';
        } else {
            recentActivities.forEach(act => {
                const time = new Date(act.timestamp).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
                const item = document.createElement('div');
                item.className = 'activity-item';
                item.innerHTML = `
                    <div class="activity-icon"><i class="fas fa-circle"></i></div>
                    <div class="activity-content">
                        <div class="activity-title">${act.action}</div>
                        <div class="activity-time">${time}</div>
                    </div>
                `;
                activityList.appendChild(item);
            });
        }
    }
}

// ================ ОБРАБОТЧИКИ СОБЫТИЙ ДЛЯ ТЕМ ОФОРМЛЕНИЯ ================
function changeTheme(theme) {
    applyTheme(theme);
    showNotification(`${currentLanguage === 'by' ? 'Тэма зменена на' : 'Тема изменена на'} ${theme}`, "success");
}

// ================ ЗАВЕРШЕНИЕ ИНИЦИАЛИЗАЦИИ ================
// проеерка чтл все функции инициализированы
setTimeout(() => {
    // Проверяем, что все основные компоненты загружены
    console.log(currentLanguage === 'by' ? 
        'Платформа цалкам гатовая да працы!' : 
        'Платформа полностью готова к работе!');
    
    // Обнвюляем все компоненты
    updateUI();
    
    // Показываем приветственное сообщение
    showNotification(`🎉 ${currentLanguage === 'by' ? 
        'Вітаем у Асновах Алгарытмізацыі!' : 
        'Добро пожаловать в Основы алгоритмизации!'}`, "success");
    
    // Запускаем проверку ежедневных целей
    checkDailyGoals();
    
}, 1000);

// ================ ОБРАБОТЧИКИ СОБЫТИЙ ДЛЯ ПЕРЕТАСКИВАНИЯ АВАТАРА ================
function handleDragOver(e) {
    e.preventDefault();
    e.stopPropagation();
    e.dataTransfer.dropEffect = 'copy';
    
    const dropZone = document.getElementById('avatarDropZone');
    dropZone.classList.add('dragover');
}

function handleDrop(e) {
    e.preventDefault();
    e.stopPropagation();
    
    const dropZone = document.getElementById('avatarDropZone');
    dropZone.classList.remove('dragover');
    
    const files = e.dataTransfer.files;
    if (files.length > 0) {
        const file = files[0];
        
        //  искусственное событие для input
        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);
        document.getElementById('avatarUpload').files = dataTransfer.files;
        
        // Запускаем обработку
        handleAvatarUpload({ target: { files: dataTransfer.files } });
    }
}

//  обработчики событий для редактора аватара
document.addEventListener('DOMContentLoaded', function() {
    const avatarDropZone = document.getElementById('avatarDropZone');
    if (avatarDropZone) {
        avatarDropZone.addEventListener('dragover', handleDragOver);
        avatarDropZone.addEventListener('drop', handleDrop);
        avatarDropZone.addEventListener('click', () => {
            document.getElementById('avatarUpload').click();
        });
    }
});

// ================ ДОПОЛНИТЕЛЬНЫЕ УТИЛИТЫ ================
function toggleBookmark() {
    const topic = COURSE_STRUCTURE.modules
        .find(m => m.id === appState.current.module)
        ?.topics.find(t => t.id === appState.current.topic);
    
    if (topic) {
        const title = currentLanguage === 'by' && topic.title_by ? topic.title_by : topic.title;
        showNotification(`🔖 ${currentLanguage === 'by' ? 
            'Тэма дададзена ў закладкі:' : 
            'Тема добавлена в закладки:'} ${title}`, "success");
    }
}

function showHistory() {
    const activity = appState.user.activity.slice(-5).reverse();
    
    let historyHTML = `<div style="margin-bottom: 15px; color: var(--accent-blue); font-weight: bold;">
        <i class="fas fa-history"></i> ${currentLanguage === 'by' ? 'Апошнія дзеянні' : 'Последние действия'}
    </div>`;
    
    activity.forEach(item => {
        const time = new Date(item.timestamp).toLocaleTimeString('ru-RU', {
            hour: '2-digit',
            minute: '2-digit'
        });
        
        historyHTML += `
            <div style="padding: 8px 0; border-bottom: 1px solid rgba(100, 255, 218, 0.1);">
                <div style="color: var(--text-primary); font-size: 14px;">${item.action}</div>
                <div style="color: var(--accent-purple); font-size: 12px;">${time}</div>
            </div>
        `;
    });
    
    showNotification(historyHTML, "info");
}

// ================ ЭКСПОРТ ФУНКЦИЙ В ГЛОБАЛЬНУЮ ОБЛАСТЬ ================
window.switchSection = switchSection;
window.toggleFilterPanel = toggleFilterPanel;
window.filterByDifficulty = filterByDifficulty;
window.filterByStatus = filterByStatus;
window.filterByType = filterByType;
window.toggleProgressMap = toggleProgressMap;
window.openProfileModal = openProfileModal;
window.openAvatarEditor = openAvatarEditor;
window.openSettings = openSettings;
window.generateCertificate = generateCertificate;
window.showLeaderboard = showLeaderboard;
window.closeModal = closeModal;
window.startLab = startLab;
window.toggleLabInfo = toggleLabInfo;
window.showLabInfo = showLabInfo;
window.submitLabWork = submitLabWork;
window.selectLabTestAnswer = selectLabTestAnswer;
window.submitLabForGrading = submitLabForGrading;
window.saveLabAsProject = saveLabAsProject;
window.prevTopic = prevTopic;
window.nextTopic = nextTopic;
window.toggleBookmark = toggleBookmark;
window.showHistory = showHistory;
window.filterLabs = filterLabs;
window.createNewLab = createNewLab;
window.resetTest = resetTest;
window.submitTest = submitTest;
window.startTest = startTest;
window.selectTestAnswer = selectTestAnswer;
window.nextTestQuestion = nextTestQuestion;
window.reviewTestAnswers = reviewTestAnswers;
window.changeLeaderboardPeriod = changeLeaderboardPeriod;
window.showAllGames = showAllGames;
window.showAllGames = function() {
    showNotification(currentLanguage === 'by' ? 
        'Ігры знаходзяцца ў распрацоўцы' : 
        'Игры находятся в разработке', "info");
};
window.showAllProjects = showAllProjects;
window.createNewProject = createNewProject;
window.importProject = importProject;
window.showAllAchievements = showAllAchievements;
window.refreshHomeContent = refreshHomeContent;
window.goToModule = goToModule;
window.performSearch = performSearch;
window.goToSearchResult = goToSearchResult;
window.changeTheme = changeTheme;
window.changeLanguage = changeLanguage;
window.showSettingsSection = showSettingsSection;
window.toggleCompactMode = toggleCompactMode;
window.toggleAnimations = toggleAnimations;
window.changeEditorFontSize = changeEditorFontSize;
window.toggleAutocomplete = toggleAutocomplete;
window.toggleAutosave = toggleAutosave;
window.toggleSyntaxHighlighting = toggleSyntaxHighlighting;
window.changeTabSize = changeTabSize;
window.updateUserName = updateUserName;
window.updateUserNickname = updateUserNickname;
window.updateUserEmail = updateUserEmail;
window.toggleSystemNotifications = toggleSystemNotifications;
window.toggleAchievementNotifications = toggleAchievementNotifications;
window.toggleProgressNotifications = toggleProgressNotifications;
window.toggleHighContrast = toggleHighContrast;
window.toggleLargeFont = toggleLargeFont;
window.toggleSimpleNavigation = toggleSimpleNavigation;
window.toggleAutoSaveData = toggleAutoSaveData;
window.toggleBackups = toggleBackups;
window.exportAllData = exportAllData;
window.importData = importData;
window.clearAllData = clearAllData;
window.toggleAutoTranslate = toggleAutoTranslate;
window.exportUserData = exportUserData;
window.resetProgress = resetProgress;
window.runCode = runCode;
window.debugCode = debugCode;
window.clearOutput = clearOutput;
window.saveCode = saveCode;
window.createNewFile = createNewFile;
window.createNewFolder = createNewFolder;
window.deleteFile = deleteFile;
window.renameFile = renameFile;
window.closeFile = closeFile;
window.switchFile = switchFile;
window.stepMemory = stepMemory;
window.resetMemory = resetMemory;
window.visualizeMemory = visualizeMemory;
window.explainMemory = explainMemory;
window.copyCode = copyCode;
window.runExample = runExample;
window.checkAnswer = checkAnswer;
window.downloadCertificate = downloadCertificate;
window.shareCertificate = shareCertificate;
window.printCertificate = printCertificate;
window.handleAvatarUpload = handleAvatarUpload;
window.generateAvatar = generateAvatar;
window.saveAvatar = saveAvatar;
window.exportAvatar = exportAvatar;
window.applyFilter = function(filter) {
    showNotification(`${currentLanguage === 'by' ? 'Фільтр ужыты:' : 'Фильтр применен:'} ${filter}`, "info");
};
window.addFrame = function() {
    showNotification(currentLanguage === 'by' ? 'Рамка дададзена' : 'Рамка добавлена', "info");
};
window.addSticker = function() {
    showNotification(currentLanguage === 'by' ? 'Стыкер дададзены' : 'Стикер добавлен', "info");
};
window.cropAvatar = function() {
    showNotification(currentLanguage === 'by' ? 
        'Абразанне аватара знаходзіцца ў распрацоўцы' : 
        'Обрезание аватара находится в разработке', "info");
};
window.resetAvatar = function() {
    const avatarPreview = document.getElementById('avatarPreview');
    const avatarPlaceholder = document.getElementById('avatarPlaceholder');
    
    avatarPreview.style.display = 'none';
    avatarPlaceholder.style.display = 'block';
    
    showNotification(currentLanguage === 'by' ? 'Аватар скінуты' : 'Аватар сброшен', "success");
};

// ================ ЗАВЕРШЕНИЕ ЗАГРУЗКИ ================
console.log(currentLanguage === 'by' ? 
    'Адукацыйная платформа "Асновы Алгарытмізацыі" цалкам загружаная!' : 
    'Образовательная платформа "Основы алгоритмизации" полностью загружена!');

//  проверка всех компонентов
function finalCheck() {
    const components = [
        { id: 'loader', name: 'Лоадер' },
        { id: 'mainContent', name: 'Главный контент' },
        { id: 'codeEditor', name: 'Редактор кода' },
        { id: 'theoryContent', name: 'Теоретический контент' },
        { id: 'labsGrid', name: 'Лабораторные работы' },
        { id: 'testContainer', name: 'Тесты' },
        { id: 'projectsGrid', name: 'Проекты' },
        { id: 'achievementsGrid', name: 'Достижения' },
        { id: 'progressMap', name: 'Карта прогресса' }
    ];

    let allGood = true;
    components.forEach(comp => {
        const element = document.getElementById(comp.id);
        if (!element) {
            console.warn(`${comp.name} не найден в DOM`);
            allGood = false;
        }
    });

    if (allGood) {
        console.log('✅ Все компоненты успешно загружены');
    }
}

// Автоматическое сохранение при закрытии страницы
window.addEventListener('beforeunload', function(e) {
    if (appState.user.settings.autoSaveData) {
        saveUserState();
        
        // Для некоторых браузеров требуется возврат значения
        if (appState.current.editor.files && Object.keys(appState.current.editor.files).length > 0) {
            const unsavedChanges = Object.values(appState.current.editor.files)
                .some(code => code && code.length > 0);
            
            if (unsavedChanges) {
                e.preventDefault();
                e.returnValue = currentLanguage === 'by' ? 
                    'У вас ёсць незахаваныя змены. Сапраўды выйсці?' : 
                    'У вас есть несохраненные изменения. Действительно выйти?';
                return e.returnValue;
            }
        }
    }
});

// Восстановление сессии
window.addEventListener('pageshow', function(event) {
    if (event.persisted) {
        console.log('Страница восстановлена из кэша браузера');
        // Обновляем состояние интерфейса
        updateUI();
    }
});

// Обработка изменения размера окна
let resizeTimeout;
window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(function() {
        // Обновляем размеры редактора кода
        if (codeEditor) {
            codeEditor.refresh();
        }
        
        // Обновляем графики при изменении размера
        if (progressChart) {
            progressChart.resize();
        }
        
        console.log('Размер окна изменен, интерфейс обновлен');
    }, 250);
});

// Инициализация Service Worker для оффлайн-работы (если поддерживается)
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js').then(function(registration) {
            console.log('ServiceWorker зарегистрирован: ', registration.scope);
        }, function(err) {
            console.log('Ошибка регистрации ServiceWorker: ', err);
        });
    });
}

// Экспорт данных для разработчиков
window.exportDebugInfo = function() {
    const debugInfo = {
        timestamp: new Date().toISOString(),
        appState: {
            user: {
                name: appState.user.name,
                level: appState.user.level,
                xp: appState.user.xp,
                completedTopics: appState.user.completedTopics.length,
                completedLabs: appState.user.completedLabs,
                achievements: appState.user.achievements.length
            },
            current: {
                section: appState.current.section,
                module: appState.current.module,
                topic: appState.current.topic
            },
            settings: appState.user.settings
        },
        performance: {
            memory: performance.memory ? {
                usedJSHeapSize: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + 'MB',
                totalJSHeapSize: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + 'MB'
            } : 'Недоступно',
            timing: performance.timing ? {
                loadTime: performance.timing.loadEventEnd - performance.timing.navigationStart + 'ms',
                domReadyTime: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart + 'ms'
            } : 'Недоступно'
        },
        userAgent: navigator.userAgent,
        screen: {
            width: window.screen.width,
            height: window.screen.height,
            colorDepth: window.screen.colorDepth
        }
    };

    console.log('Отладочная информация:', debugInfo);
    
    const dataStr = JSON.stringify(debugInfo, null, 2);
    const dataBlob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(dataBlob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = `debug_info_${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showNotification('📊 Отладочная информация экспортирована', 'success');
};

// Добавляем кнопку отладки в режиме разработки
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    const debugBtn = document.createElement('button');
    debugBtn.innerHTML = '🐛';
    debugBtn.style.position = 'fixed';
    debugBtn.style.bottom = '20px';
    debugBtn.style.right = '20px';
    debugBtn.style.zIndex = '9999';
    debugBtn.style.width = '40px';
    debugBtn.style.height = '40px';
    debugBtn.style.borderRadius = '50%';
    debugBtn.style.background = 'var(--accent-red)';
    debugBtn.style.color = 'white';
    debugBtn.style.border = 'none';
    debugBtn.style.cursor = 'pointer';
    debugBtn.style.fontSize = '20px';
    debugBtn.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
    debugBtn.title = 'Отладка';
    
    debugBtn.addEventListener('click', function() {
        window.exportDebugInfo();
    });
    
    document.body.appendChild(debugBtn);
}

// Функция для проверки обновлений
function checkForUpdates() {
    const currentVersion = CONFIG.VERSION;
    const savedVersion = localStorage.getItem('algorithmics_platform_version');
    
    if (savedVersion && savedVersion !== currentVersion) {
        showNotification(`🔄 ${currentLanguage === 'by' ? 
            'Даступна новая версія!' : 
            'Доступна новая версия!'} (${savedVersion} → ${currentVersion})`, 'info');
        
        // Можно добавить автоматическое обновление данных
        if (confirm(currentLanguage === 'by' ? 
            'Абнавіць дадзеныя да новай версіі?' : 
            'Обновить данные до новой версии?')) {
            // Здесь можно добавить миграцию данных
            localStorage.setItem('algorithmics_platform_version', currentVersion);
            showNotification('✅ Данные обновлены', 'success');
        }
    }
}

// Проверка обновлений при загрузке
setTimeout(checkForUpdates, 2000);

//  поддержка PWA (Progressive Web App)
if ('serviceWorker' in navigator && 'PushManager' in window) {
    // Запрос разрешения на уведомления
    function requestNotificationPermission() {
        if (appState.user.settings.notifications.system) {
            Notification.requestPermission().then(permission => {
                if (permission === 'granted') {
                    console.log('Разрешение на уведомления получено');
                }
            });
        }
    }
    
    // Запрашиваем разрешение при первом посещении
    if (!localStorage.getItem('notification_permission_requested')) {
        setTimeout(requestNotificationPermission, 5000);
        localStorage.setItem('notification_permission_requested', 'true');
    }
}

// Добавляем поддержку темной темы системы
const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
if (prefersDarkScheme.matches && appState.user.settings.theme === 'auto') {
    applyTheme('dark');
}

prefersDarkScheme.addEventListener('change', e => {
    if (appState.user.settings.theme === 'auto') {
        applyTheme(e.matches ? 'dark' : 'light');
    }
});

// Функция для создания резервной копии вручную
window.createManualBackup = function() {
    const backup = {
        timestamp: new Date().toISOString(),
        data: JSON.parse(JSON.stringify(appState))
    };
    
    appState.backups.push(backup);
    
    // Ограничиваем количество бэкапов
    if (appState.backups.length > 20) {
        appState.backups = appState.backups.slice(-20);
    }
    
    saveUserState();
    
    showNotification(`💾 ${currentLanguage === 'by' ? 
        'Рэзервовая копія створана' : 
        'Резервная копия создана'} (${new Date().toLocaleTimeString()})`, 'success');
    
    logActivity(currentLanguage === 'by' ? 
        'Стварыў ручную рэзервовую копію' : 
        'Создал ручную резервную копию');
};

// Добавляем контекстное меню для редактора кода
if (codeEditor) {
    const editorWrapper = codeEditor.getWrapperElement();
    
    // Создаем контекстное меню
    const contextMenu = document.createElement('div');
    contextMenu.style.display = 'none';
    contextMenu.style.position = 'absolute';
    contextMenu.style.background = 'var(--panel-bg)';
    contextMenu.style.border = '1px solid var(--panel-border)';
    contextMenu.style.borderRadius = '8px';
    contextMenu.style.padding = '8px 0';
    contextMenu.style.zIndex = '10000';
    contextMenu.style.boxShadow = '0 4px 20px rgba(0,0,0,0.3)';
    contextMenu.style.minWidth = '200px';
    
    const menuItems = [
        { text: currentLanguage === 'by' ? 'Капіяваць' : 'Копировать', action: 'copy', icon: 'fa-copy' },
        { text: currentLanguage === 'by' ? 'Выразаць' : 'Вырезать', action: 'cut', icon: 'fa-cut' },
        { text: currentLanguage === 'by' ? 'Уставіць' : 'Вставить', action: 'paste', icon: 'fa-paste' },
        { separator: true },
        { text: currentLanguage === 'by' ? 'Вылучыць усё' : 'Выделить всё', action: 'selectAll', icon: 'fa-mouse-pointer' },
        { separator: true },
        { text: currentLanguage === 'by' ? 'Фарматаваць код' : 'Форматировать код', action: 'format', icon: 'fa-indent' },
        { text: currentLanguage === 'by' ? 'Каментаваць' : 'Комментировать', action: 'comment', icon: 'fa-comment' }
    ];
    
    menuItems.forEach(item => {
        if (item.separator) {
            const separator = document.createElement('div');
            separator.style.height = '1px';
            separator.style.background = 'var(--panel-border)';
            separator.style.margin = '4px 0';
            contextMenu.appendChild(separator);
        } else {
            const menuItem = document.createElement('div');
            menuItem.style.padding = '8px 16px';
            menuItem.style.cursor = 'pointer';
            menuItem.style.display = 'flex';
            menuItem.style.alignItems = 'center';
            menuItem.style.gap = '10px';
            menuItem.style.color = 'var(--text-primary)';
            menuItem.style.transition = 'background 0.2s';
            
            menuItem.innerHTML = `
                <i class="fas ${item.icon}" style="width: 16px; color: var(--accent-purple);"></i>
                <span>${item.text}</span>
            `;
            
            menuItem.addEventListener('mouseenter', () => {
                menuItem.style.background = 'rgba(100, 255, 218, 0.1)';
            });
            
            menuItem.addEventListener('mouseleave', () => {
                menuItem.style.background = 'transparent';
            });
            
            menuItem.addEventListener('click', () => {
                contextMenu.style.display = 'none';
                
                switch(item.action) {
                    case 'copy':
                        document.execCommand('copy');
                        break;
                    case 'cut':
                        document.execCommand('cut');
                        break;
                    case 'paste':
                        document.execCommand('paste');
                        break;
                    case 'selectAll':
                        codeEditor.execCommand('selectAll');
                        break;
                    case 'format':
                        formatCode();
                        break;
                    case 'comment':
                        codeEditor.toggleComment();
                        break;
                }
            });
            
            contextMenu.appendChild(menuItem);
        }
    });
    
    document.body.appendChild(contextMenu);
    
    // Показываем контекстное меню
    editorWrapper.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        
        contextMenu.style.display = 'block';
        contextMenu.style.left = e.pageX + 'px';
        contextMenu.style.top = e.pageY + 'px';
        
        // Закрываем меню при клике вне его
        setTimeout(() => {
            const closeMenu = function(event) {
                if (!contextMenu.contains(event.target)) {
                    contextMenu.style.display = 'none';
                    document.removeEventListener('click', closeMenu);
                }
            };
            document.addEventListener('click', closeMenu);
        }, 100);
    });
}


function loadCurrentActivity() {

    const lastActivity = appState.user.activity[appState.user.activity.length - 1];
    if (lastActivity) { 
        console.log('Последняя активность:', lastActivity);
    }
}

// Функция форматирования кода
function formatCode() {
    const code = codeEditor.getValue();
    
    // Простое форматирование
    let formatted = code
        .replace(/\}\s*else\s*\{/g, '} else {')
        .replace(/\}\s*catch\s*\(/g, '} catch (')
        .replace(/\)\s*\{/g, ') {')
        .replace(/\s+/g, ' ')
        .replace(/^\s+/gm, '')
        .replace(/\s+$/gm, '');
    
    // Добавляем отступы
    let indent = 0;
    const lines = formatted.split('\n');
    formatted = lines.map(line => {
        if (line.includes('}') && !line.includes('{')) {
            indent = Math.max(0, indent - 1);
        }
        
        const indentedLine = '    '.repeat(indent) + line.trim();
        
        if (line.includes('{') && !line.includes('}')) {
            indent++;
        }
        
        return indentedLine;
    }).join('\n');
    
    codeEditor.setValue(formatted);
    showNotification(currentLanguage === 'by' ? 
        'Код адфарматаваны' : 
        'Код отформатирован', 'success');
}

// Добавляем поддержку перетаскивания файлов в редактор
const editorContainer = document.querySelector('.code-editor-container');
if (editorContainer) {
    editorContainer.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.stopPropagation();
        this.style.borderColor = 'var(--accent-green)';
        this.style.background = 'rgba(80, 250, 123, 0.05)';
    });
    
    editorContainer.addEventListener('dragleave', function(e) {
        e.preventDefault();
        e.stopPropagation();
        this.style.borderColor = '';
        this.style.background = '';
    });
    
    editorContainer.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        this.style.borderColor = '';
        this.style.background = '';
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            const file = files[0];
            if (file.name.endsWith('.cpp') || file.name.endsWith('.h') || file.name.endsWith('.txt')) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const content = event.target.result;
                    
                    // Предлагаем сохранить как новый файл
                    const fileName = prompt(currentLanguage === 'by' ? 
                        'Увядзіце імя файла:' : 
                        'Введите имя файла:', file.name);
                    
                    if (fileName) {
                        appState.current.editor.files[fileName] = content;
                        appState.current.file = fileName;
                        codeEditor.setValue(content);
                        updateFileTabs();
                        
                        showNotification(`📁 ${currentLanguage === 'by' ? 
                            'Файл загружаны:' : 
                            'Файл загружен:'} ${fileName}`, 'success');
                    }
                };
                reader.readAsText(file);
            } else {
                showNotification(currentLanguage === 'by' ? 
                    'Падтрымліваюцца толькі .cpp, .h і .txt файлы' : 
                    'Поддерживаются только .cpp, .h и .txt файлы', 'error');
            }
        }
    });
}

// Функция для экспорта текущего файла
window.exportCurrentFile = function() {
    const fileName = appState.current.file;
    const content = codeEditor.getValue();
    
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = fileName;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showNotification(`💾 ${currentLanguage === 'by' ? 
        'Файл экспартаваны:' : 
        'Файл экспортирован:'} ${fileName}`, 'success');
};

// Добавляем кнопку экспорта в редактор
const exportBtn = document.createElement('button');
exportBtn.innerHTML = '<i class="fas fa-download"></i>';
exportBtn.className = 'btn btn-small btn-outline';
exportBtn.style.marginLeft = '10px';
exportBtn.title = currentLanguage === 'by' ? 'Экспартаваць файл' : 'Экспортировать файл';
exportBtn.onclick = window.exportCurrentFile;

// Находим контейнер с кнопками редактора и добавляем нашу кнопку
const editorControls = document.querySelector('.editor-controls');
if (editorControls) {
    editorControls.appendChild(exportBtn);
}

// Финальная инициализация
setTimeout(() => {
    finalCheck();
    
    // Проверяем доступность всех ресурсов
    const resources = [
        'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css',
        'https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css',
        'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'
    ];
    
    resources.forEach(resource => {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'style';
        link.href = resource;
        document.head.appendChild(link);
    });
    
    // Показываем подсказку для новых пользователей
    if (!localStorage.getItem('first_visit_completed')) {
        setTimeout(() => {
            showNotification(`👋 ${currentLanguage === 'by' ? 
                'Вітаем у Асновах Алгарытмізацыі! Пачніце з раздзела "Тэорыя"' : 
                'Добро пожаловать в Основы алгоритмизации! Начните с раздела "Теория"'}`, 'info', 10000);
            
            localStorage.setItem('first_visit_completed', 'true');
        }, 3000);
    }
    
    // Инициализация завершена
    console.log('🚀 Платформа готова к работе!');
    document.documentElement.setAttribute('data-ready', 'true');
    
}, 1000);

// Экспорт глобальных переменных для отладки
window.CONFIG = CONFIG;
window.COURSE_STRUCTURE = COURSE_STRUCTURE;
window.LABS_DATA = LABS_DATA;
window.PROJECTS_DATA = PROJECTS_DATA;
window.ACHIEVEMENTS_DATA = ACHIEVEMENTS_DATA;

// Функция для сброса кэша (только для разработки)
if (window.location.hostname === 'localhost') {
    window.clearCache = function() {
        localStorage.clear();
        sessionStorage.clear();
        location.reload();
    };
    
    console.log('Для сброса кэша выполните: clearCache()');
}

console.log(`✅ ${CONFIG.APP_NAME} v${CONFIG.VERSION} успешно загружена!`);

// Вспомогательная функция для получения ID текущей лабораторной
function getCurrentLabId() {
    // Сначала пытаемся получить из глобальной переменной
    if (window.currentLab) {
        return window.currentLab;
    }
    // Если нет, ищем по открытому файлу
    const fileName = appState.current.file;
    if (fileName && fileName.startsWith('lab_')) {
        const match = fileName.match(/lab_(.*?)\.cpp/);
        if (match && match[1]) {
            return match[1];
        }
    }
    return null;
}

function toggleProgressSection(type) {
    const listId = type === 'theory' ? 'theoryTopicsList' : 
                   type === 'labs' ? 'labsList' : 'testsList';
    const chevronId = type === 'theory' ? 'theoryChevron' : 
                      type === 'labs' ? 'labsChevron' : 'testsChevron';
    
    const list = document.getElementById(listId);
    const chevron = document.getElementById(chevronId);
    
    if (list && chevron) {
        if (list.style.display === 'none') {
            list.style.display = 'block';
            chevron.style.transform = 'rotate(180deg)';
        } else {
            list.style.display = 'none';
            chevron.style.transform = 'rotate(0deg)';
        }
    }
}

// ================ ОБНОВЛЕНИЕ СПИСКОВ ПРОГРЕССА ================
function updateProgressList(type, items) {
    const listId = type === 'theory' ? 'theoryTopicsList' : 
                   type === 'labs' ? 'labsList' : 'testsList';
    const listElement = document.getElementById(listId);
    
    if (!listElement) return;
    
    listElement.innerHTML = '';
    
    if (items.length === 0) {
        listElement.innerHTML = `
            <div style="text-align: center; padding: 20px; color: var(--accent-purple);">
                <i class="fas fa-info-circle"></i><br>
                ${currentLanguage === 'by' ? 'Няма даступных элементаў' : 'Нет доступных элементов'}
            </div>
        `;
        return;
    }
    
    items.forEach(item => {
        const isCompleted = type === 'theory' ? 
            appState.user.completedTopics.includes(item.id) :
            type === 'labs' ? item.status === 'completed' : false;
        
        const itemElement = document.createElement('div');
        itemElement.className = `${type}-item-small ${isCompleted ? 'completed' : ''}`;
        
        const itemTitle = currentLanguage === 'by' && item.title_by ? item.title_by : item.title;
        
        itemElement.innerHTML = `
            <div class="${type}-check-small">
                ${isCompleted ? '<i class="fas fa-check"></i>' : ''}
            </div>
            <div class="${type}-text-small">
                <div class="${type}-title-small">${itemTitle}</div>
                <div class="${type}-meta-small">
                    ${type === 'theory' ? `
                        <span>${item.duration || 15} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                        <span>•</span>
                        <span>${item.moduleName || 'Теория'}</span>
                    ` : type === 'labs' ? `
                        <span>${item.duration || 30} ${currentLanguage === 'by' ? 'хв' : 'мин'}</span>
                        <span>•</span>
                        <span class="badge ${item.difficulty}">
                            ${item.difficulty === 'beginner' ? (currentLanguage === 'by' ? 'Пачатковы' : 'Начинающий') :
                              item.difficulty === 'intermediate' ? (currentLanguage === 'by' ? 'Сярэдні' : 'Средний') :
                              (currentLanguage === 'by' ? 'Прасунуты' : 'Продвинутый')}
                        </span>
                    ` : ''}
                </div>
            </div>
        `;
        
        // Добавляем обработчик клика
        if (type === 'theory') {
            itemElement.onclick = () => openTheoryModal(item.id, item.moduleId || 'basics');
        } else if (type === 'labs') {
            itemElement.onclick = () => openLabModal(item.id);
        }
        
        listElement.appendChild(itemElement);
    });
}   

</script>
</body>
</html>